(function(){"use strict";var o={9093:function(o,a,e){var t=e(8355),r=e(5130),i=e(6768);const n={class:"body"};function c(o,a,e,t,r,c){const s=(0,i.g2)("router-view"),l=(0,i.g2)("PieComponent");return(0,i.uX)(),(0,i.CE)("div",null,[(0,i.Lk)("div",n,[(0,i.bF)(s)]),(0,i.bF)(l)])}var s=e(4232);const l=(0,i.Fv)('<div class="text-center p-2" data-v-8e709692><a href="https://puestito.online/" data-v-8e709692><img src="/favicon.ico" width="22" alt="" data-v-8e709692></a><div style="margin-left:10px;display:inline;" data-v-8e709692> Puestito Online </div><a style="margin-left:10px;" href="http://instagram.com/puestito.online" target="_blank" data-v-8e709692><img src="/recursos/instagram.png" width="20" alt="" data-v-8e709692></a></div>',1),d=[l];function u(o,a,e,t,r,n){return(0,i.uX)(),(0,i.CE)("footer",{class:(0,s.C4)(["text-center",{"margen-logueado":r.logueado}])},d,2)}var p={data(){return{logueado:!1}},mounted(){localStorage.getItem("usuario")?this.logueado=!0:this.logueado=!1}},m=e(1241);const g=(0,m.A)(p,[["render",u],["__scopeId","data-v-8e709692"]]);var b=g,k=(e(8077),{name:"App",components:{PieComponent:b},methods:{},mounted(){}});const h=(0,m.A)(k,[["render",c]]);var v=h,f=e(1387);const L=o=>((0,i.Qi)("data-v-4de0a2dc"),o=o(),(0,i.jt)(),o),C={class:"todo"},y={class:"container pt-4 mb-2"},x={class:"text-center"},w={key:0,class:"container"},P={class:"col-md-6 mt-2"},E={key:1,class:"text-center"},S=["src"],M=L((()=>(0,i.Lk)("hr",null,null,-1))),I={class:"botones"},_=L((()=>(0,i.Lk)("img",{src:"/recursos/user.png",width:"50",height:"50",alt:"User"},null,-1))),A=L((()=>(0,i.Lk)("img",{src:"/recursos/productos.png",width:"50",height:"50",alt:"Productos"},null,-1))),T={class:"botones mt-2"},N=L((()=>(0,i.Lk)("img",{src:"/recursos/qr.png",width:"50",height:"50",alt:"QR"},null,-1))),q=L((()=>(0,i.Lk)("img",{src:"/recursos/image.png",width:"50",height:"50",alt:"QR"},null,-1))),X={class:"botones mt-2"},F=L((()=>(0,i.Lk)("img",{src:"/recursos/mipuestito.png",width:"50",height:"50",alt:"User"},null,-1))),U=L((()=>(0,i.Lk)("img",{src:"/recursos/support.png",width:"50",height:"50",alt:"User"},null,-1))),R=L((()=>(0,i.Lk)("hr",null,null,-1))),V={class:"center"},D=L((()=>(0,i.Lk)("button",{class:"btn-menu-danger","data-bs-toggle":"modal","data-bs-target":"#cerrarSesionModal"}," Salir ",-1))),z={class:"modal fade",id:"cerrarSesionModal",tabindex:"-1","aria-labelledby":"cerrarSesionModalLabel","aria-hidden":"true"},Q={class:"modal-dialog"},W={class:"modal-content"},$=L((()=>(0,i.Lk)("div",{class:"modal-header text-center"},[(0,i.Lk)("h1",{class:"modal-title fs-5",id:"cerrarSesionModalLabel"},"¿Cerrar sesión?"),(0,i.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1))),j={class:"modal-footer text-center"},B=L((()=>(0,i.Lk)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"No",-1)));function O(o,a,e,t,r,n){const c=(0,i.g2)("NavbarAdminComponent"),l=(0,i.g2)("router-link");return(0,i.uX)(),(0,i.CE)("div",C,[n.esAdmin()?((0,i.uX)(),(0,i.Wv)(c,{key:0})):(0,i.Q3)("",!0),(0,i.Lk)("div",y,[(0,i.Lk)("h1",x,"Bienvenid@, "+(0,s.v_)(r.nombreNegocio),1),n.esAdmin()?((0,i.uX)(),(0,i.CE)("div",w,[(0,i.Lk)("div",P,[(0,i.bF)(l,{class:"btn btn-menu",to:"/u/negocios"},{default:(0,i.k6)((()=>[(0,i.eW)("Listar Negocios")])),_:1})])])):((0,i.uX)(),(0,i.CE)("div",E,[r.negocio.imagen?((0,i.uX)(),(0,i.CE)("img",{key:0,style:{"border-radius":"100%"},src:r.negocio.imagen,width:"100",alt:""},null,8,S)):(0,i.Q3)("",!0),M,(0,i.Lk)("div",I,[(0,i.bF)(l,{class:"btn-inicio",to:"/u/modificar"},{default:(0,i.k6)((()=>[_,(0,i.eW)(" Perfil")])),_:1}),(0,i.bF)(l,{class:"btn-inicio",to:"/u/productos"},{default:(0,i.k6)((()=>[A,(0,i.eW)("Productos")])),_:1})]),(0,i.Lk)("div",T,[(0,i.bF)(l,{to:"/u/crearqr",class:"btn-inicio"},{default:(0,i.k6)((()=>[N,(0,i.eW)(" Crear QR ")])),_:1}),(0,i.bF)(l,{to:"/u/publicaciones",class:"btn-inicio"},{default:(0,i.k6)((()=>[q,(0,i.eW)("Publicaciones ")])),_:1})]),(0,i.Lk)("div",X,[(0,i.bF)(l,{to:"/"+r.nombreUsuario,class:"btn-inicio"},{default:(0,i.k6)((()=>[F,(0,i.eW)(" Mi Puestito ")])),_:1},8,["to"]),(0,i.Lk)("a",{class:"btn-inicio",onClick:a[0]||(a[0]=(...o)=>n.enviarMensaje&&n.enviarMensaje(...o))},[U,(0,i.eW)(" Soporte ")])]),R,(0,i.Lk)("div",V,[D,(0,i.Lk)("div",z,[(0,i.Lk)("div",Q,[(0,i.Lk)("div",W,[$,(0,i.Lk)("div",j,[B,(0,i.Lk)("button",{type:"button",class:"btn btn-menu-danger","data-bs-dismiss":"modal",onClick:a[1]||(a[1]=(...o)=>n.cerrarSesion&&n.cerrarSesion(...o))},"Sí, cerrar sesión")])])])])])]))])])}e(4114);const J=o=>((0,i.Qi)("data-v-ef922fbe"),o=o(),(0,i.jt)(),o),G={class:""},H={class:"navbar navbar-expand-lg navbar-dark bg-dark"},K={class:"container-fluid"},Y=J((()=>(0,i.Lk)("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarNavDarkDropdown","aria-controls":"navbarNavDarkDropdown","aria-expanded":"false","aria-label":"Toggle navigation"},[(0,i.Lk)("span",{class:"navbar-toggler-icon"})],-1))),Z={class:"collapse navbar-collapse",id:"navbarNavDarkDropdown"},oo={class:"navbar-nav"},ao={class:"test nav-item"},eo={class:"test nav-item"},to={class:"test nav-item"},ro=J((()=>(0,i.Lk)("button",{class:"nav-link","data-bs-toggle":"modal","data-bs-target":"#exampleModal"}," Salir ",-1))),io={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},no={class:"modal-dialog"},co={class:"modal-content"},so=J((()=>(0,i.Lk)("div",{class:"modal-header text-center"},[(0,i.Lk)("h1",{class:"modal-title fs-5",id:"exampleModalLabel"},"¿Cerrar sesión?"),(0,i.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1))),lo={class:"modal-footer text-center"},uo=J((()=>(0,i.Lk)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"No",-1)));function po(o,a,e,t,r,n){const c=(0,i.g2)("router-link");return(0,i.uX)(),(0,i.CE)("div",G,[(0,i.Lk)("nav",H,[(0,i.Lk)("div",K,[(0,i.bF)(c,{class:"navbar-brand",to:"/u/home"},{default:(0,i.k6)((()=>[(0,i.eW)((0,s.v_)(n.leerUsuario())+" | ",1)])),_:1}),Y,(0,i.Lk)("div",Z,[(0,i.Lk)("ul",oo,[(0,i.Lk)("li",ao,[(0,i.bF)(c,{class:"nav-link",to:"/u/home"},{default:(0,i.k6)((()=>[(0,i.eW)("Inicio")])),_:1})]),(0,i.Lk)("li",eo,[(0,i.bF)(c,{class:"nav-link",to:"/u/negocios"},{default:(0,i.k6)((()=>[(0,i.eW)("Listar Negocios")])),_:1})]),(0,i.Lk)("li",to,[ro,(0,i.Lk)("div",io,[(0,i.Lk)("div",no,[(0,i.Lk)("div",co,[so,(0,i.Lk)("div",lo,[uo,(0,i.Lk)("button",{type:"button",class:"btn btn-menu-danger","data-bs-dismiss":"modal",onClick:a[0]||(a[0]=(...o)=>n.cerrarSesion&&n.cerrarSesion(...o))},"Sí, cerrar sesión")])])])])])])])])])])}var mo={methods:{leerUsuario(){return localStorage.getItem("nombre")},cerrarSesion(){localStorage.clear(),$g.push("/")}},components:{"router-link":f.Wk}};const go=(0,m.A)(mo,[["render",po],["__scopeId","data-v-ef922fbe"]]);var bo=go,ko=e(4874),ho=e.n(ko),vo={data(){return{nombreUsuario:"",nombreNegocio:"",negocio:""}},components:{NavbarAdminComponent:bo,"router-link":f.Wk},mounted(){this.leerUsuario()},created(){this.obtenerInformacionNegocio()},methods:{enviarMensaje(){const o=navigator.userAgent||navigator.vendor||window.opera,a=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(o);let e=a?"whatsapp://send":"https://web.whatsapp.com/send";const t="¡Hola Puestito Online! Tengo una consulta...",r=`${e}?phone=3853005369&text=${encodeURIComponent(t)}`;try{window.open(r),location.reload(1)}catch(i){ho().fire({icon:"error",text:"Por favor habilita las ventanas emergentes para ir a WhatsApp."+i.response.data.message})}},async obtenerInformacionNegocio(){try{this.obteniendoInfo=!0;const o=await t.A.get(`/miNegocio?usuario=${localStorage.getItem("usuario")}`);this.negocio=o.data}catch(o){console.error("Error al cargar los productos:",o)}finally{this.obteniendoInfo=!1}},leerUsuario(){this.nombreUsuario=localStorage.getItem("usuario"),this.nombreNegocio=localStorage.getItem("nombre")},esAdmin(){return"admin"==localStorage.getItem("usuario")},cerrarSesion(){localStorage.clear(),$g.push("/")}}};const fo=(0,m.A)(vo,[["render",O],["__scopeId","data-v-4de0a2dc"]]);var Lo=fo;const Co=o=>((0,i.Qi)("data-v-49b12ada"),o=o(),(0,i.jt)(),o),yo={class:"navbar navbar-dark bg-black"},xo={class:"container"},wo={class:"flex"},Po=Co((()=>(0,i.Lk)("img",{src:"/favicon.ico",alt:"",class:"nav-logo"},null,-1))),Eo={class:"ancho-busqueda input-group mauto"},So={class:"end btn-login"},Mo=Co((()=>(0,i.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"28",fill:"currentColor",class:"bi bi-box-arrow-in-right",viewBox:"0 0 16 16"},[(0,i.Lk)("path",{"fill-rule":"evenodd",d:"M6 3.5a.5.5 0 0 1 .5-.5h8a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-8a.5.5 0 0 1-.5-.5v-2a.5.5 0 0 0-1 0v2A1.5 1.5 0 0 0 6.5 14h8a1.5 1.5 0 0 0 1.5-1.5v-9A1.5 1.5 0 0 0 14.5 2h-8A1.5 1.5 0 0 0 5 3.5v2a.5.5 0 0 0 1 0z"}),(0,i.Lk)("path",{"fill-rule":"evenodd",d:"M11.854 8.354a.5.5 0 0 0 0-.708l-3-3a.5.5 0 1 0-.708.708L10.293 7.5H1.5a.5.5 0 0 0 0 1h8.793l-2.147 2.146a.5.5 0 0 0 .708.708z"})],-1))),Io=Co((()=>(0,i.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"28",fill:"currentColor",class:"bi bi-box-arrow-in-right",viewBox:"0 0 16 16"},[(0,i.Lk)("path",{"fill-rule":"evenodd",d:"M6 3.5a.5.5 0 0 1 .5-.5h8a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-8a.5.5 0 0 1-.5-.5v-2a.5.5 0 0 0-1 0v2A1.5 1.5 0 0 0 6.5 14h8a1.5 1.5 0 0 0 1.5-1.5v-9A1.5 1.5 0 0 0 14.5 2h-8A1.5 1.5 0 0 0 5 3.5v2a.5.5 0 0 0 1 0z"}),(0,i.Lk)("path",{"fill-rule":"evenodd",d:"M11.854 8.354a.5.5 0 0 0 0-.708l-3-3a.5.5 0 1 0-.708.708L10.293 7.5H1.5a.5.5 0 0 0 0 1h8.793l-2.147 2.146a.5.5 0 0 0 .708.708z"})],-1))),_o={class:"navbar bg-dark c-white mtb-0"},Ao={class:"container"},To=Co((()=>(0,i.Lk)("option",{value:"Todos",selected:""},"Todos",-1))),No=["value"],qo={class:"container2"},Xo={key:0,class:"pantalla-carga text-center"},Fo=Co((()=>(0,i.Lk)("div",{class:"logo-carga"},[(0,i.Lk)("img",{class:"logo-img",src:"/favicon.ico",width:"50",alt:""}),(0,i.Lk)("div",{class:"texto-carga"},"Buscando Puestitos")],-1))),Uo=[Fo],Ro={key:1},Vo={class:"mt-2"},Do={class:"modalMapa",style:{height:"400px"}},zo={style:{"max-width":"150px"}},Qo={style:{"font-size":"20px"}},Wo=Co((()=>(0,i.Lk)("br",null,null,-1))),$o={style:{"text-align":"center"}},jo=["href"],Bo=Co((()=>(0,i.Lk)("img",{src:"/favicon.ico",width:"20",alt:""},null,-1))),Oo=[Bo],Jo=["href"],Go=Co((()=>(0,i.Lk)("img",{style:{margin:"0px 10px"},width:"20",src:"/recursos/instagram.png"},null,-1))),Ho=[Go],Ko=["href"],Yo=Co((()=>(0,i.Lk)("img",{style:{margin:"0px 10px"},width:"20",src:"/recursos/facebook.png"},null,-1))),Zo=[Yo],oa={style:{margin:"5px 0px"}},aa=Co((()=>(0,i.Lk)("b",null,"Dirección:",-1))),ea={style:{margin:"5px 0px"}},ta=Co((()=>(0,i.Lk)("b",null,"Correo:",-1))),ra={style:{margin:"5px 0px"}},ia=Co((()=>(0,i.Lk)("b",null,"Teléfono:",-1))),na={style:{"text-align":"center",margin:"7px 0px"}},ca={class:"titulo-rubro"},sa={class:"categoria-container"},la={class:"carrusel"},da={class:"item-container"},ua={key:0,class:"imagen"},pa=["src"],ma={key:1},ga=Co((()=>(0,i.Lk)("img",{src:"/recursos/missing.png",alt:"",class:"imagen-negocio"},null,-1))),ba=[ga],ka={class:"item-nombre"},ha={class:"item-btn"},va=["onClick"],fa=Co((()=>(0,i.Lk)("img",{src:"/recursos/pin.png",width:"30",alt:""},null,-1))),La=[fa],Ca={key:0,class:"text-center mt-3"};function ya(o,a,e,t,n,c){const l=(0,i.g2)("router-link"),d=(0,i.g2)("GMapMarker"),u=(0,i.g2)("GMapInfoWindow"),p=(0,i.g2)("GMapMap");return(0,i.uX)(),(0,i.CE)("div",null,[(0,i.Lk)("nav",yo,[(0,i.Lk)("div",xo,[(0,i.Lk)("div",wo,[(0,i.bF)(l,{to:"/"},{default:(0,i.k6)((()=>[Po])),_:1}),(0,i.Lk)("div",Eo,[(0,i.bo)((0,i.Lk)("input",{class:"form-control","onUpdate:modelValue":a[0]||(a[0]=o=>n.busqueda=o),type:"text",name:"busqueda",id:"",placeholder:"Buscar puestitos o rubros...",title:"Ingrese una palabra clave..."},null,512),[[r.Jo,n.busqueda]]),n.busqueda?((0,i.uX)(),(0,i.CE)("button",{key:0,class:"btn-close btn-limpiar-busqueda",onClick:a[1]||(a[1]=(...o)=>c.limpiarBusqueda&&c.limpiarBusqueda(...o))})):(0,i.Q3)("",!0)]),(0,i.Lk)("div",So,[n.usuario?((0,i.uX)(),(0,i.Wv)(l,{key:0,class:"inline-end c-white",to:"/u/home"},{default:(0,i.k6)((()=>[Mo])),_:1})):((0,i.uX)(),(0,i.Wv)(l,{key:1,class:"inline-end c-white",to:"/u/login"},{default:(0,i.k6)((()=>[Io])),_:1}))])])])]),(0,i.Lk)("nav",_o,[(0,i.Lk)("div",Ao,[(0,i.bo)((0,i.Lk)("select",{class:"navbar-filter",name:"rubro",id:"rubro","onUpdate:modelValue":a[2]||(a[2]=o=>n.rubro=o)},[To,((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(c.rubrosUnicos,((o,a)=>((0,i.uX)(),(0,i.CE)("option",{key:a,value:o},(0,s.v_)(o),9,No)))),128))],512),[[r.u1,n.rubro]]),(0,i.bF)(l,{class:"navbar-filter",to:"/u/planes"},{default:(0,i.k6)((()=>[(0,i.eW)(" Quiero mi Puestito! ")])),_:1}),(0,i.Lk)("button",{class:"navbar-filter",onClick:a[3]||(a[3]=(...o)=>c.mostrarMapa&&c.mostrarMapa(...o))},(0,s.v_)(n.mapaMostrado2?"Cerrar\n          Mapa":"Abrir Mapa"),1)])]),(0,i.Lk)("div",qo,[n.cargando?((0,i.uX)(),(0,i.CE)("div",Xo,Uo)):((0,i.uX)(),(0,i.CE)("div",Ro,[(0,i.Lk)("div",Vo,[(0,i.bo)((0,i.Lk)("div",Do,[(0,i.bF)(p,{style:{height:"400px"},center:n.mapCenter,zoom:n.zoom,options:n.options},{default:(0,i.k6)((()=>[n.posicionActual?((0,i.uX)(),(0,i.Wv)(d,{key:0,position:n.posicionActual,options:{icon:"/recursos/pinself.png"},title:"Estás aquí."},null,8,["position","options","title"])):(0,i.Q3)("",!0),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(c.negociosFiltrados,((o,e)=>((0,i.uX)(),(0,i.Wv)(d,{key:e,position:o.location,title:o.nombre,onClick:o=>c.openInfoWindow(e),options:{icon:"/recursos/pin30.png"},id:"gmapm"},{default:(0,i.k6)((()=>[n.infoWindowOpened==e?((0,i.uX)(),(0,i.Wv)(u,{key:0,options:n.infoWindow[e].options,closeclick:!0,onCloseclick:a[4]||(a[4]=o=>c.openInfoWindow(null))},{default:(0,i.k6)((()=>[(0,i.Lk)("div",zo,[(0,i.Lk)("b",Qo,(0,s.v_)(o.nombre),1),Wo,(0,i.Lk)("div",$o,[(0,i.Lk)("a",{style:{"text-decoration":"none",color:"white","font-size":"12px",padding:"4px 6px"},href:"https://puestito.online/"+o.usuario,target:"_blank"},Oo,8,jo),o.instagram?((0,i.uX)(),(0,i.CE)("a",{key:0,href:"https://instagram.com/"+o.instagram,target:"blank"},Ho,8,Jo)):(0,i.Q3)("",!0),o.facebook?((0,i.uX)(),(0,i.CE)("a",{key:1,href:"https://facebook.com/"+o.facebook,target:"blank"},Zo,8,Ko)):(0,i.Q3)("",!0)]),(0,i.Lk)("p",oa,[aa,(0,i.eW)(" "+(0,s.v_)(o.direccion),1)]),(0,i.Lk)("p",ea,[ta,(0,i.eW)(" "+(0,s.v_)(o.correo),1)]),(0,i.Lk)("p",ra,[ia,(0,i.eW)(" "+(0,s.v_)(o.telefono),1)]),(0,i.Lk)("p",na,' "'+(0,s.v_)(o.descripcion)+'" ',1)])])),_:2},1032,["options"])):(0,i.Q3)("",!0)])),_:2},1032,["position","title","onClick","options"])))),128))])),_:1},8,["center","zoom","options"])],512),[[r.aG,n.mapaMostrado2]]),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(c.negociosAgrupados,((o,a)=>((0,i.uX)(),(0,i.CE)("div",{key:a},[(0,i.Lk)("div",ca,(0,s.v_)(a),1),(0,i.Lk)("div",sa,[(0,i.Lk)("div",la,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(o,((o,a)=>((0,i.uX)(),(0,i.CE)("div",{key:a,class:(0,s.C4)({"carrusel-item":!0,active:0===a})},[(0,i.Lk)("div",da,[(0,i.bF)(l,{class:"item-texto-block-end",to:"/"+o.usuario,target:"_blank"},{default:(0,i.k6)((()=>[o.imagen?((0,i.uX)(),(0,i.CE)("div",ua,[(0,i.Lk)("img",{class:"imagen-negocio",src:o.imagen,alt:" "},null,8,pa)])):((0,i.uX)(),(0,i.CE)("div",ma,ba)),(0,i.Lk)("div",ka,(0,s.v_)(o.nombre),1)])),_:2},1032,["to"]),(0,i.Lk)("div",ha,[null!==o.location?((0,i.uX)(),(0,i.CE)("a",{key:0,class:"cursor-pointer mt-1",onClick:a=>c.localizar(o)},La,8,va)):(0,i.Q3)("",!0)])])],2)))),128))])])])))),128)),0===c.negociosFiltrados.length?((0,i.uX)(),(0,i.CE)("div",Ca," No se encontraron resultados para esa búsqueda. ")):(0,i.Q3)("",!0)])]))])])}var xa={components:{},name:"MapaComponent",data(){return{usuario:"",buscarMenu:!1,posicionActual:"",options:{disableDefaultUI:!0,styles:[{featureType:"poi.business",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"labels.icon",stylers:[{visibility:"off"}]}]},infoWindowOpened:null,infoWindow:[],mapCenter:{lat:-27.7876,lng:-64.2596},zoom:14,negocios:[],busqueda:"",rubro:"Todos",mapaMostrado:!1,mapaMostrado2:!1,cargando:!0}},created(){this.fetchNegocios()},mounted(){this.$route.params&&$g.push("/",this.$route.params),this.obtenerUsuario()},computed:{negociosFiltrados(){let o=this.negocios;if("Todos"!==this.rubro&&(o=o.filter((o=>o.rubro===this.rubro))),""!==this.busqueda){const a=this.busqueda.toLowerCase();o=o.filter((o=>{const e=o.nombre?o.nombre.toLowerCase():"",t=o.descripcion?o.descripcion.toLowerCase():"",r=o.rubro?o.rubro.toLowerCase():"";return e.includes(a)||t.includes(a)||r.includes(a)}))}return o},negociosAgrupados(){const o={};this.negociosFiltrados.forEach((a=>{o[a.rubro]||(o[a.rubro]=[]),o[a.rubro].push(a)}));const a=Object.keys(o).sort(),e={};return a.forEach((a=>{e[a]=o[a]})),e},rubrosUnicos(){const o=new Set;return this.negocios.forEach((a=>{o.add(a.rubro)})),Array.from(o)}},methods:{obtenerUsuario(){this.usuario=localStorage.getItem("usuario")},limpiarBusqueda(){this.busqueda="",this.rubro="Todos"},async localizar(o){if(!this.mapaMostrado){this.mapaMostrado=!0,this.mapaMostrado2=!0;try{await this.inicializarMapa()}catch(a){console.error("Error al inicializar el mapa:",a)}}this.buscarMenu=!0,this.mapaMostrado2=!0,this.mapCenter=o.location,this.openInfoWindow(o.index),window.scrollTo({top:0,behavior:"smooth"})},openInfoWindow(o){this.infoWindowOpened==o?this.infoWindowOpened=null:this.infoWindowOpened=o},inicializarMapa(){return new Promise(((o,a)=>{try{navigator.geolocation?navigator.geolocation.getCurrentPosition((a=>{const e={lat:a.coords.latitude,lng:a.coords.longitude};this.posicionActual=e,o()}),(o=>{console.log("Error al geolocalizar. Inicializando en Plaza Libertad. ",o),a(o)})):(console.log("No funciona geolocation. Centrando mapa en Plaza Libertad."),o())}catch(e){console.error("Error al obtener la ubicación actual:",e),a(e)}}))},mostrarBusqueda(){this.buscarMenu?this.buscarMenu=!1:this.buscarMenu=!0},async mostrarMapa(){if(this.mapaMostrado2)this.mapaMostrado2=!1;else if(this.mapaMostrado)this.mapaMostrado2=!0;else{this.mapaMostrado=!0,this.mapaMostrado2=!0;try{await this.inicializarMapa(),this.mapCenter=this.posicionActual}catch(o){console.error("Error al inicializar el mapa:",o)}}},async fetchNegocios(){try{const o=await t.A.get("/negocios");this.negocios=o.data.filter(((o,a)=>(o.index=a,o))),this.infoWindow=Array(this.negocios.length).fill({open:!1,options:{pixelOffset:{width:0,height:-10},maxWidth:320,maxHeight:320}})}catch(o){console.error("Error al obtener los datos de los negocios:",o)}finally{this.cargando=!1}}}};const wa=(0,m.A)(xa,[["render",ya],["__scopeId","data-v-49b12ada"]]);var Pa=wa;const Ea=o=>((0,i.Qi)("data-v-2785baf4"),o=o(),(0,i.jt)(),o),Sa={key:0,class:"pantalla-carga text-center"},Ma=Ea((()=>(0,i.Lk)("div",{class:"logo-carga"},[(0,i.Lk)("img",{class:"logo-img",src:"/favicon.ico",width:"50",alt:""}),(0,i.Lk)("div",{class:"texto-carga"},"Ingresando")],-1))),Ia=[Ma],_a={class:"total"},Aa={class:"fondo text-center"},Ta=Ea((()=>(0,i.Lk)("img",{src:"/favicon.ico",width:"100",alt:"logo",class:"mb-4"},null,-1))),Na=Ea((()=>(0,i.Lk)("h1",{class:"titulo"},"Puestito Online",-1))),qa={class:"width-size"},Xa=Ea((()=>(0,i.Lk)("label",{for:"usuario"},"Usuario",-1))),Fa={class:"width-size"},Ua=Ea((()=>(0,i.Lk)("label",{for:"contraseña"},"Contraseña",-1))),Ra=Ea((()=>(0,i.Lk)("div",{class:"col-md-8"},[(0,i.Lk)("button",{type:"submit",class:"btn btn-entrar"},"Entrar")],-1)));function Va(o,a,e,t,n,c){const s=(0,i.g2)("router-link");return(0,i.uX)(),(0,i.CE)("div",null,[n.ingresando?((0,i.uX)(),(0,i.CE)("div",Sa,Ia)):(0,i.Q3)("",!0),(0,i.Lk)("div",_a,[(0,i.Lk)("div",Aa,[Ta,Na,(0,i.Lk)("form",{class:"row",onSubmit:a[3]||(a[3]=(0,r.D$)(((...o)=>c.login&&c.login(...o)),["prevent"]))},[(0,i.Lk)("div",qa,[Xa,(0,i.bo)((0,i.Lk)("input",{class:"form-control mb-3",type:"text","onUpdate:modelValue":a[0]||(a[0]=o=>n.usuario=o),required:"",onInput:a[1]||(a[1]=(...o)=>c.restrictInput&&c.restrictInput(...o))},null,544),[[r.Jo,n.usuario]])]),(0,i.Lk)("div",Fa,[Ua,(0,i.bo)((0,i.Lk)("input",{class:"form-control mb-4",type:"password","onUpdate:modelValue":a[2]||(a[2]=o=>n.contraseña=o),required:""},null,512),[[r.Jo,n.contraseña]])]),Ra,(0,i.bF)(s,{class:"mt-4",to:"/u/planes"},{default:(0,i.k6)((()=>[(0,i.eW)("¿Registrar Negocio?")])),_:1}),(0,i.bF)(s,{class:"mt-4",to:"/"},{default:(0,i.k6)((()=>[(0,i.eW)("Volver a Puestito Online")])),_:1})],32)])])])}var Da={components:{},data(){return{ingresando:!1,usuario:"","contraseña":""}},methods:{restrictInput(o){const a=o.target.value,e=/[\s!@#$%^&*()_+=[\]{};':"\\|,<>?`´¨~¡/°¬¿]/g;e.test(a)&&(this.usuario=this.usuario.substring(0,this.usuario.length-1))},checkAuthentication(){const o=!!localStorage.getItem("token");o&&this.$router.push("/u/home")},async login(){try{this.ingresando=!0;const o=await t.A.post("/login",{usuario:this.usuario,"contraseña":this.contraseña});if(200===o.status){await t.A.post("/comprobar-vencimiento",{usuario:o.data.nomUsuario}),localStorage.setItem("token",o.data.token),localStorage.setItem("nombre",o.data.nombre),localStorage.setItem("usuario",o.data.nomUsuario),this.$router.push("/u/home");const a=ho().mixin({toast:!0,position:"bottom-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:o=>{o.addEventListener("mouseenter",ho().stopTimer),o.addEventListener("mouseleave",ho().resumeTimer)}});a.fire({icon:"success",title:"Inicio de sesión exitoso."})}}catch(o){ho().fire({icon:"error",text:"Usuario/contraseña incorrectos."})}finally{this.ingresando=!1}}},mounted(){this.checkAuthentication()}};const za=(0,m.A)(Da,[["render",Va],["__scopeId","data-v-2785baf4"]]);var Qa=za;const Wa=o=>((0,i.Qi)("data-v-cf60cc3c"),o=o(),(0,i.jt)(),o),$a={key:2,class:"pantalla-carga text-center"},ja=Wa((()=>(0,i.Lk)("div",{class:"logo-carga"},[(0,i.Lk)("img",{class:"logo-img",src:"/favicon.ico",width:"50",alt:""}),(0,i.Lk)("div",{class:"texto-carga"},"Procesando pago...")],-1))),Ba=[ja],Oa={key:3,class:"pantalla-carga text-center"},Ja=Wa((()=>(0,i.Lk)("div",{class:"logo-carga"},[(0,i.Lk)("img",{class:"logo-img",src:"/favicon.ico",width:"50",alt:""}),(0,i.Lk)("div",{class:"texto-carga"},"Registrando...")],-1))),Ga=[Ja],Ha={key:4,class:"container mt-4 mb-2"},Ka={key:0,class:"row g-3 mt-4 border"},Ya={class:"row g-3 border"},Za=Wa((()=>(0,i.Lk)("h4",{class:"mb-2"},"Información de acceso",-1))),oe=Wa((()=>(0,i.Lk)("h4",{class:"subtitulo"},"Cómo ingresarás a la plataforma.",-1))),ae={class:"col-md-6"},ee={class:"subtitulo"},te={class:"col-md-6"},re={class:"subtitulo",style:{color:"gray"}},ie=Wa((()=>(0,i.Lk)("h4",{class:"mb-2"},"Información del negocio",-1))),ne=Wa((()=>(0,i.Lk)("h4",{class:"subtitulo"}," Más adelante podés modificar esta información. ",-1))),ce={class:"col-md-6"},se={class:"col-md-6"},le={class:"col-md-6"},de=(0,i.Fv)('<option value="Elegí tu rubro" disabled data-v-cf60cc3c>Elegí tu rubro</option><option value="Artesanías" data-v-cf60cc3c>Artesanías</option><option value="Bar/Restaurante" data-v-cf60cc3c>Bar/Restaurante</option><option value="Carnicería" data-v-cf60cc3c>Carnicería</option><option value="Consultorio" data-v-cf60cc3c>Consultorio</option><option value="Estética" data-v-cf60cc3c>Estética</option><option value="Farmacia" data-v-cf60cc3c>Farmacia</option><option value="Ferretería" data-v-cf60cc3c>Ferretería</option><option value="Fiambrería" data-v-cf60cc3c>Fiambrería</option><option value="Florería" data-v-cf60cc3c>Florería</option><option value="Heladería" data-v-cf60cc3c>Heladería</option><option value="Indumentaria" data-v-cf60cc3c>Indumentaria</option><option value="Inmobiliaria" data-v-cf60cc3c>Inmobiliaria</option><option value="Juguetería" data-v-cf60cc3c>Juguetería</option><option value="Librería" data-v-cf60cc3c>Librería</option><option value="Limpieza" data-v-cf60cc3c>Limpieza</option><option value="Panadería" data-v-cf60cc3c>Panadería</option><option value="Peluquería" data-v-cf60cc3c>Peluquería</option><option value="Polirubro" data-v-cf60cc3c>Polirubro</option><option value="Pollería" data-v-cf60cc3c>Pollería</option><option value="Repostería" data-v-cf60cc3c>Repostería</option><option value="Rotisería" data-v-cf60cc3c>Rotisería</option><option value="Reparación/mantenimiento" data-v-cf60cc3c>Reparación/mantenimiento</option><option value="Servicios" data-v-cf60cc3c>Servicios</option><option value="Supermercado" data-v-cf60cc3c>Supermercado</option><option value="Tecnología" data-v-cf60cc3c>Tecnología</option><option value="Verdulería" data-v-cf60cc3c>Verdulería</option><option value="Veterinaria/Forrajería" data-v-cf60cc3c>Veterinaria/Forrajería</option>',28),ue=[de],pe={class:"col-md-6"},me={class:"col-md-6"},ge={class:"col-md-6"},be={class:"col-md-6"},ke={class:"col-md-6"},he={class:"col-md-6"},ve=Wa((()=>(0,i.Lk)("label",{class:"form-label text-center",for:"imagen"},"Logo (JPG/PNG)",-1))),fe={class:"col-md-6"},Le=Wa((()=>(0,i.Lk)("label",{class:"form-label text-center",for:"portada"},"Portada (JPG/PNG)",-1))),Ce=Wa((()=>(0,i.Lk)("div",{class:"subtitulo"},"Puedes elegir las imágenes más tarde",-1))),ye=["disabled"],xe=["disabled"],we={key:1,class:"row g-3 mt-4 border"},Pe={class:"modalCategoriaContainer text-center"},Ee={class:"modalCategoria"},Se={class:"modal-dialog modal-dialog-centered"},Me={class:"modal-content"},Ie={class:"modal-header pl-2"},_e=Wa((()=>(0,i.Lk)("h1",{class:"modal-title fs-5",id:"agregarCategoriaLabel"},"Recortar Imagen",-1))),Ae={class:"modal-body mt-2"},Te={class:"pantalla-cargas text-center"},Ne=Wa((()=>(0,i.Lk)("div",{class:"logo-carga"},[(0,i.Lk)("img",{class:"logo-img",src:"/favicon.ico",width:"50",alt:""}),(0,i.Lk)("div",{class:"texto-carga"}," Cargando imagen ")],-1))),qe=[Ne],Xe={ref:"cropperImg",alt:"Croppear"},Fe={class:"modal-footer mt-2"},Ue={class:"modalCategoriaContainer text-center"},Re={class:"modalCategoria"},Ve={class:"modal-dialog modal-dialog-centered"},De={class:"modal-content"},ze={class:"modal-header pl-2"},Qe=Wa((()=>(0,i.Lk)("h1",{class:"modal-title fs-5",id:"agregarCategoriaLabel"},"Recortar Imagen",-1))),We={class:"modal-body mt-2"},$e={class:"pantalla-cargas text-center"},je=Wa((()=>(0,i.Lk)("div",{class:"logo-carga"},[(0,i.Lk)("img",{class:"logo-img",src:"/favicon.ico",width:"50",alt:""}),(0,i.Lk)("div",{class:"texto-carga"}," Cargando imagen ")],-1))),Be=[je],Oe={ref:"cropperPortada",alt:"Croppear"},Je={class:"modal-footer mt-2"};function Ge(o,a,e,t,n,c){const l=(0,i.g2)("NavbarAdminComponent"),d=(0,i.g2)("NavbarPublicoComponent");return(0,i.uX)(),(0,i.CE)("div",null,["admin"==n.usuario?((0,i.uX)(),(0,i.Wv)(l,{key:0})):((0,i.uX)(),(0,i.Wv)(d,{key:1})),n.cargandoPago?((0,i.uX)(),(0,i.CE)("div",$a,Ba)):(0,i.Q3)("",!0),n.cargandoRegistro?((0,i.uX)(),(0,i.CE)("div",Oa,Ga)):((0,i.uX)(),(0,i.CE)("div",Ha,[n.usuario?((0,i.uX)(),(0,i.CE)("div",we,[(0,i.Lk)("button",{class:"btn btn-menu botones m-auto mb-2",type:"submit",onClick:a[15]||(a[15]=(...o)=>c.registrarNegocio&&c.registrarNegocio(...o))}," Ir a Pagar ")])):((0,i.uX)(),(0,i.CE)("div",Ka,[(0,i.Lk)("form",{onSubmit:a[14]||(a[14]=(0,r.D$)(((...o)=>c.registrarNegocio&&c.registrarNegocio(...o)),["prevent"])),id:"form-checkout"},[(0,i.Lk)("div",Ya,[Za,oe,(0,i.Lk)("div",ae,[(0,i.bo)((0,i.Lk)("input",{class:(0,s.C4)([{"usuario-disponible":!n.usuarioDisponible},"form-control"]),type:"text",id:"username","onUpdate:modelValue":a[0]||(a[0]=o=>n.negocio.usuario=o),maxlength:"20",onInput:a[1]||(a[1]=(...o)=>c.restrictInput&&c.restrictInput(...o)),onChange:a[2]||(a[2]=(...o)=>c.verificarDisponibilidad&&c.verificarDisponibilidad(...o)),placeholder:"Nombre de Usuario",required:""},null,34),[[r.Jo,n.negocio.usuario]]),(0,i.Lk)("div",ee,"Tu link será puestito.online/"+(0,s.v_)(n.negocio.usuario),1)]),(0,i.Lk)("div",te,[(0,i.bo)((0,i.Lk)("input",{class:"form-control",type:"password",id:"password",maxlength:"20","onUpdate:modelValue":a[3]||(a[3]=o=>n.negocio.contraseña=o),placeholder:"Contraseña",required:""},null,512),[[r.Jo,n.negocio.contraseña]]),(0,i.Lk)("div",re,(0,s.v_)(n.negocio.contraseña),1)]),ie,ne,(0,i.Lk)("div",ce,[(0,i.bo)((0,i.Lk)("input",{class:"form-control",type:"text",id:"nombre","onUpdate:modelValue":a[4]||(a[4]=o=>n.negocio.nombre=o),placeholder:"Nombre del Negocio",required:""},null,512),[[r.Jo,n.negocio.nombre]])]),(0,i.Lk)("div",se,[(0,i.bo)((0,i.Lk)("input",{class:"form-control",type:"text",id:"descripcion","onUpdate:modelValue":a[5]||(a[5]=o=>n.negocio.descripcion=o),placeholder:"Descripción (40 caracteres)",maxlength:"40"},null,512),[[r.Jo,n.negocio.descripcion]])]),(0,i.Lk)("div",le,[(0,i.bo)((0,i.Lk)("select",{class:"form-select",name:"rubro",id:"rubro","onUpdate:modelValue":a[6]||(a[6]=o=>n.negocio.rubro=o)},ue,512),[[r.u1,n.negocio.rubro]])]),(0,i.Lk)("div",pe,[(0,i.bo)((0,i.Lk)("input",{class:"form-control",type:"email",id:"email","onUpdate:modelValue":a[7]||(a[7]=o=>n.negocio.email=o),placeholder:"Email",required:""},null,512),[[r.Jo,n.negocio.email]])]),(0,i.Lk)("div",me,[(0,i.bo)((0,i.Lk)("input",{class:"form-control",type:"text",id:"direccion","onUpdate:modelValue":a[8]||(a[8]=o=>n.negocio.direccion=o),placeholder:"Dirección (por ej. Libertad 20, Santiago del Estero, Argentina)"},null,512),[[r.Jo,n.negocio.direccion]])]),(0,i.Lk)("div",ge,[(0,i.bo)((0,i.Lk)("input",{class:"form-control",type:"number",id:"telefono","onUpdate:modelValue":a[9]||(a[9]=o=>n.negocio.telefono=o),placeholder:"Teléfono (completo, por ej. 5493855223287)"},null,512),[[r.Jo,n.negocio.telefono]])]),(0,i.Lk)("div",be,[(0,i.bo)((0,i.Lk)("input",{class:"form-control",type:"text",id:"instagram","onUpdate:modelValue":a[10]||(a[10]=o=>n.negocio.instagram=o),placeholder:"Usuario de Instagram (por ej. puestito.online)"},null,512),[[r.Jo,n.negocio.instagram]])]),(0,i.Lk)("div",ke,[(0,i.bo)((0,i.Lk)("input",{class:"form-control",type:"text",id:"facebook","onUpdate:modelValue":a[11]||(a[11]=o=>n.negocio.facebook=o),placeholder:"Usuario de Facebook (por ej. puestito.online)"},null,512),[[r.Jo,n.negocio.facebook]])]),(0,i.Lk)("div",he,[ve,(0,i.Lk)("input",{class:"form-control",type:"file",name:"imagen",id:"imagen",accept:"image/jpeg, image/png",onChange:a[12]||(a[12]=o=>c.imagenSeleccionada(o))},null,32)]),(0,i.Lk)("div",fe,[Le,(0,i.Lk)("input",{class:"form-control",type:"file",name:"portada",id:"portada",accept:"image/jpeg, image/png",onChange:a[13]||(a[13]=o=>c.portadaSeleccionada(o))},null,32)]),Ce,n.plan?((0,i.uX)(),(0,i.CE)("button",{key:1,disabled:!n.usuarioDisponible,class:"btn btn-menu botones m-auto mt-2 mb-2",type:"submit"}," Ir a Pagar ",8,xe)):((0,i.uX)(),(0,i.CE)("button",{key:0,disabled:!n.usuarioDisponible,class:"btn btn-menu botones m-auto mt-2 mb-2",type:"submit"}," Registrar ",8,ye))])],32)]))])),(0,i.bo)((0,i.Lk)("div",Pe,[(0,i.Lk)("div",Ee,[(0,i.Lk)("div",Se,[(0,i.Lk)("div",Me,[(0,i.Lk)("div",Ie,[_e,(0,i.Lk)("button",{type:"button",class:"btn-close",onClick:a[16]||(a[16]=(...o)=>c.cerrarCrop&&c.cerrarCrop(...o)),"aria-label":"Close"})]),(0,i.Lk)("div",Ae,[(0,i.bo)((0,i.Lk)("div",Te,qe,512),[[r.aG,n.cargandoCropper]]),(0,i.Lk)("img",Xe,null,512)]),(0,i.Lk)("div",Fe,[(0,i.Lk)("button",{type:"button",class:"btn",onClick:a[17]||(a[17]=(...o)=>c.cerrarCrop&&c.cerrarCrop(...o))},"Cerrar"),(0,i.Lk)("button",{class:"btn btn-menu",onClick:a[18]||(a[18]=(...o)=>c.guardarImagenRecortada&&c.guardarImagenRecortada(...o))},"Recortar")])])])])],512),[[r.aG,n.modalCropImage]]),(0,i.bo)((0,i.Lk)("div",Ue,[(0,i.Lk)("div",Re,[(0,i.Lk)("div",Ve,[(0,i.Lk)("div",De,[(0,i.Lk)("div",ze,[Qe,(0,i.Lk)("button",{type:"button",class:"btn-close",onClick:a[19]||(a[19]=(...o)=>c.cerrarCropPortada&&c.cerrarCropPortada(...o)),"aria-label":"Close"})]),(0,i.Lk)("div",We,[(0,i.bo)((0,i.Lk)("div",$e,Be,512),[[r.aG,n.cargandoCropperPortada]]),(0,i.Lk)("img",Oe,null,512)]),(0,i.Lk)("div",Je,[(0,i.Lk)("button",{type:"button",class:"btn",onClick:a[20]||(a[20]=(...o)=>c.cerrarCropPortada&&c.cerrarCropPortada(...o))},"Cerrar"),(0,i.Lk)("button",{class:"btn btn-menu",onClick:a[21]||(a[21]=(...o)=>c.guardarPortadaRecortada&&c.guardarPortadaRecortada(...o))},"Recortar")])])])])],512),[[r.aG,n.modalCropPortada]])])}const He=o=>((0,i.Qi)("data-v-e20a7162"),o=o(),(0,i.jt)(),o),Ke={class:"navbar navbar-dark bg-dark"},Ye=He((()=>(0,i.Lk)("img",{src:"/favicon.ico",width:"30",height:"30",class:"d-inline-block align-top",alt:""},null,-1)));function Ze(o,a,e,t,r,n){const c=(0,i.g2)("router-link");return(0,i.uX)(),(0,i.CE)("nav",Ke,[(0,i.bF)(c,{class:"navbar-brand",to:"/"},{default:(0,i.k6)((()=>[Ye,(0,i.eW)(" Puestito Online ")])),_:1}),r.usuario?((0,i.uX)(),(0,i.Wv)(c,{key:0,to:"/u/home"},{default:(0,i.k6)((()=>[(0,i.eW)("Mi Negocio")])),_:1})):((0,i.uX)(),(0,i.Wv)(c,{key:1,to:"/u/login"},{default:(0,i.k6)((()=>[(0,i.eW)("Login")])),_:1}))])}var ot={data(){return{usuario:""}},mounted(){this.obtenerUsuario()},methods:{obtenerUsuario(){this.usuario=localStorage.getItem("usuario")}}};const at=(0,m.A)(ot,[["render",Ze],["__scopeId","data-v-e20a7162"]]);var et=at,tt=e(3534),rt={components:{NavbarAdminComponent:bo,NavbarPublicoComponent:et},data(){return{cargandoRegistro:!1,cargandoCropper:!0,cargandoCropperPortada:!0,modalCropImage:!1,modalCropPortada:!1,cropper:null,cropperPortada:null,imageToCrop:"",usuarioDisponible:!0,cargandoPago:!1,esperandoPago:!0,plan:null,ref:null,usuario:"",negocio:{usuario:"","contraseña":"",nombre:"",fechaVence:"",email:"",imagen:"",portada:"",direccion:"",telefono:"",descripcion:"",instagram:"",facebook:"",rubro:"Elegí tu rubro"}}},mounted(){this.obtenerPlan()},methods:{restrictInput(o){const a=o.target.value,e=/[\s!@#$%^&*()_+=[\]{};':"\\|,<>?`´¨~¡/°¬¿]/g;e.test(a)&&(this.negocio.usuario=this.negocio.usuario.substring(0,this.negocio.usuario.length-1))},obtenerPlan(){const o=!!localStorage.getItem("token");this.plan=localStorage.getItem("plan"),console.log(this.plan),o&&(this.plan?(this.usuario=localStorage.getItem("usuario"),this.registrarNegocio()):this.$router.push("/u/home"))},portadaSeleccionada(o){try{const a=o.target.files[0];if(a){const o=new FileReader;o.onload=async o=>{this.imageToCrop=o.target.result,this.modalCropPortada=!0,window.scrollTo({top:0,behavior:"smooth"});let a=this.$refs.cropperPortada;a.src=this.imageToCrop,this.$nextTick((()=>{const o=document.querySelector("cropper-canvas");o&&o.parentNode.removeChild(o),this.cropperPortada=new tt.Ay(a,{template:"<cropper-canvas background style='height:50vh;'>\n                                    <cropper-image  initial-center-size='contain' alt='Crop' scalable=true translatable></cropper-image>\n                                        <cropper-shade hidden></cropper-shade>\n                                        <cropper-handle  action='move' plain></cropper-handle>\n                                        <cropper-selection initial-coverage='0.5' aspect-ratio='0.75'  movable resizable>\n                                            <cropper-grid role='grid' covered></cropper-grid>\n                                            <cropper-crosshair centered></cropper-crosshair>\n                                            <cropper-handle action='move'\n                                                theme-color='rgba(255, 255, 255, 0.35)'></cropper-handle>\n                                            <cropper-handle action='ne-resize'></cropper-handle>\n                                            <cropper-handle action='nw-resize'></cropper-handle>\n                                            <cropper-handle action='se-resize'></cropper-handle>\n                                            <cropper-handle action='sw-resize'></cropper-handle>\n                                        </cropper-selection>\n                                    </cropper-canvas >"})}))},o.readAsDataURL(a)}}catch(a){console.log(a)}finally{this.cargandoCropperPortada=!1}},async guardarPortadaRecortada(){try{const o=await this.cropperPortada.getCropperSelection().$toCanvas();this.negocioModificar.portada=o.toDataURL()}catch(o){console.error("Error al guardar la imagen recortada:",o)}finally{this.modalCropPortada=!1}},imagenSeleccionada(o){try{const a=o.target.files[0];if(a){const o=new FileReader;o.onload=async o=>{this.imageToCrop=o.target.result,this.modalCropImage=!0,window.scrollTo({top:0,behavior:"smooth"});let a=this.$refs.cropperImg;a.src=this.imageToCrop,this.$nextTick((()=>{const o=document.querySelector("cropper-canvas");o&&o.parentNode.removeChild(o),this.cropper=new tt.Ay(a,{template:"<cropper-canvas background style='height:50vh;'>\n                                    <cropper-image  initial-center-size='contain' alt='Crop' scalable=true translatable></cropper-image>\n                                        <cropper-shade hidden></cropper-shade>\n                                        <cropper-handle  action='move' plain></cropper-handle>\n                                        <cropper-selection initial-coverage='0.5' aspect-ratio='1'  movable resizable>\n                                            <cropper-grid role='grid' covered></cropper-grid>\n                                            <cropper-crosshair centered></cropper-crosshair>\n                                            <cropper-handle action='move'\n                                                theme-color='rgba(255, 255, 255, 0.35)'></cropper-handle>\n                                            <cropper-handle action='ne-resize'></cropper-handle>\n                                            <cropper-handle action='nw-resize'></cropper-handle>\n                                            <cropper-handle action='se-resize'></cropper-handle>\n                                            <cropper-handle action='sw-resize'></cropper-handle>\n                                        </cropper-selection>\n                                    </cropper-canvas >"})}))},o.readAsDataURL(a)}}catch(a){console.log(a)}finally{this.cargandoCropper=!1}},cerrarCrop(){this.modalCropImage=!1},cerrarCropPortada(){this.modalCropPortada=!1},async guardarImagenRecortada(){try{const o=await this.cropper.getCropperSelection().$toCanvas();this.negocio.imagen=o.toDataURL()}catch(o){console.error("Error al guardar la imagen recortada:",o)}finally{this.modalCropImage=!1}},async verificarDisponibilidad(){try{const o=await t.A.post("/verificar-usuario",{usuario:this.negocio.usuario});this.usuarioDisponible=o.data,this.usuarioDisponible||ho().fire({icon:"error",text:"Ese usuario ya existe. Por favor elegí otro."})}catch(o){console.error(o)}},verificarRubro(){return"Elegí tu rubro"!=this.negocio.rubro||(ho().fire({icon:"error",text:"Por favor selecciona un rubro."}),!1)},async registrarNegocio(){this.cargandoRegistro=!0,this.plan?(this.cargandoPago=!0,this.usuario?this.mejorarPlan():this.verificarRubro()&&(this.verificarDisponibilidad(),this.usuarioDisponible&&(this.usuario=this.negocio.usuario,this.contratarPlan()))):this.verificarRubro()&&(this.verificarDisponibilidad(),this.usuarioDisponible&&(this.usuario=this.negocio.usuario,this.registrarGratis()))},async verificarPago(){let o;while(this.esperandoPago){await new Promise((o=>setTimeout(o,5e3)));const a=await t.A.post("/facturar/verificarPago",{ref:this.ref});if(o=a.data,"approved"===o)break}return o},async mejorarPlan(){const o=await t.A.post("/facturar/crearOrden",{plan:this.plan,usuario:this.usuario});try{const a=window.open("","_blank"),e=await o.data.response.init_point;if(!a)throw new Error("No se pudo abrir la ventana emergente.");a.location.href=e,this.ref=JSON.parse(o.data.response.external_reference);const t=await this.verificarPago();"approved"===t?(this.registrarMejora(),this.cargandoPago=!1):(this.cargandoPago=!1,ho().fire({icon:"error",text:"No se pudo verificar el pago."}))}catch(a){this.cargandoPago=!1,ho().fire({icon:"error",text:"Por favor habilita las ventanas emergentes para ir a MercadoPago."+(a.response?.data?.message||a.message)})}},async contratarPlan(){try{const a=await t.A.post("/facturar/crearOrden",{plan:this.plan,usuario:this.usuario});try{let o=new Date;const e=o.getMonth();o.setMonth(Number(e)+Number(this.plan)),this.negocio.fechaVence=o.toISOString().slice(0,19).replace("T"," ");const t=window.open("","_blank"),r=await a.data.response.init_point;if(!t)throw new Error("No se pudo abrir la ventana emergente.");t.location.href=r,this.ref=JSON.parse(a.data.response.external_reference);const i=await this.verificarPago();"approved"===i?(this.registrar(),this.cargandoPago=!1):(this.cargandoPago=!1,ho().fire({icon:"error",text:"No se pudo verificar el pago."}))}catch(o){ho().fire({icon:"error",text:"Por favor habilita las ventanas emergentes para ir a MercadoPago."+o.response.data.message})}}catch(o){console.log(o)}},async registrarMejora(){let o=new Date;const a=o.getMonth();o.setMonth(Number(a)+Number(this.plan));const e=o.getFullYear();o=o.toISOString().slice(0,19).replace("T"," ");try{t.A.put("/facturar/acreditar",{usuario:this.usuario,fecha:o}),this.cargandoPago=!1,localStorage.setItem("año",e),$g.push("/u/login");const a=ho().mixin({toast:!0,position:"bottom-end",showConfirmButton:!1,timer:5e3,timerProgressBar:!0,didOpen:o=>{o.addEventListener("mouseenter",ho().stopTimer),o.addEventListener("mouseleave",ho().resumeTimer)}});a.fire({icon:"success",title:"Pago exitoso."})}catch(r){console.log(r)}},async registrarGratis(){let o=new Date;o.setMonth(o.getMonth()+1),this.negocio.fechaVence=o.toISOString().slice(0,19).replace("T"," "),this.registrar()},async registrar(){await t.A.post("/register",this.negocio).then((()=>{$g.push("/u/login");const o=ho().mixin({toast:!0,position:"bottom-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:o=>{o.addEventListener("mouseenter",ho().stopTimer),o.addEventListener("mouseleave",ho().resumeTimer)}});o.fire({icon:"success",title:"Registro exitoso."})})).catch((o=>{ho().fire({icon:"error",text:o.response.data.message}),console.error("Error al registrar usuario:",o)})).finally((()=>{this.cargandoRegistro=!1}))}}};const it=(0,m.A)(rt,[["render",Ge],["__scopeId","data-v-cf60cc3c"]]);var nt=it;const ct=o=>((0,i.Qi)("data-v-2d9d7786"),o=o(),(0,i.jt)(),o),st={key:0,class:"pantalla-carga text-center"},lt=ct((()=>(0,i.Lk)("div",{class:"logo-carga"},[(0,i.Lk)("img",{class:"logo-img",src:"/favicon.ico",width:"50",alt:""}),(0,i.Lk)("div",{class:"texto-carga"}," Cargando negocios ")],-1))),dt=[lt],ut={class:"container mt-4 mb-2"},pt=ct((()=>(0,i.Lk)("h1",null,"Negocios",-1))),mt={class:"izquierda ancho-busqueda"},gt={key:0},bt=["src"],kt={class:"item-texto-block m-2"},ht={key:0,class:"item-descripcion"},vt=ct((()=>(0,i.Lk)("b",null,"Nombre de usuario:",-1))),ft={class:"item-descripcion"},Lt=ct((()=>(0,i.Lk)("b",null,"Nombre del negocio:",-1))),Ct={key:1,class:"item-descripcion"},yt=ct((()=>(0,i.Lk)("b",null,"Descripción:",-1))),xt={key:2,class:"item-descripcion"},wt=ct((()=>(0,i.Lk)("b",null,"Fecha de Vencimiento:",-1))),Pt=["onClick"],Et=["onClick"],St={class:"item-texto-block-end"},Mt=["href"],It=ct((()=>(0,i.Lk)("img",{width:"40",src:"/recursos/instagram.png"},null,-1))),_t=[It],At={key:1},Tt=["href"],Nt=ct((()=>(0,i.Lk)("img",{width:"36",src:"/recursos/facebook.png"},null,-1))),qt=[Nt],Xt={key:3},Ft={class:"item-btn"},Ut=ct((()=>(0,i.Lk)("img",{src:"/favicon.ico",width:"30",alt:""},null,-1))),Rt={class:"modal fade",id:"modificarProducto",tabindex:"-1","aria-labelledby":"modificarProductoLabel","aria-hidden":"true",ref:"modalModificar"},Vt={class:"modal-dialog modal-dialog-centered"},Dt={class:"modal-content"},zt=ct((()=>(0,i.Lk)("div",{class:"modal-header"},[(0,i.Lk)("h1",{class:"modal-title fs-5",id:"modificarProductoLabel"},"Modificar Datos"),(0,i.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1))),Qt={class:"modal-body"},Wt={class:"row g-3 div-forms border"},$t=ct((()=>(0,i.Lk)("h4",{class:"titulo-div-forms mb-2"},"Información del Usuario",-1))),jt=ct((()=>(0,i.Lk)("h4",{class:"titulo-div-forms mb-2"},"Información del Negocio",-1))),Bt=ct((()=>(0,i.Lk)("label",{class:"form-label",for:"rubro"},"Rubro",-1))),Ot=(0,i.Fv)('<option value="Elegí tu rubro" selected disabled data-v-2d9d7786>Elegí tu rubro</option><option value="Artesanías" data-v-2d9d7786>Artesanías</option><option value="Bar/Restaurante" data-v-2d9d7786>Bar/Restaurante</option><option value="Carnicería" data-v-2d9d7786>Carnicería</option><option value="Consultorio" data-v-2d9d7786>Consultorio</option><option value="Estética" data-v-2d9d7786>Estética</option><option value="Farmacia" data-v-2d9d7786>Farmacia</option><option value="Ferretería" data-v-2d9d7786>Ferretería</option><option value="Fiambrería" data-v-2d9d7786>Fiambrería</option><option value="Florería" data-v-2d9d7786>Florería</option><option value="Heladería" data-v-2d9d7786>Heladería</option><option value="Indumentaria" data-v-2d9d7786>Indumentaria</option><option value="Inmobiliaria" data-v-2d9d7786>Inmobiliaria</option><option value="Juguetería" data-v-2d9d7786>Juguetería</option><option value="Librería" data-v-2d9d7786>Librería</option><option value="Limpieza" data-v-2d9d7786>Limpieza</option><option value="Panadería" data-v-2d9d7786>Panadería</option><option value="Peluquería" data-v-2d9d7786>Peluquería</option><option value="Polirubro" data-v-2d9d7786>Polirubro</option><option value="Pollería" data-v-2d9d7786>Pollería</option><option value="Repostería" data-v-2d9d7786>Repostería</option><option value="Rotisería" data-v-2d9d7786>Rotisería</option><option value="Reparación/mantenimiento" data-v-2d9d7786>Reparación/mantenimiento </option><option value="Servicios" data-v-2d9d7786>Servicios</option><option value="Supermercado" data-v-2d9d7786>Supermercado</option><option value="Tecnología" data-v-2d9d7786>Tecnología</option><option value="Verdulería" data-v-2d9d7786>Verdulería</option><option value="Veterinaria/Forrajería" data-v-2d9d7786>Veterinaria/Forrajería</option>',28),Jt=[Ot],Gt=ct((()=>(0,i.Lk)("label",{class:"form-label mr-2",for:"imagen"},"Imagen (JPG/PNG)",-1))),Ht=ct((()=>(0,i.Lk)("div",{class:"text-end"},[(0,i.Lk)("button",{class:"btn btn-menu botones mt-3",type:"submit","aria-label":"Close"},"Modificar")],-1)));function Kt(o,a,e,t,n,c){const l=(0,i.g2)("NavbarAdminComponent"),d=(0,i.g2)("router-link");return(0,i.uX)(),(0,i.CE)("div",null,[(0,i.bF)(l),n.cargando?((0,i.uX)(),(0,i.CE)("div",st,dt)):(0,i.Q3)("",!0),(0,i.Lk)("div",ut,[pt,(0,i.Lk)("div",mt,[(0,i.bo)((0,i.Lk)("input",{class:"form-control barra-busqueda","onUpdate:modelValue":a[0]||(a[0]=o=>n.busqueda=o),type:"text",name:"busqueda",id:"",placeholder:"Buscar",title:"Ingrese una palabra clave..."},null,512),[[r.Jo,n.busqueda]])]),(0,i.Lk)("ul",null,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(c.negociosFiltrados,((o,a)=>((0,i.uX)(),(0,i.CE)("li",{class:"item-container mt-2",key:a},[o.imagen?((0,i.uX)(),(0,i.CE)("div",gt,[(0,i.Lk)("img",{class:"imagen",src:o.imagen,alt:" "},null,8,bt)])):(0,i.Q3)("",!0),(0,i.Lk)("div",kt,[o.usuario?((0,i.uX)(),(0,i.CE)("div",ht,[vt,(0,i.eW)(' "'+(0,s.v_)(o.usuario)+'" ',1)])):(0,i.Q3)("",!0),(0,i.Lk)("div",ft,[Lt,(0,i.eW)(" "+(0,s.v_)(o.nombre),1)]),o.descripcion?((0,i.uX)(),(0,i.CE)("div",Ct,[yt,(0,i.eW)(' "'+(0,s.v_)(o.descripcion)+'" ',1)])):(0,i.Q3)("",!0),o.fechaVence?((0,i.uX)(),(0,i.CE)("div",xt,[wt,(0,i.eW)(' "'+(0,s.v_)(c.formatear(o.fechaVence))+'" ',1)])):(0,i.Q3)("",!0),(0,i.Lk)("button",{class:"btn btn-menu derecha mt-2 mb-2",title:"Modificar","data-bs-toggle":"modal","data-bs-target":"#modificarProducto",onClick:a=>c.modificarNegocio(o)},"Modificar",8,Pt),(0,i.Lk)("button",{class:"btn btn-menu-danger derecha m-2",onClick:a=>c.eliminarNegocio(o.usuario)},"Eliminar",8,Et)]),(0,i.Lk)("div",St,[o.instagram?((0,i.uX)(),(0,i.CE)("a",{key:0,class:"m-2",href:"https://instagram.com/"+o.instagram,target:"blank"},_t,8,Mt)):((0,i.uX)(),(0,i.CE)("div",At,"Sin Instagram")),o.facebook?((0,i.uX)(),(0,i.CE)("a",{key:2,class:"m-2",href:"https://facebook.com/"+o.facebook,target:"blank"},qt,8,Tt)):((0,i.uX)(),(0,i.CE)("div",Xt,"Sin Facebook"))]),(0,i.Lk)("div",Ft,[(0,i.bF)(d,{class:"item-texto-block-end",to:"/"+o.usuario},{default:(0,i.k6)((()=>[Ut])),_:2},1032,["to"])])])))),128))])]),(0,i.Lk)("div",Rt,[(0,i.Lk)("div",Vt,[(0,i.Lk)("div",Dt,[zt,(0,i.Lk)("div",Qt,[(0,i.Lk)("form",{onSubmit:a[13]||(a[13]=(0,r.D$)((o=>c.modificarPerfil(n.negocioModificar)),["prevent"]))},[(0,i.Lk)("div",Wt,[$t,(0,i.Lk)("div",null,[(0,i.bo)((0,i.Lk)("input",{class:"form-control",type:"text",id:"nombre","onUpdate:modelValue":a[1]||(a[1]=o=>n.negocioModificar.usuario=o),placeholder:"Nombre de Usuario",disabled:""},null,512),[[r.Jo,n.negocioModificar.usuario]])]),(0,i.Lk)("div",null,[(0,i.bo)((0,i.Lk)("input",{class:"form-control",type:"password",id:"nombre","onUpdate:modelValue":a[2]||(a[2]=o=>n.negocioModificar.contraseña=o),placeholder:"Contraseña"},null,512),[[r.Jo,n.negocioModificar.contraseña]])]),jt,(0,i.Lk)("div",null,[(0,i.bo)((0,i.Lk)("input",{class:"form-control",type:"text",id:"nombre","onUpdate:modelValue":a[3]||(a[3]=o=>n.negocioModificar.nombre=o),placeholder:"Nombre del Negocio",required:""},null,512),[[r.Jo,n.negocioModificar.nombre]])]),(0,i.Lk)("div",null,[(0,i.bo)((0,i.Lk)("input",{class:"form-control",type:"email",id:"correo","onUpdate:modelValue":a[4]||(a[4]=o=>n.negocioModificar.correo=o),placeholder:"Correo"},null,512),[[r.Jo,n.negocioModificar.correo]])]),(0,i.Lk)("div",null,[(0,i.bo)((0,i.Lk)("input",{class:"form-control",type:"number",id:"telefono","onUpdate:modelValue":a[5]||(a[5]=o=>n.negocioModificar.telefono=o),placeholder:"Teléfono"},null,512),[[r.Jo,n.negocioModificar.telefono]])]),(0,i.Lk)("div",null,[(0,i.bo)((0,i.Lk)("input",{class:"form-control",type:"text",id:"direccion","onUpdate:modelValue":a[6]||(a[6]=o=>n.negocioModificar.direccion=o),placeholder:"Dirección",required:""},null,512),[[r.Jo,n.negocioModificar.direccion]])]),(0,i.Lk)("div",null,[(0,i.bo)((0,i.Lk)("input",{class:"form-control",type:"text",id:"descripcion","onUpdate:modelValue":a[7]||(a[7]=o=>n.negocioModificar.descripcion=o),placeholder:"Descripción"},null,512),[[r.Jo,n.negocioModificar.descripcion]])]),(0,i.Lk)("div",null,[Bt,(0,i.bo)((0,i.Lk)("select",{class:"form-select",name:"rubro",id:"rubro","onUpdate:modelValue":a[8]||(a[8]=o=>n.negocioModificar.rubro=o)},Jt,512),[[r.u1,n.negocioModificar.rubro]])]),(0,i.Lk)("div",null,[(0,i.bo)((0,i.Lk)("input",{class:"form-control",type:"date",id:"fechaVence","onUpdate:modelValue":a[9]||(a[9]=o=>n.negocioModificar.fechaVence=o),placeholder:"Fecha de Vencimiento"},null,512),[[r.Jo,n.negocioModificar.fechaVence]])]),(0,i.Lk)("div",null,[(0,i.bo)((0,i.Lk)("input",{class:"form-control",type:"text",id:"instagram","onUpdate:modelValue":a[10]||(a[10]=o=>n.negocioModificar.instagram=o),placeholder:"Instagram"},null,512),[[r.Jo,n.negocioModificar.instagram]])]),(0,i.Lk)("div",null,[(0,i.bo)((0,i.Lk)("input",{class:"form-control",type:"text",id:"facebook","onUpdate:modelValue":a[11]||(a[11]=o=>n.negocioModificar.facebook=o),placeholder:"Facebook"},null,512),[[r.Jo,n.negocioModificar.facebook]])]),(0,i.Lk)("div",null,[Gt,(0,i.Lk)("input",{class:"form-control",type:"file",name:"imagen",id:"imagen",accept:"image/jpeg, image/png",onChange:a[12]||(a[12]=(...a)=>o.imagenSeleccionada&&o.imagenSeleccionada(...a))},null,32)])]),Ht],32)])])])],512)])}var Yt=e(5768),Zt={components:{NavbarAdminComponent:bo},data(){return{cargando:!0,negocios:[],busqueda:"",negocioModificar:{usuario:"","contraseña":"",nombre:"",descripcion:"",correo:"",direccion:"",rubro:"",telefono:"",instagram:"",facebook:"",imagen:"",portada:"",fechaVence:""}}},mounted(){this.fetchNegocios()},methods:{eliminarNegocio(o){ho().fire({icon:"info",title:"<strong>¿Estas segur@?</strong>",html:"",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonText:"No, cancelar",confirmButtonText:"Sí, eliminar!"}).then((a=>{a.isConfirmed&&t.A.delete("/eliminarNegocio",{data:{usuario:o}}).then((()=>{const o=ho().mixin({toast:!0,position:"bottom-end",showConfirmButton:!1,timer:1e3,timerProgressBar:!0,didOpen:o=>{o.addEventListener("mouseenter",ho().stopTimer),o.addEventListener("mouseleave",ho().resumeTimer)}});o.fire({icon:"success",title:"Negocio eliminado."}),setTimeout((function(){location.reload()}),1e3)})).catch((o=>{console.log("error"),console.error("Error al eliminar:",o)}))}))},modificarPerfil(o){o.fechaVence=new Date(o.fechaVence).toISOString().slice(0,19).replace("T"," "),t.A.put("/modificarPerfilAdmin",{negocio:o}).then((()=>{const o=ho().mixin({toast:!0,position:"bottom-end",showConfirmButton:!1,timer:1e3,timerProgressBar:!0,didOpen:o=>{o.addEventListener("mouseenter",ho().stopTimer),o.addEventListener("mouseleave",ho().resumeTimer)}});o.fire({icon:"success",title:"Datos modificados."}),setTimeout((function(){location.reload()}),1e3)})).catch((o=>{console.log("error"),console.error("Error al actualizar la información en la base de datos:",o)}))},modificarNegocio(o){this.negocioModificar.usuario=o.usuario,this.negocioModificar.contraseña=o.contraseña,this.negocioModificar.nombre=o.nombre,this.negocioModificar.descripcion=o.descripcion,this.negocioModificar.correo=o.correo,this.negocioModificar.direccion=o.direccion,this.negocioModificar.telefono=o.telefono,this.negocioModificar.instagram=o.instagram,this.negocioModificar.facebook=o.facebook,this.negocioModificar.rubro=o.rubro,this.negocioModificar.imagen=o.imagen,this.negocioModificar.fechaVence=(0,Yt.GP)(new Date(o.fechaVence),"yyyy-MM-dd"),console.log(this.negocioModificar)},formatear(o){return(0,Yt.GP)(new Date(o),"dd/MM/yyyy")},async fetchNegocios(){try{const o=await t.A.get("/listarNegocios");this.negocios=o.data}catch(o){console.error("Error al obtener los datos de los negocios:",o)}finally{this.cargando=!1,console.log(this.negocios)}}},computed:{negociosFiltrados(){return this.negocios.filter((o=>{const a=o.nombre||"",e=o.descripcion||"";return a.toLowerCase().includes(this.busqueda.toLowerCase())||e.toLowerCase().includes(this.busqueda.toLowerCase())}))}}};const or=(0,m.A)(Zt,[["render",Kt],["__scopeId","data-v-2d9d7786"]]);var ar=or;const er=o=>((0,i.Qi)("data-v-7a491b98"),o=o(),(0,i.jt)(),o),tr={class:"container pt-4 mb-2"},rr=er((()=>(0,i.Lk)("h1",{class:"text-center"},"Cargar Producto",-1))),ir={class:"row g-3 div-forms mt-2"},nr={class:"flex"},cr=er((()=>(0,i.Lk)("h4",{class:"titulo-div-forms mb-2"},"Información del Producto",-1))),sr=er((()=>(0,i.Lk)("img",{src:"/recursos/undo.png",width:"40",alt:""},null,-1))),lr={class:"col-md-6"},dr={class:"col-md-12 mt-3"},ur={class:"col-md-6"},pr=er((()=>(0,i.Lk)("option",{selected:"",disabled:""},"Categoría",-1))),mr=["value"],gr={class:"col-md-6 izq"},br={class:"col-md-6 text-center"},kr=er((()=>(0,i.Lk)("i",{class:"small"},'Si el precio es menor a 0, se publicará como "consultar precio"',-1))),hr={class:"col-md-6"},vr={class:"col-md-6"},fr=er((()=>(0,i.Lk)("label",{class:"form-label mr-2",for:"imagen"},"Imagen (JPG/PNG)",-1))),Lr=["disabled"],Cr={class:"modalCategoriaContainer text-center"},yr={class:"modalCategoria"},xr={class:"modal-dialog modal-dialog-centered"},wr={class:"modal-content"},Pr={class:"modal-header pl-2"},Er=er((()=>(0,i.Lk)("h1",{class:"modal-title fs-5",id:"agregarCategoriaLabel"},"Recortar Imagen",-1))),Sr={class:"modal-body mt-2"},Mr={class:"pantalla-cargas text-center"},Ir=er((()=>(0,i.Lk)("div",{class:"logo-carga"},[(0,i.Lk)("img",{class:"logo-img",src:"/favicon.ico",width:"50",alt:""}),(0,i.Lk)("div",{class:"texto-carga"}," Cargando imagen ")],-1))),_r=[Ir],Ar={ref:"cropperImg",alt:"Croppear"},Tr={class:"modal-footer mt-2"},Nr={key:0,class:"modalCategoriaContainer"},qr={class:"modalCategoria"},Xr={class:"modal-dialog modal-dialog-centered"},Fr={class:"modal-content"},Ur={class:"modal-header pl-2"},Rr=er((()=>(0,i.Lk)("h1",{class:"modal-title fs-5",id:"agregarCategoriaLabel"},"Nueva Categoría",-1))),Vr={class:"modal-body mt-2"},Dr={class:"modal-footer mt-2"},zr=["disabled"],Qr={class:"modal fade",id:"importar",tabindex:"-1","aria-labelledby":"importarLabel","aria-hidden":"true"},Wr={class:"modal-dialog modal-dialog-centered"},$r={class:"modal-content"},jr=er((()=>(0,i.Lk)("div",{class:"modal-header"},[(0,i.Lk)("h1",{class:"modal-title fs-5",id:"importarLabel"},"Importar desde Excel"),(0,i.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1))),Br={class:"modal-body text-center"},Or=er((()=>(0,i.Lk)("p",{class:"text-center"},[(0,i.eW)("Asegurate de que en tu planilla de Excel existan las columnas con encabezados "),(0,i.Lk)("strong",null,'"Producto"'),(0,i.eW)(", en donde se encontrará el nombre del producto, y "),(0,i.Lk)("strong",null,'"Precio"'),(0,i.eW)(", en donde se encontrará el precio del producto. "),(0,i.Lk)("u",null,"(Se ignorará el resto de columnas)"),(0,i.eW)(". Más adelante podrás modificar la información de los mismos en la pestaña "),(0,i.Lk)("strong",null,'"Listar Productos"'),(0,i.eW)(". ")],-1))),Jr=er((()=>(0,i.Lk)("img",{class:"m-auto",src:"/recursos/ejemplo-xlsx.png",width:"100%",alt:""},null,-1))),Gr=er((()=>(0,i.Lk)("div",{class:"modal-footer"},[(0,i.Lk)("button",{type:"button",class:"btn","data-bs-dismiss":"modal"},"Cerrar"),(0,i.Lk)("button",{class:"btn btn-menu",type:"submit"},"Importar")],-1))),Hr=er((()=>(0,i.Lk)("div",{class:"text-end margen-bot"},[(0,i.Lk)("i",null," o importar listado desde Excel ->"),(0,i.Lk)("button",{type:"button",class:"btn btn-importar","data-bs-toggle":"modal","data-bs-target":"#importar"},[(0,i.Lk)("img",{src:"/recursos/xlsx.png",width:"50",alt:"",title:"Importar desde Excel"})])],-1)));function Kr(o,a,e,t,n,c){const l=(0,i.g2)("NavbarComponent"),d=(0,i.g2)("router-link");return(0,i.uX)(),(0,i.CE)("div",null,[(0,i.bF)(l),(0,i.Lk)("div",tr,[rr,(0,i.Lk)("form",{onSubmit:a[7]||(a[7]=(0,r.D$)((o=>c.nuevoProducto(this.producto)),["prevent"])),enctype:"multipart/form-data"},[(0,i.Lk)("div",ir,[(0,i.Lk)("div",nr,[cr,(0,i.bF)(d,{class:"btn-back",to:"/u/productos"},{default:(0,i.k6)((()=>[sr])),_:1})]),(0,i.Lk)("div",lr,[(0,i.bo)((0,i.Lk)("input",{class:"form-control",type:"text",id:"nombre","onUpdate:modelValue":a[0]||(a[0]=o=>n.producto.nombre=o),placeholder:"Nombre del Producto",required:""},null,512),[[r.Jo,n.producto.nombre]])]),(0,i.Lk)("div",dr,[(0,i.bo)((0,i.Lk)("textarea",{class:"form-control",type:"text",id:"descripcion","onUpdate:modelValue":a[1]||(a[1]=o=>n.producto.descripcion=o),placeholder:"Descripción"},null,512),[[r.Jo,n.producto.descripcion]])]),(0,i.Lk)("div",ur,[(0,i.bo)((0,i.Lk)("select",{class:"form-select","onUpdate:modelValue":a[2]||(a[2]=o=>n.producto.categoria=o),id:"",required:""},[pr,((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(n.categorias,(o=>((0,i.uX)(),(0,i.CE)("option",{key:o.id,value:o.categoria_nombre},(0,s.v_)(o.categoria_nombre),9,mr)))),128))],512),[[r.u1,n.producto.categoria]])]),(0,i.Lk)("div",gr,[(0,i.Lk)("button",{type:"button",class:"btn btn-agregar",onClick:a[3]||(a[3]=(...o)=>c.agregarCategoriaModal&&c.agregarCategoriaModal(...o))}," Agregar Categoría ")]),(0,i.Lk)("div",br,[(0,i.bo)((0,i.Lk)("input",{class:"form-control",type:"number",id:"precio","onUpdate:modelValue":a[4]||(a[4]=o=>n.producto.precio=o),placeholder:"Precio"},null,512),[[r.Jo,n.producto.precio]]),kr]),(0,i.Lk)("div",hr,[(0,i.bo)((0,i.Lk)("input",{class:"form-control",type:"number",id:"stock","onUpdate:modelValue":a[5]||(a[5]=o=>n.producto.stock=o),placeholder:"Stock (opcional)"},null,512),[[r.Jo,n.producto.stock]])]),(0,i.Lk)("div",vr,[fr,(0,i.Lk)("input",{class:"form-control mb-3",type:"file",name:"imagen",id:"imagen",accept:"image/jpeg, image/png",onChange:a[6]||(a[6]=o=>c.imagenSeleccionada(o))},null,32)])]),(0,i.Lk)("div",null,[(0,i.Lk)("button",{class:"btn btn-menu botones mt-3",disabled:!n.botonAgregarProductoEnabled,type:"submit"},"Agregar",8,Lr)])],32),(0,i.bo)((0,i.Lk)("div",Cr,[(0,i.Lk)("div",yr,[(0,i.Lk)("div",xr,[(0,i.Lk)("div",wr,[(0,i.Lk)("div",Pr,[Er,(0,i.Lk)("button",{type:"button",class:"btn-close",onClick:a[8]||(a[8]=(...o)=>c.cerrarCrop&&c.cerrarCrop(...o)),"aria-label":"Close"})]),(0,i.Lk)("div",Sr,[(0,i.bo)((0,i.Lk)("div",Mr,_r,512),[[r.aG,n.cargandoCropper]]),(0,i.Lk)("img",Ar,null,512)]),(0,i.Lk)("div",Tr,[(0,i.Lk)("button",{type:"button",class:"btn",onClick:a[9]||(a[9]=(...o)=>c.cerrarCrop&&c.cerrarCrop(...o))},"Cerrar"),(0,i.Lk)("button",{class:"btn btn-menu",onClick:a[10]||(a[10]=(...o)=>c.guardarImagenRecortada&&c.guardarImagenRecortada(...o))},"Recortar")])])])])],512),[[r.aG,n.modalCropImage]]),n.agregarCategoriaModalAbierto?((0,i.uX)(),(0,i.CE)("div",Nr,[(0,i.Lk)("div",qr,[(0,i.Lk)("div",Xr,[(0,i.Lk)("div",Fr,[(0,i.Lk)("div",Ur,[Rr,(0,i.Lk)("button",{type:"button",class:"btn-close",onClick:a[11]||(a[11]=(...o)=>c.cerrarCategoriaModal&&c.cerrarCategoriaModal(...o)),"aria-label":"Close"})]),(0,i.Lk)("div",Vr,[(0,i.Lk)("form",{onSubmit:a[14]||(a[14]=(0,r.D$)(((...o)=>c.agregarCategoria&&c.agregarCategoria(...o)),["prevent"]))},[(0,i.bo)((0,i.Lk)("input",{class:"form-control",type:"text",id:"nombre","onUpdate:modelValue":a[12]||(a[12]=o=>n.categoria_nombre=o),placeholder:"Nombre de la Categoría",required:""},null,512),[[r.Jo,n.categoria_nombre]]),(0,i.Lk)("div",Dr,[(0,i.Lk)("button",{type:"button",class:"btn",onClick:a[13]||(a[13]=(...o)=>c.cerrarCategoriaModal&&c.cerrarCategoriaModal(...o))},"Cerrar"),(0,i.Lk)("button",{class:"btn btn-agregar",type:"submit",disabled:!n.botonAgregarCategoriaEnabled},"Agregar",8,zr)])],32)])])])])])):(0,i.Q3)("",!0),(0,i.Lk)("div",Qr,[(0,i.Lk)("div",Wr,[(0,i.Lk)("div",$r,[jr,(0,i.Lk)("form",{onSubmit:a[16]||(a[16]=(0,r.D$)(((...o)=>c.importar&&c.importar(...o)),["prevent"]))},[(0,i.Lk)("div",Br,[Or,Jr,(0,i.Lk)("input",{class:"form-control mt-4",accept:".xlsx, .xls",type:"file",name:"importar",id:"importar",onChange:a[15]||(a[15]=(...o)=>c.cargarImportacion&&c.cargarImportacion(...o)),required:""},null,32)]),Gr],32)])])])]),Hr])}e(6573),e(8100),e(7936),e(7467),e(4732),e(9577);const Yr=o=>((0,i.Qi)("data-v-286d1a18"),o=o(),(0,i.jt)(),o),Zr={class:""},oi={class:"nav-mobile-bg"},ai={class:"flex-mobile"},ei=Yr((()=>(0,i.Lk)("img",{src:"/recursos/home.png",width:"50",height:"50",alt:"Home"},null,-1))),ti=Yr((()=>(0,i.Lk)("img",{src:"/recursos/add.png",width:"50",alt:"Add"},null,-1))),ri=Yr((()=>(0,i.Lk)("img",{src:"/recursos/user.png",width:"50",height:"50",alt:"User"},null,-1))),ii=Yr((()=>(0,i.Lk)("img",{src:"/recursos/mipuestito.png",width:"50",height:"50",alt:"User"},null,-1))),ni={class:"navbar navbar-expand-lg navbar-dark bg-dark"},ci={class:"container-fluid"},si=Yr((()=>(0,i.Lk)("img",{class:"m-2",src:"/recursos/home.png",width:"25",alt:""},null,-1))),li=Yr((()=>(0,i.Lk)("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarNavDarkDropdown","aria-controls":"navbarNavDarkDropdown","aria-expanded":"false","aria-label":"Toggle navigation"},[(0,i.Lk)("span",{class:"navbar-toggler-icon"})],-1))),di={class:"collapse navbar-collapse",id:"navbarNavDarkDropdown"},ui={class:"navbar-nav"},pi={class:"test nav-item"},mi={class:"test nav-item"},gi={class:"test nav-item"},bi={class:"test nav-item"},ki={class:"test nav-item"},hi=Yr((()=>(0,i.Lk)("button",{class:"nav-link","data-bs-toggle":"modal","data-bs-target":"#cerrarSesionModal"}," Salir ",-1))),vi={class:"modal fade",id:"cerrarSesionModal",tabindex:"-1","aria-labelledby":"cerrarSesionModalLabel","aria-hidden":"true"},fi={class:"modal-dialog"},Li={class:"modal-content"},Ci=Yr((()=>(0,i.Lk)("div",{class:"modal-header text-center"},[(0,i.Lk)("h1",{class:"modal-title fs-5",id:"cerrarSesionModalLabel"},"¿Cerrar sesión?"),(0,i.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1))),yi={class:"modal-footer text-center"},xi=Yr((()=>(0,i.Lk)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"No",-1)));function wi(o,a,e,t,r,n){const c=(0,i.g2)("router-link");return(0,i.uX)(),(0,i.CE)("div",Zr,[(0,i.Lk)("div",oi,[(0,i.Lk)("div",ai,[(0,i.bF)(c,{to:"/u/home",class:"item-mobile"},{default:(0,i.k6)((()=>[ei])),_:1}),(0,i.bF)(c,{to:"/u/productos",class:"item-mobile"},{default:(0,i.k6)((()=>[ti])),_:1}),(0,i.bF)(c,{to:"/u/modificar",class:"item-mobile"},{default:(0,i.k6)((()=>[ri])),_:1}),(0,i.bF)(c,{to:"/"+n.leerUsuario(),class:"item-mobile"},{default:(0,i.k6)((()=>[ii])),_:1},8,["to"])])]),(0,i.Lk)("nav",ni,[(0,i.Lk)("div",ci,[(0,i.bF)(c,{class:"navbar-brand",to:"/u/home"},{default:(0,i.k6)((()=>[si,(0,i.eW)(" "+(0,s.v_)(n.leerNombre()),1)])),_:1}),li,(0,i.Lk)("div",di,[(0,i.Lk)("ul",ui,[(0,i.Lk)("li",pi,[(0,i.bF)(c,{class:"nav-link",to:"/u/home"},{default:(0,i.k6)((()=>[(0,i.eW)("Inicio ")])),_:1})]),(0,i.Lk)("li",mi,[(0,i.bF)(c,{class:"nav-link",to:"/u/productos"},{default:(0,i.k6)((()=>[(0,i.eW)("Productos")])),_:1})]),(0,i.Lk)("li",gi,[(0,i.bF)(c,{class:"nav-link",to:"/u/publicaciones"},{default:(0,i.k6)((()=>[(0,i.eW)("Publicaciones")])),_:1})]),(0,i.Lk)("li",bi,[(0,i.bF)(c,{class:"nav-link",to:"/u/modificar"},{default:(0,i.k6)((()=>[(0,i.eW)("Pefil")])),_:1})]),(0,i.Lk)("li",ki,[hi,(0,i.Lk)("div",vi,[(0,i.Lk)("div",fi,[(0,i.Lk)("div",Li,[Ci,(0,i.Lk)("div",yi,[xi,(0,i.Lk)("button",{type:"button",class:"btn btn-menu-danger","data-bs-dismiss":"modal",onClick:a[0]||(a[0]=(...o)=>n.cerrarSesion&&n.cerrarSesion(...o))},"Sí, cerrar sesión")])])])])])])])])])])}var Pi={mounted(){},methods:{isActiveProductos(){return"/u/nuevoProducto"==this.$route.path||"/u/productos"==this.$route.path},isActiveCategorias(){return"/u/nuevaCategoria"==this.$route.path||"/u/categorias"==this.$route.path},leerNombre(){return localStorage.getItem("nombre")},leerUsuario(){return localStorage.getItem("usuario")},cerrarSesion(){localStorage.clear(),$g.push("/")}},components:{"router-link":f.Wk}};const Ei=(0,m.A)(Pi,[["render",wi],["__scopeId","data-v-286d1a18"]]);var Si=Ei,Mi=e(3230),Ii={components:{NavbarComponent:Si},data(){return{cargandoCropper:!0,cropper:null,imageToCrop:"",modalCropImage:!1,botonAgregarProductoEnabled:!0,botonAgregarCategoriaEnabled:!0,agregarCategoriaModalAbierto:!1,archivo:null,usuario:"",producto:{nombre:"",descripcion:"",categoria:"Categoría",precio:"",imagen:"",stock:"",usuario:""},categoria_nombre:"",categorias:[]}},created(){this.obtenerCategorias(),this.obtenerUsuario()},methods:{cerrarCategoriaModal(){this.agregarCategoriaModalAbierto=!1},agregarCategoriaModal(){window.scrollTo({top:0,behavior:"smooth"}),this.agregarCategoriaModalAbierto=!0},cargarImportacion(o){this.archivo=o.target.files[0]},async importar(){if(!this.archivo)return void console.error("No se ha seleccionado ningún archivo");const o=new FileReader;o.onload=async o=>{try{const a=new Uint8Array(o.target.result),e=Mi.LF(a,{type:"array"}),t=e.SheetNames[0],r=e.Sheets[t],i=Mi.Wp.sheet_to_json(r);await this.guardarProductos(i)}catch(a){console.error("Error al leer el archivo:",a)}},o.readAsArrayBuffer(this.archivo)},async guardarProductos(o){try{for(const e of o){let o=e["Precio"];try{(o.startsWith("$")||o.startsWith("€"))&&(o=o.replace("$","").replace("€","")),o.includes(",")&&(o=o.replace(",","."))}catch{}const t={nombre:e["Producto"],precio:parseFloat(o),categoria:"Varios",disponibilidad:1,imagen:"",usuario:this.usuario};try{this.nuevoProducto(t)}catch(a){ho().fire({icon:"error",text:"No se pudo agregar el producto."})}}}catch(a){ho().fire({icon:"error",text:"No se pudo agregar el producto. Verifica la información del Excel."+a})}},obtenerUsuario(){this.producto.usuario=this.usuario=localStorage.getItem("usuario")},obtenerCategorias(){t.A.get(`/categorias?usuario=${localStorage.getItem("usuario")}`).then((o=>{this.categorias=o.data})).catch((o=>{console.error("Error al obtener las categorías:",o)}))},iniciarCropper(){},imagenSeleccionada(o){try{const a=o.target.files[0];if(a){const o=new FileReader;o.onload=async o=>{this.imageToCrop=o.target.result,this.modalCropImage=!0;let a=this.$refs.cropperImg;a.src=this.imageToCrop,this.$nextTick((()=>{const o=document.querySelector("cropper-canvas");o&&o.parentNode.removeChild(o),this.cropper=new tt.Ay(a,{template:"<cropper-canvas background style='height:50vh;'>\n                                    <cropper-image  initial-center-size='contain' alt='Crop' scalable=true translatable></cropper-image>\n                                        <cropper-shade hidden></cropper-shade>\n                                        <cropper-handle  action='move' plain></cropper-handle>\n                                        <cropper-selection initial-coverage='0.5' aspect-ratio='1'  movable resizable>\n                                            <cropper-grid role='grid' covered></cropper-grid>\n                                            <cropper-crosshair centered></cropper-crosshair>\n                                            <cropper-handle action='move'\n                                                theme-color='rgba(255, 255, 255, 0.35)'></cropper-handle>\n                                            <cropper-handle action='ne-resize'></cropper-handle>\n                                            <cropper-handle action='nw-resize'></cropper-handle>\n                                            <cropper-handle action='se-resize'></cropper-handle>\n                                            <cropper-handle action='sw-resize'></cropper-handle>\n                                        </cropper-selection>\n                                    </cropper-canvas >"})}))},o.readAsDataURL(a)}}catch(a){console.log(a)}finally{this.cargandoCropper=!1}},cerrarCrop(){this.modalCropImage=!1},async guardarImagenRecortada(){try{const o=await this.cropper.getCropperSelection().$toCanvas();this.producto.imagen=o.toDataURL()}catch(o){console.error("Error al guardar la imagen recortada:",o)}finally{this.modalCropImage=!1}},nuevoProducto(o){"Categoría"==o.categoria?ho().fire({icon:"error",text:"Elegí o agregá una categoría."}):(this.botonAgregarProductoEnabled=!1,o.stock||(o.stock=-1),t.A.post("/nuevoProducto",{producto:o}).then((()=>{const o=ho().mixin({toast:!0,position:"bottom-end",showConfirmButton:!1,timer:2e3,timerProgressBar:!0,didOpen:o=>{o.addEventListener("mouseenter",ho().stopTimer),o.addEventListener("mouseleave",ho().resumeTimer)}});o.fire({icon:"success",title:"Producto agregado."}),setTimeout((function(){location.reload()}),2e3)})).catch((()=>{ho().fire({icon:"error",text:"No se pudo agregar el producto."})})))},agregarCategoria(){try{this.botonAgregarCategoriaEnabled=!1,t.A.post("nuevaCategoria",{categoria_nombre:this.categoria_nombre,usuario_nombre:localStorage.getItem("usuario")}).then((()=>{this.obtenerCategorias(),this.producto.categoria=this.categoria_nombre,this.categoria_nombre="";const o=ho().mixin({toast:!0,position:"bottom-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:o=>{o.addEventListener("mouseenter",ho().stopTimer),o.addEventListener("mouseleave",ho().resumeTimer)}});o.fire({icon:"success",title:"Categoría agregada."}),this.agregarCategoriaModalAbierto=!1})).catch((o=>{ho().fire({icon:"error",text:"No se pudo agregar la categoría. "+o.response.data.message})}))}catch(o){console.log(o)}finally{this.botonAgregarCategoriaEnabled=!0}}},mounted(){}};const _i=(0,m.A)(Ii,[["render",Kr],["__scopeId","data-v-7a491b98"]]);var Ai=_i;const Ti=o=>((0,i.Qi)("data-v-93499bce"),o=o(),(0,i.jt)(),o),Ni={key:0,class:"pantalla-carga text-center"},qi=Ti((()=>(0,i.Lk)("div",{class:"logo-carga"},[(0,i.Lk)("img",{class:"logo-img",src:"/favicon.ico",width:"50",alt:""}),(0,i.Lk)("div",{class:"texto-carga"},"Cargando productos")],-1))),Xi=[qi],Fi={class:"container pt-4 mb-2"},Ui=Ti((()=>(0,i.Lk)("h1",{class:"text-center"},"Productos",-1))),Ri={class:"flex"},Vi=Ti((()=>(0,i.Lk)("img",{src:"/recursos/plus.png",width:"40",alt:""},null,-1))),Di={class:"ancho mt-2"},zi=["id"],Qi={key:0},Wi={class:"flex"},$i=["onClick"],ji={key:0,class:"inline"},Bi={key:1,class:"inline"},Oi={class:"flex-end"},Ji=["onClick"],Gi={class:"p-2"},Hi={key:0,class:"item-imagen"},Ki=["src"],Yi={class:"item-texto-block"},Zi={class:"item-texto-block-start"},on={class:"item-nombre"},an={class:"item-precio"},en={key:0,class:"item-descripcion"},tn={key:1,class:"item-stock"},rn={class:"item-texto-block-end"},nn={class:"justify-content-center"},cn={class:"form-check form-switch"},sn=["onChange","checked"],ln=["onClick"],dn=["onClick"],un={key:0,class:"text-center mt-3"},pn={class:"modalCategoria"},mn={class:"modal-dialog modal-dialog-centered"},gn={class:"modal-content"},bn={class:"modal-header"},kn=Ti((()=>(0,i.Lk)("h1",{class:"modal-title fs-5",id:"modificarProductoLabel"}," Modificar Producto ",-1))),hn=Ti((()=>(0,i.Lk)("hr",null,null,-1))),vn={class:"modal-body"},fn={class:"row g-3 div-forms"},Ln={class:"col-md-6"},Cn=Ti((()=>(0,i.Lk)("label",{class:"form-label",for:"nombre"},"Nombre",-1))),yn={class:"col-md-6"},xn=Ti((()=>(0,i.Lk)("label",{class:"form-label",for:"descripcion"},"Descripción",-1))),wn={class:"col-md-6"},Pn=Ti((()=>(0,i.Lk)("label",{class:"form-label",for:"categoria"},"Categoría",-1))),En=Ti((()=>(0,i.Lk)("option",{selected:"",disabled:""},"Categoría",-1))),Sn=["value"],Mn={class:"col-md-6"},In=Ti((()=>(0,i.Lk)("label",{class:"form-label",for:"precio"},"Precio",-1))),_n=Ti((()=>(0,i.Lk)("i",{class:"small"},'Si el precio es menor a 0, se publicará como "consultar precio"',-1))),An={class:"col-md-6"},Tn=Ti((()=>(0,i.Lk)("label",{class:"form-label",for:"stock"},"Stock (si no manejás stock de este producto poné -1)",-1))),Nn={class:"col-md-6"},qn=Ti((()=>(0,i.Lk)("label",{class:"form-label mr-2",for:"imagen"},"Imagen (JPG/PNG)",-1))),Xn={class:"modal-footer mt-2"},Fn=Ti((()=>(0,i.Lk)("button",{class:"btn btn-menu",type:"submit"},"Modificar",-1))),Un={key:1,class:"modalCategoriaContainer"},Rn={class:"modalCategoria"},Vn={class:"modal-dialog modal-dialog-centered"},Dn={class:"modal-content"},zn={class:"modal-header pl-2"},Qn=Ti((()=>(0,i.Lk)("h1",{class:"modal-title fs-5",id:"agregarCategoriaLabel"},"Nueva Categoría",-1))),Wn={class:"modal-body mt-2"},$n={class:"modal-footer mt-2"},jn=Ti((()=>(0,i.Lk)("button",{class:"btn btn-agregar",type:"submit"},"Agregar",-1))),Bn={key:2,class:"modalCategoriaContainer"},On={class:"modalCategoria"},Jn={class:"modal-dialog modal-dialog-centered"},Gn={class:"modal-content"},Hn={class:"modal-header pl-2"},Kn=Ti((()=>(0,i.Lk)("h1",{class:"modal-title fs-5",id:"agregarCategoriaLabel"},"Modificar Categoría",-1))),Yn={class:"modal-body mt-2"},Zn={class:"modal-footer mt-2"},oc=Ti((()=>(0,i.Lk)("button",{class:"btn btn-agregar",type:"submit"},"Modificar",-1))),ac={class:"modalCategoriaContainer text-center"},ec={class:"modalCategoria"},tc={class:"modal-dialog modal-dialog-centered"},rc={class:"modal-content"},ic={class:"modal-header pl-2"},nc=Ti((()=>(0,i.Lk)("h1",{class:"modal-title fs-5",id:"agregarCategoriaLabel"},"Recortar Imagen",-1))),cc={class:"modal-body mt-2"},sc={class:"pantalla-cargas text-center"},lc=Ti((()=>(0,i.Lk)("div",{class:"logo-carga"},[(0,i.Lk)("img",{class:"logo-img",src:"/favicon.ico",width:"50",alt:""}),(0,i.Lk)("div",{class:"texto-carga"}," Cargando imagen ")],-1))),dc=[lc],uc={ref:"cropperImg",alt:"Croppear"},pc={class:"modal-footer mt-2"};function mc(o,a,e,t,n,c){const l=(0,i.g2)("NavbarComponent"),d=(0,i.g2)("router-link");return(0,i.uX)(),(0,i.CE)("div",null,[(0,i.bF)(l),n.cargando?((0,i.uX)(),(0,i.CE)("div",Ni,Xi)):(0,i.Q3)("",!0),(0,i.Lk)("div",Fi,[Ui,(0,i.Lk)("div",Ri,[(0,i.bo)((0,i.Lk)("input",{class:"form-control form-control-busqueda","onUpdate:modelValue":a[0]||(a[0]=o=>n.busqueda=o),type:"text",name:"busqueda",id:"",placeholder:"Buscar",title:"Ingrese una palabra clave..."},null,512),[[r.Jo,n.busqueda]]),(0,i.bF)(d,{class:"flex-end",to:"/u/nuevoProducto"},{default:(0,i.k6)((()=>[Vi])),_:1})]),(0,i.Lk)("div",Di,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(c.categoriasOrdenadas,((o,a)=>((0,i.uX)(),(0,i.CE)("div",{class:"mt-2",key:a,id:o},[c.filteredProductos(o)?((0,i.uX)(),(0,i.CE)("div",Qi,[(0,i.Lk)("div",Wi,[(0,i.Lk)("div",{class:(0,s.C4)(["titulo-categoria",{"fondo-oscuro":n.categoriaSeleccionada===o}]),onClick:a=>c.toggleCategoria(o)},[(0,i.eW)((0,s.v_)(o)+" ",1),n.categoriaSeleccionada===o?((0,i.uX)(),(0,i.CE)("div",ji,"↓")):((0,i.uX)(),(0,i.CE)("div",Bi,"→"))],10,$i),(0,i.Lk)("div",Oi,[(0,i.Lk)("img",{class:"pointer",onClick:a=>c.abrirModificarCategoriaModal(o),width:"41.2",src:"/recursos/edit.png",alt:""},null,8,Ji)])]),(0,i.Lk)("div",{class:(0,s.C4)({"categoria-productos":!0,"categoria-activa":n.categoriaSeleccionada===o})},[(0,i.Lk)("div",Gi,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(c.filteredProductos(o),((o,a)=>((0,i.uX)(),(0,i.CE)("div",{class:"item-container mt-2",key:a},[o.producto_imagen?((0,i.uX)(),(0,i.CE)("div",Hi,[(0,i.Lk)("div",null,[(0,i.Lk)("img",{class:"imagen",src:o.producto_imagen,alt:" "},null,8,Ki)])])):(0,i.Q3)("",!0),(0,i.Lk)("div",Yi,[(0,i.Lk)("div",Zi,[(0,i.Lk)("div",on,(0,s.v_)(o.producto_nombre),1),(0,i.Lk)("div",an," $"+(0,s.v_)(o.producto_precio),1),o.producto_descripcion?((0,i.uX)(),(0,i.CE)("div",en,' "'+(0,s.v_)(o.producto_descripcion)+'" ',1)):(0,i.Q3)("",!0),-1!==o.producto_stock?((0,i.uX)(),(0,i.CE)("div",tn," Stock: "+(0,s.v_)(o.producto_stock),1)):(0,i.Q3)("",!0)])]),(0,i.Lk)("div",rn,[(0,i.Lk)("div",nn,[(0,i.Lk)("div",cn,[(0,i.Lk)("input",{type:"checkbox",onChange:a=>c.actualizarEstadoProducto(o),class:"form-check-input",name:"",id:"productoDisponible",checked:1===o.producto_disponibilidad},null,40,sn)])]),(0,i.Lk)("img",{class:"pointer",onClick:a=>c.modificar(o),width:"41.2",src:"/recursos/edit.png",alt:""},null,8,ln),(0,i.Lk)("img",{class:"pointer",onClick:a=>c.eliminar(o.producto_id),width:"41.2",src:"/recursos/delete.png",alt:""},null,8,dn)])])))),128))])],2)])):(0,i.Q3)("",!0)],8,zi)))),128)),0===c.productosFiltrados.length?((0,i.uX)(),(0,i.CE)("div",un," No se encontraron resultados. ")):(0,i.Q3)("",!0)]),n.modificarModalAbierto?((0,i.uX)(),(0,i.CE)("div",{key:0,class:"modalCategoriaContainer",style:(0,s.Tr)({height:n.modalHeight+"px"})},[(0,i.Lk)("div",pn,[(0,i.Lk)("div",mn,[(0,i.Lk)("div",gn,[(0,i.Lk)("div",bn,[kn,(0,i.Lk)("button",{type:"button",class:"btn-close",onClick:a[1]||(a[1]=(...o)=>c.cerrarModificarModal&&c.cerrarModificarModal(...o)),"aria-label":"Close"})]),hn,(0,i.Lk)("div",vn,[(0,i.Lk)("form",{onSubmit:a[10]||(a[10]=(0,r.D$)((o=>c.modificarProducto(this.productoModificar)),["prevent"]))},[(0,i.Lk)("div",fn,[(0,i.Lk)("div",Ln,[Cn,(0,i.bo)((0,i.Lk)("input",{class:"form-control",type:"text",id:"nombre","onUpdate:modelValue":a[2]||(a[2]=o=>n.productoModificar.producto_nombre=o),required:""},null,512),[[r.Jo,n.productoModificar.producto_nombre]])]),(0,i.Lk)("div",yn,[xn,(0,i.bo)((0,i.Lk)("textarea",{class:"form-control",type:"text",id:"descripcion","onUpdate:modelValue":a[3]||(a[3]=o=>n.productoModificar.producto_descripcion=o),placeholder:"Descripción"},null,512),[[r.Jo,n.productoModificar.producto_descripcion]])]),(0,i.Lk)("div",wn,[Pn,(0,i.bo)((0,i.Lk)("select",{class:"form-select","onUpdate:modelValue":a[4]||(a[4]=o=>n.productoModificar.producto_categoria=o),id:"",required:""},[En,((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(n.categorias,(o=>((0,i.uX)(),(0,i.CE)("option",{key:o.id,value:o.categoria_nombre},(0,s.v_)(o.categoria_nombre),9,Sn)))),128))],512),[[r.u1,n.productoModificar.producto_categoria]]),(0,i.Lk)("button",{type:"button",class:"btn btn-agregar mt-2",onClick:a[5]||(a[5]=(...o)=>c.agregarCategoriaModal&&c.agregarCategoriaModal(...o))}," Agregar Categoría ")]),(0,i.Lk)("div",Mn,[In,(0,i.bo)((0,i.Lk)("input",{class:"form-control",type:"number",id:"precio","onUpdate:modelValue":a[6]||(a[6]=o=>n.productoModificar.producto_precio=o),placeholder:"Precio (sin $)"},null,512),[[r.Jo,n.productoModificar.producto_precio]]),_n]),(0,i.Lk)("div",An,[Tn,(0,i.bo)((0,i.Lk)("input",{class:"form-control",type:"number",id:"stock","onUpdate:modelValue":a[7]||(a[7]=o=>n.productoModificar.producto_stock=o),placeholder:"Stock"},null,512),[[r.Jo,n.productoModificar.producto_stock]])]),(0,i.Lk)("div",Nn,[qn,(0,i.Lk)("input",{class:"form-control",type:"file",name:"imagen",id:"imagen",accept:"image/jpeg, image/png",onChange:a[8]||(a[8]=(...o)=>c.imagenSeleccionada&&c.imagenSeleccionada(...o))},null,32)])]),(0,i.Lk)("div",Xn,[(0,i.Lk)("button",{type:"button",class:"btn",onClick:a[9]||(a[9]=(...o)=>c.cerrarModificarModal&&c.cerrarModificarModal(...o))},"Cerrar"),Fn])],32)])])])])],4)):(0,i.Q3)("",!0),n.agregarCategoriaModalAbierto?((0,i.uX)(),(0,i.CE)("div",Un,[(0,i.Lk)("div",Rn,[(0,i.Lk)("div",Vn,[(0,i.Lk)("div",Dn,[(0,i.Lk)("div",zn,[Qn,(0,i.Lk)("button",{type:"button",class:"btn-close",onClick:a[11]||(a[11]=(...o)=>c.cerrarCategoriaModal&&c.cerrarCategoriaModal(...o)),"aria-label":"Close"})]),(0,i.Lk)("div",Wn,[(0,i.Lk)("form",{onSubmit:a[14]||(a[14]=(0,r.D$)(((...o)=>c.agregarCategoria&&c.agregarCategoria(...o)),["prevent"]))},[(0,i.bo)((0,i.Lk)("input",{class:"form-control",type:"text",id:"nombre","onUpdate:modelValue":a[12]||(a[12]=o=>n.categoria_nombre=o),placeholder:"Nombre de la Categoría",required:""},null,512),[[r.Jo,n.categoria_nombre]]),(0,i.Lk)("div",$n,[(0,i.Lk)("button",{type:"button",class:"btn",onClick:a[13]||(a[13]=(...o)=>c.cerrarCategoriaModal&&c.cerrarCategoriaModal(...o))},"Cerrar"),jn])],32)])])])])])):(0,i.Q3)("",!0),n.modificarCategoriaModalAbierto?((0,i.uX)(),(0,i.CE)("div",Bn,[(0,i.Lk)("div",On,[(0,i.Lk)("div",Jn,[(0,i.Lk)("div",Gn,[(0,i.Lk)("div",Hn,[Kn,(0,i.Lk)("button",{type:"button",class:"btn-close",onClick:a[15]||(a[15]=(...o)=>c.cerrarModificarCategoriaModal&&c.cerrarModificarCategoriaModal(...o)),"aria-label":"Close"})]),(0,i.Lk)("div",Yn,[(0,i.Lk)("form",{onSubmit:a[18]||(a[18]=(0,r.D$)(((...o)=>c.modificarCategoria&&c.modificarCategoria(...o)),["prevent"]))},[(0,i.bo)((0,i.Lk)("input",{class:"form-control",type:"text",id:"nombre","onUpdate:modelValue":a[16]||(a[16]=o=>n.categoriaNueva=o),placeholder:"Nombre de la Categoría",required:""},null,512),[[r.Jo,n.categoriaNueva]]),(0,i.Lk)("div",Zn,[(0,i.Lk)("button",{type:"button",class:"btn",onClick:a[17]||(a[17]=(...o)=>c.cerrarModificarCategoriaModal&&c.cerrarModificarCategoriaModal(...o))},"Cerrar"),oc])],32)])])])])])):(0,i.Q3)("",!0),(0,i.bo)((0,i.Lk)("div",ac,[(0,i.Lk)("div",ec,[(0,i.Lk)("div",tc,[(0,i.Lk)("div",rc,[(0,i.Lk)("div",ic,[nc,(0,i.Lk)("button",{type:"button",class:"btn-close",onClick:a[19]||(a[19]=(...o)=>c.cerrarCrop&&c.cerrarCrop(...o)),"aria-label":"Close"})]),(0,i.Lk)("div",cc,[(0,i.bo)((0,i.Lk)("div",sc,dc,512),[[r.aG,n.cargandoCropper]]),(0,i.Lk)("img",uc,null,512)]),(0,i.Lk)("div",pc,[(0,i.Lk)("button",{type:"button",class:"btn",onClick:a[20]||(a[20]=(...o)=>c.cerrarCrop&&c.cerrarCrop(...o))},"Cerrar"),(0,i.Lk)("button",{class:"btn btn-menu",onClick:a[21]||(a[21]=(...o)=>c.guardarImagenRecortada&&c.guardarImagenRecortada(...o))},"Recortar")])])])])],512),[[r.aG,n.modalCropImage]])])])}var gc={components:{NavbarComponent:Si},data(){return{cargandoCropper:!0,cropper:null,imageToCrop:"",modalCropImage:!1,categoriaSeleccionada:null,cargando:!0,productos:[],productoModificar:"",busqueda:"",usuario:localStorage.getItem("usuario"),producto:{nombre:"",descripcion:"",categoria:"Categoría",precio:"",imagen:"",stock:"",usuario:""},categoria_nombre:"",categoriaVieja:"",categoriaNueva:"",categorias:[],agregarCategoriaModalAbierto:!1,modificarModalAbierto:!1,modificarCategoriaModalAbierto:!1,modalHeight:""}},created(){this.fetchProductos()},computed:{categoriasOrdenadas(){return[...new Set(this.productosFiltrados.map((o=>o.producto_categoria)))].sort()},productosFiltrados(){const o=o=>o.normalize("NFD").replace(/[\u0300-\u036f]/g,"");return this.productos.filter((a=>{const e=a.producto_nombre||"",t=a.producto_descripcion||"",r=a.producto_categoria||"",i=a.producto_precio||"",n=o(this.busqueda.toLowerCase());return o(e.toLowerCase()).includes(n)||o(t.toLowerCase()).includes(n)||o(r.toLowerCase()).includes(n)||o(i.toString().toLowerCase()).includes(n)}))},categoriasConProductosFiltrados(){return[...new Set(this.productosFiltrados.map((o=>o.producto_categoria)))]}},methods:{modificarCategoria(){t.A.put("/modificarCategoria",{usuario:this.usuario,categoriaVieja:this.categoriaVieja,categoriaNueva:this.categoriaNueva}).then((()=>{const o=ho().mixin({toast:!0,position:"bottom-end",showConfirmButton:!1,timer:1e3,timerProgressBar:!0,didOpen:o=>{o.addEventListener("mouseenter",ho().stopTimer),o.addEventListener("mouseleave",ho().resumeTimer)}});o.fire({icon:"success",title:"Categoría modificada."}),setTimeout((function(){location.reload()}),1e3)})).catch((o=>{ho().fire({icon:"error",text:"No se pudo modificar la categoría. "+o.response.data.message})})).finally((()=>{this.modificarCategoriaModalAbierto=!1}))},cerrarModificarModal(){this.modificarModalAbierto=!1},cerrarCategoriaModal(){this.agregarCategoriaModalAbierto=!1},agregarCategoriaModal(){window.scrollTo({top:0,behavior:"smooth"}),this.agregarCategoriaModalAbierto=!0},cerrarModificarCategoriaModal(){this.modificarCategoriaModalAbierto=!1},abrirModificarCategoriaModal(o){window.scrollTo({top:0,behavior:"smooth"}),this.modificarCategoriaModalAbierto=!0,this.categoriaVieja=this.categoriaNueva=o},toggleCategoria(o){this.categoriaSeleccionada===o?this.categoriaSeleccionada=null:this.categoriaSeleccionada=o},filteredProductos(o){return this.productosFiltrados.filter((a=>a.producto_categoria===o))},async fetchCategorias(){t.A.get(`/categorias?usuario=${localStorage.getItem("usuario")}`).then((o=>{this.categorias=o.data})).catch((o=>{console.error("Error al obtener las categorías:",o)}))},modificar(o){this.fetchCategorias(),this.productoModificar=o;const a=document.body.clientHeight;this.modalHeight=a,window.scrollTo({top:0,behavior:"smooth"}),this.modificarModalAbierto=!0},actualizarEstadoProducto(o){o.producto_disponibilidad?o.producto_disponibilidad=0:o.producto_disponibilidad=1,t.A.put("/actualizarDisponibilidad",{productoId:o.producto_id,nuevoEstado:o.producto_disponibilidad}).then((()=>{})).catch((a=>{console.error("Error al actualizar el estado en la base de datos:",a),o.producto_disponibilidad=!o.producto_disponibilidad}))},async fetchProductos(){try{const o=await t.A.get(`/productos?usuario=${this.usuario}`);this.productos=o.data}catch(o){console.error("Error al cargar los productos:",o)}finally{this.cargando=!1}},modificarProducto(o){t.A.put("/modificarProducto",{producto:o}).then((()=>{this.modificarModalAbierto=!1;const o=ho().mixin({toast:!0,position:"bottom-end",showConfirmButton:!1,timer:2e3,timerProgressBar:!0,didOpen:o=>{o.addEventListener("mouseenter",ho().stopTimer),o.addEventListener("mouseleave",ho().resumeTimer)}});o.fire({icon:"success",title:"Producto modificado."})})).catch((o=>{console.error("Error al actualizar el estado en la base de datos:",o)}))},eliminar(o){ho().fire({icon:"info",title:"<strong>¿Estas segur@?</strong>",html:"",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonText:"No, cancelar",confirmButtonText:"Sí, eliminar!"}).then((a=>{a.isConfirmed&&t.A.delete(`/eliminarProducto?id=${o}`).then((()=>{const a=this.productos.findIndex((a=>a.producto_id===o));-1!==a&&this.productos.splice(a,1);const e=ho().mixin({toast:!0,position:"bottom-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:o=>{o.addEventListener("mouseenter",ho().stopTimer),o.addEventListener("mouseleave",ho().resumeTimer)}});e.fire({icon:"success",title:"Producto eliminado."})})).catch((o=>{console.error("Error al eliminar el producto:",o),ho().fire({icon:"error",title:"Error al eliminar",text:o.message})}))}))},agregarCategoria(){t.A.post("nuevaCategoria",{categoria_nombre:this.categoria_nombre,usuario_nombre:localStorage.getItem("usuario")}).then((()=>{this.productoModificar.producto_categoria=this.categoria_nombre,this.categoria_nombre="";const o=ho().mixin({toast:!0,position:"bottom-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:o=>{o.addEventListener("mouseenter",ho().stopTimer),o.addEventListener("mouseleave",ho().resumeTimer)}});o.fire({icon:"success",title:"Categoría agregada."}),this.agregarCategoriaModalAbierto=!1})).catch((o=>{ho().fire({icon:"error",text:"No se pudo agregar la categoría. "+o.response.data.message})}))},imagenSeleccionada(o){try{const a=o.target.files[0];if(a){const o=new FileReader;o.onload=async o=>{this.imageToCrop=o.target.result,this.modalCropImage=!0;let a=this.$refs.cropperImg;a.src=this.imageToCrop,this.$nextTick((()=>{const o=document.querySelector("cropper-canvas");o&&o.parentNode.removeChild(o),this.cropper=new tt.Ay(a,{template:"<cropper-canvas background style='height:50vh;'>\n                  <cropper-image  initial-center-size='contain' alt='Crop' scalable=true translatable></cropper-image>\n                                        <cropper-shade hidden></cropper-shade>\n                                        <cropper-handle  action='move' plain></cropper-handle>\n                                        <cropper-selection initial-coverage='0.5' aspect-ratio='1'  movable resizable>\n                                            <cropper-grid role='grid' covered></cropper-grid>\n                                            <cropper-crosshair centered></cropper-crosshair>\n                                            <cropper-handle action='move'\n                                                theme-color='rgba(255, 255, 255, 0.35)'></cropper-handle>\n                                            <cropper-handle action='ne-resize'></cropper-handle>\n                                            <cropper-handle action='nw-resize'></cropper-handle>\n                                            <cropper-handle action='se-resize'></cropper-handle>\n                                            <cropper-handle action='sw-resize'></cropper-handle>\n                                        </cropper-selection>\n                                    </cropper-canvas >"})}))},o.readAsDataURL(a)}}catch(a){console.log(a)}finally{this.cargandoCropper=!1}},cerrarCrop(){this.modalCropImage=!1},async guardarImagenRecortada(){try{const o=await this.cropper.getCropperSelection().$toCanvas();this.productoModificar.producto_imagen=o.toDataURL()}catch(o){console.error("Error al guardar la imagen recortada:",o)}finally{this.modalCropImage=!1}}}};const bc=(0,m.A)(gc,[["render",mc],["__scopeId","data-v-93499bce"]]);var kc=bc;const hc=o=>((0,i.Qi)("data-v-3b4385dc"),o=o(),(0,i.jt)(),o),vc={key:0},fc={key:1,class:"pantalla-carga text-center"},Lc=hc((()=>(0,i.Lk)("div",{class:"logo-carga"},[(0,i.Lk)("img",{class:"logo-img",src:"/favicon.ico",width:"50",alt:""}),(0,i.Lk)("div",{class:"texto-carga"}," Cargando productos ")],-1))),Cc=[Lc],yc={key:2},xc={class:"absolute"},wc={class:"container"},Pc={class:"flex"},Ec=["src"],Sc={class:"ancho-busqueda input-group mcenter"},Mc=hc((()=>(0,i.Lk)("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},[(0,i.Lk)("span",{class:"navbar-toggler-icon"})],-1))),Ic={class:"collapse navbar-collapse text-end bg-dark",id:"navbarSupportedContent"},_c={class:"navbar-nav m-2"},Ac={key:0,class:"nav-item"},Tc=["onClick"],Nc={class:"container2"},qc={key:0},Xc={class:"presentacion"},Fc={class:"imagen-container"},Uc=["src"],Rc={key:1,src:"/recursos/missing.png",class:"img-negocio",alt:""},Vc={class:"texto-superpuesto"},Dc={class:"texto-superpuesto2"},zc={class:"text-center redes"},Qc={key:0},Wc=["href"],$c=hc((()=>(0,i.Lk)("img",{width:"40",src:"/recursos/instagram.png"},null,-1))),jc=[$c],Bc=["href"],Oc=hc((()=>(0,i.Lk)("img",{width:"36",src:"/recursos/facebook.png"},null,-1))),Jc=[Oc],Gc=hc((()=>(0,i.Lk)("br",null,null,-1))),Hc={class:"text-center"},Kc=hc((()=>(0,i.Lk)("hr",null,null,-1))),Yc={key:0,class:"justify-content-center"},Zc={class:"carrusel"},os={class:"publicacion-container"},as=["src","onClick"],es=hc((()=>(0,i.Lk)("hr",{class:"hr-mobile"},null,-1))),ts={key:0,class:"publicacion-agrandada"},rs=hc((()=>(0,i.Lk)("img",{src:"/recursos/previous.png",width:"20",alt:""},null,-1))),is=[rs],ns=hc((()=>(0,i.Lk)("img",{src:"/recursos/next.png",width:"20",alt:""},null,-1))),cs=[ns],ss=["src"],ls=hc((()=>(0,i.Lk)("img",{class:"ml",src:"/recursos/whatsapp.png",width:"30",alt:""},null,-1))),ds=hc((()=>(0,i.Lk)("hr",null,null,-1))),us={class:"body-container"},ps={class:"ancho"},ms=["id"],gs={key:0},bs=["onClick"],ks={key:0,class:"inline"},hs={key:1,class:"inline"},vs={class:"p-2"},fs={key:0,class:"item-imagen"},Ls=["src"],Cs={class:"item-texto-block"},ys={class:"item-texto-block-start"},xs={class:"item-nombre"},ws={class:"item-precio"},Ps={key:0,class:"item-descripcion"},Es={key:1,class:"item-texto-block-end"},Ss=["onClick"],Ms={class:"cantidad"},Is=["onClick","disabled"],_s={class:"ver-carrito-btn","data-bs-toggle":"modal","data-bs-target":"#modalCarrito"},As={key:1,class:"text-center mt-3"},Ts={key:1},Ns={class:"error-content"},qs={key:0,class:"display-1"},Xs=["src"],Fs={class:"display-4"},Us=hc((()=>(0,i.Lk)("p",{class:"lead"},[(0,i.eW)("Estamos construyendo nuestro puestito."),(0,i.Lk)("br")],-1))),Rs={key:1},Vs={key:2},Ds=["href"],zs=hc((()=>(0,i.Lk)("img",{width:"40",src:"/recursos/instagram.png"},null,-1))),Qs=[zs],Ws=["href"],$s=hc((()=>(0,i.Lk)("img",{width:"36",src:"/recursos/facebook.png"},null,-1))),js=[$s],Bs=hc((()=>(0,i.Lk)("br",null,null,-1))),Os={key:5,class:"mt-3"},Js={key:2},Gs={class:"error-content"},Hs=hc((()=>(0,i.Lk)("h1",{class:"display-1 text-danger"},"404",-1))),Ks=hc((()=>(0,i.Lk)("h2",{class:"display-4"},"Puestito no encontrado",-1))),Ys=hc((()=>(0,i.Lk)("p",{class:"lead"},"Lo sentimos, el puestito que buscas no se encuentra disponible o no tiene productos disponibles.",-1))),Zs={class:"modal fade",id:"modalCarrito",tabindex:"-1","aria-labelledby":"modalCarritoLabel","aria-hidden":"true"},ol={class:"modal-dialog"},al={class:"modal-content"},el=hc((()=>(0,i.Lk)("div",{class:"modal-header"},[(0,i.Lk)("h5",{class:"modal-title"},"¿Todo listo para encargar?"),(0,i.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1))),tl={class:"modal-body"},rl={key:0,class:"item-imagen"},il=["src"],nl={class:"item-texto-block"},cl={class:"item-texto-block-start"},sl={class:"item-nombre"},ll={class:"item-precio"},dl={key:0,class:"item-descripcion"},ul={class:"item-texto-block-end"},pl=["onClick"],ml={class:"cantidad"},gl=["onClick","disabled"],bl={class:"text-end mt-4"},kl={class:"modal-footer"},hl=["disabled"],vl={class:"modal fade",id:"modalPedido",tabindex:"-1","aria-labelledby":"modalPedidoLabel","aria-hidden":"true"},fl={class:"modal-dialog"},Ll={class:"modal-content"},Cl=hc((()=>(0,i.Lk)("div",{class:"modal-header"},[(0,i.Lk)("h5",{class:"modal-title"},"Información del pedido"),(0,i.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1))),yl={class:"modal-body"},xl=hc((()=>(0,i.Lk)("label",{class:"mt-2",for:"nombre"},"Nombre y Apellido",-1))),wl=hc((()=>(0,i.Lk)("label",{class:"mt-2",for:"medioPago"},"Medio de Pago",-1))),Pl=hc((()=>(0,i.Lk)("option",{value:"Transferencia"},"Transferencia",-1))),El=hc((()=>(0,i.Lk)("option",{value:"Efectivo"},"Efectivo",-1))),Sl=[Pl,El],Ml=hc((()=>(0,i.Lk)("label",{class:"mt-2",for:"direccion"},"Dirección de entrega",-1))),Il=hc((()=>(0,i.Lk)("label",{class:"mt-2",for:"detalles"},"Detalles del pedido",-1))),_l={class:"modal-footer"},Al=["disabled"];function Tl(o,a,e,t,n,c){const l=(0,i.g2)("NavbarComponent"),d=(0,i.g2)("router-link");return(0,i.uX)(),(0,i.CE)("div",null,[n.usuarioLogueado?((0,i.uX)(),(0,i.CE)("div",vc,[(0,i.bF)(l)])):(0,i.Q3)("",!0),n.cargando?((0,i.uX)(),(0,i.CE)("div",fc,Cc)):((0,i.uX)(),(0,i.CE)("div",yc,[(0,i.Lk)("div",xc,[(0,i.Lk)("nav",{class:(0,s.C4)(["navbar navbar-dark bg-dark",{"navbar-hidden":n.isHidden}])},[(0,i.Lk)("div",wc,[(0,i.Lk)("div",Pc,[(0,i.Lk)("a",{onClick:a[0]||(a[0]=(...o)=>c.scrollToInicio&&c.scrollToInicio(...o)),href:"#"},[(0,i.Lk)("img",{class:"nav-logo",src:n.negocio.imagen,alt:""},null,8,Ec)]),(0,i.Lk)("div",Sc,[(0,i.bo)((0,i.Lk)("input",{class:"form-control","onUpdate:modelValue":a[1]||(a[1]=o=>n.busqueda=o),type:"text",name:"busqueda",id:"",placeholder:"Buscar producto",title:"Ingrese una palabra clave..."},null,512),[[r.Jo,n.busqueda]]),(0,i.Lk)("button",{class:"btn-close btn-limpiar-busqueda",onClick:a[2]||(a[2]=(...o)=>c.limpiarBusqueda&&c.limpiarBusqueda(...o))})]),Mc]),(0,i.Lk)("div",Ic,[(0,i.Lk)("ul",_c,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(c.categoriasOrdenadas,((o,a)=>((0,i.uX)(),(0,i.CE)("div",{key:a},[c.categoriasConProductosFiltrados.includes(o)?((0,i.uX)(),(0,i.CE)("li",Ac,[(0,i.Lk)("a",{class:"nav-link",onClick:a=>{c.scrollToCategoria(o),c.collapseNavbar()}},(0,s.v_)(o),9,Tc)])):(0,i.Q3)("",!0)])))),128))])])])],2)]),(0,i.Lk)("div",Nc,[n.productos.length?((0,i.uX)(),(0,i.CE)("div",qc,[(0,i.Lk)("div",Xc,[(0,i.Lk)("div",Fc,[n.negocio.portada?((0,i.uX)(),(0,i.CE)("img",{key:0,src:n.negocio.portada,alt:"",class:"img-negocio"},null,8,Uc)):((0,i.uX)(),(0,i.CE)("img",Rc)),(0,i.Lk)("div",Vc,[(0,i.eW)("BIENVENIDOS "),(0,i.Lk)("div",Dc,(0,s.v_)(n.negocio.descripcion),1),(0,i.Lk)("div",zc,[n.negocio.direccion?((0,i.uX)(),(0,i.CE)("h4",Qc,(0,s.v_)(n.negocio.direccion),1)):(0,i.Q3)("",!0),n.negocio.instagram?((0,i.uX)(),(0,i.CE)("a",{key:1,class:"mauto",href:"https://instagram.com/"+n.negocio.instagram,target:"blank"},jc,8,Wc)):(0,i.Q3)("",!0),n.negocio.facebook?((0,i.uX)(),(0,i.CE)("a",{key:2,class:"mauto",href:n.negocio.facebook,target:"blank"},Jc,8,Bc)):(0,i.Q3)("",!0),(0,i.eW)(),Gc,(0,i.Lk)("div",Hc,[(0,i.bo)((0,i.Lk)("img",{src:"/recursos/scroll-down.png",class:(0,s.C4)(["scroll-down",{"fade-in-out":n.isHidden}]),alt:""},null,2),[[r.aG,n.isHidden]])])])])])]),Kc,n.publicaciones&&n.publicaciones.length>0?((0,i.uX)(),(0,i.CE)("div",Yc,[(0,i.Lk)("div",Zc,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(n.publicaciones,((o,a)=>((0,i.uX)(),(0,i.CE)("div",{key:a,class:(0,s.C4)({"carrusel-item":!0,active:0===a})},[(0,i.Lk)("div",os,[(0,i.Lk)("img",{class:"imagen-publicacion",src:o.publicacion,alt:" ",onClick:o=>c.agrandarPublicacion(a)},null,8,as)])],2)))),128))]),es,null!==n.publicacionAgrandada?((0,i.uX)(),(0,i.CE)("div",ts,[(0,i.Lk)("button",{onClick:a[3]||(a[3]=(...o)=>c.cerrarAgrandarPublicacion&&c.cerrarAgrandarPublicacion(...o)),class:"btn-close btn-close-agrandada"}),n.indiceAgrandada>0?((0,i.uX)(),(0,i.CE)("button",{key:0,onClick:a[4]||(a[4]=o=>c.agrandarPublicacion(n.indiceAgrandada-1)),class:"btn-anterior"},is)):(0,i.Q3)("",!0),n.indiceAgrandada<n.publicaciones.length-1?((0,i.uX)(),(0,i.CE)("button",{key:1,onClick:a[5]||(a[5]=o=>c.agrandarPublicacion(n.indiceAgrandada+1)),class:"btn-siguiente"},cs)):(0,i.Q3)("",!0),(0,i.Lk)("img",{src:n.publicaciones[n.publicacionAgrandada].publicacion,class:"imagen-agrandada",alt:""},null,8,ss)])):(0,i.Q3)("",!0)])):(0,i.Q3)("",!0),(0,i.Lk)("div",{class:"text-center mt-2 mensajeWpp p-2",onClick:a[6]||(a[6]=(...o)=>c.enviarMensaje&&c.enviarMensaje(...o))},[(0,i.eW)(" Enviá tu consulta "),ls]),ds,(0,i.Lk)("div",us,[(0,i.Lk)("div",ps,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(c.categoriasOrdenadas,((o,a)=>((0,i.uX)(),(0,i.CE)("div",{class:"mt-2",key:a,id:o},[c.filteredProductos(o)?((0,i.uX)(),(0,i.CE)("div",gs,[(0,i.Lk)("div",{class:(0,s.C4)(["titulo-categoria",{"fondo-oscuro":n.categoriaSeleccionada===o}]),onClick:a=>c.toggleCategoria(o)},[(0,i.eW)((0,s.v_)(o)+" ",1),n.categoriaSeleccionada===o?((0,i.uX)(),(0,i.CE)("div",ks,"↓")):((0,i.uX)(),(0,i.CE)("div",hs,"→"))],10,bs),(0,i.Lk)("div",{class:(0,s.C4)({"categoria-productos":!0,"categoria-activa":n.categoriaSeleccionada===o})},[(0,i.Lk)("div",vs,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(c.filteredProductos(o),((o,a)=>((0,i.uX)(),(0,i.CE)("div",{class:"item-container mt-2",key:a},[o.producto_imagen?((0,i.uX)(),(0,i.CE)("div",fs,[(0,i.Lk)("div",null,[(0,i.Lk)("img",{class:"imagen",src:o.producto_imagen,alt:" "},null,8,Ls)])])):(0,i.Q3)("",!0),(0,i.Lk)("div",Cs,[(0,i.Lk)("div",ys,[(0,i.Lk)("div",xs,(0,s.v_)(o.producto_nombre),1),(0,i.Lk)("div",ws,(0,s.v_)(o.producto_precio>0?"$"+o.producto_precio:o.producto_precio<0?"Consultar precio":"Gratis"),1),o.producto_descripcion?((0,i.uX)(),(0,i.CE)("div",Ps,' "'+(0,s.v_)(o.producto_descripcion)+'" ',1)):(0,i.Q3)("",!0)])]),1==n.negocio.tipo?((0,i.uX)(),(0,i.CE)("div",Es,[(0,i.Lk)("button",{class:"btn-mas",onClick:a=>c.agregarAlCarrito(o)}," + ",8,Ss),(0,i.Lk)("div",Ms,(0,s.v_)(o.cantidadSeleccionada),1),(0,i.Lk)("button",{class:"btn-menos",onClick:a=>c.quitarDelCarrito(o),disabled:!o.cantidadSeleccionada}," - ",8,Is)])):(0,i.Q3)("",!0)])))),128))])],2)])):(0,i.Q3)("",!0)],8,ms)))),128)),n.carrito.length>0?((0,i.uX)(),(0,i.CE)("div",{key:0,class:(0,s.C4)(n.usuarioLogueado?"ver-carrito-log":"ver-carrito")},[(0,i.Lk)("button",_s,"Ver Carrito $"+(0,s.v_)(n.total),1)],2)):(0,i.Q3)("",!0),0===c.productosFiltrados.length?((0,i.uX)(),(0,i.CE)("div",As," No se encontraron resultados para esa búsqueda. ")):(0,i.Q3)("",!0)])])])):n.nombreNegocio?((0,i.uX)(),(0,i.CE)("div",Ts,[(0,i.Lk)("div",Ns,[n.negocio.imagen?((0,i.uX)(),(0,i.CE)("h1",qs,[(0,i.Lk)("img",{src:n.negocio.imagen,width:"100",alt:"",style:{"border-radius":"100%"}},null,8,Xs)])):(0,i.Q3)("",!0),(0,i.Lk)("h2",Fs,(0,s.v_)(n.nombreNegocio),1),Us,n.negocio.instagram||n.negocio.facebook?((0,i.uX)(),(0,i.CE)("p",Rs,"¡Seguinos en nuestras redes!")):((0,i.uX)(),(0,i.CE)("p",Vs,"¡Volvé pronto!")),n.negocio.instagram?((0,i.uX)(),(0,i.CE)("a",{key:3,class:"mauto",href:"https://instagram.com/"+n.negocio.instagram,target:"blank"},Qs,8,Ds)):(0,i.Q3)("",!0),n.negocio.facebook?((0,i.uX)(),(0,i.CE)("a",{key:4,class:"mauto",href:"https://facebook.com/"+n.negocio.facebook,target:"blank"},js,8,Ws)):(0,i.Q3)("",!0),(0,i.eW)(),Bs,n.negocio.direccion?((0,i.uX)(),(0,i.CE)("p",Os,(0,s.v_)(n.negocio.direccion),1)):(0,i.Q3)("",!0),(0,i.bF)(d,{to:"/"},{default:(0,i.k6)((()=>[(0,i.eW)("Volver a Puestito Online")])),_:1})])])):((0,i.uX)(),(0,i.CE)("div",Js,[(0,i.Lk)("div",Gs,[Hs,Ks,Ys,(0,i.bF)(d,{to:"/"},{default:(0,i.k6)((()=>[(0,i.eW)("Volver a Puestito Online")])),_:1})])]))])])),(0,i.Lk)("div",Zs,[(0,i.Lk)("div",ol,[(0,i.Lk)("div",al,[el,(0,i.Lk)("div",tl,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(n.carrito,((o,a)=>((0,i.uX)(),(0,i.CE)("div",{class:"item-container mt-2",key:a},[o.producto_imagen?((0,i.uX)(),(0,i.CE)("div",rl,[(0,i.Lk)("div",null,[(0,i.Lk)("img",{class:"imagen",src:o.producto_imagen,alt:" "},null,8,il)])])):(0,i.Q3)("",!0),(0,i.Lk)("div",nl,[(0,i.Lk)("div",cl,[(0,i.Lk)("div",sl,(0,s.v_)(o.producto_nombre),1),(0,i.Lk)("div",ll," $"+(0,s.v_)(o.producto_precio),1),o.producto_descripcion?((0,i.uX)(),(0,i.CE)("div",dl,' "'+(0,s.v_)(o.producto_descripcion)+'" ',1)):(0,i.Q3)("",!0)])]),(0,i.Lk)("div",ul,[(0,i.Lk)("button",{class:"btn-mas",onClick:a=>c.agregarAlCarrito(o)}," + ",8,pl),(0,i.Lk)("div",ml,(0,s.v_)(o.cantidadSeleccionada),1),(0,i.Lk)("button",{class:"btn-menos",onClick:a=>c.quitarDelCarrito(o),disabled:!o.cantidadSeleccionada}," - ",8,gl)])])))),128)),(0,i.Lk)("h4",bl,"Total: $"+(0,s.v_)(n.total),1)]),(0,i.Lk)("div",kl,[(0,i.Lk)("button",{type:"button",class:"btn btn-limpiar","data-bs-dismiss":"modal","aria-label":"Close",onClick:a[7]||(a[7]=(...o)=>c.limpiarCarrito&&c.limpiarCarrito(...o))},"Limpiar carrito"),(0,i.Lk)("button",{type:"button",class:"btn btn-menu",disabled:!n.carrito.length>0,"data-bs-toggle":"modal","data-bs-target":"#modalPedido"},"Realizar pedido",8,hl)])])])]),(0,i.Lk)("div",vl,[(0,i.Lk)("div",fl,[(0,i.Lk)("div",Ll,[Cl,(0,i.Lk)("form",{onSubmit:a[12]||(a[12]=(0,r.D$)(((...o)=>c.realizarPedido&&c.realizarPedido(...o)),["prevent"]))},[(0,i.Lk)("div",yl,[xl,(0,i.bo)((0,i.Lk)("input",{type:"text",id:"nombre",class:"form-control",placeholder:"(obligatorio)","onUpdate:modelValue":a[8]||(a[8]=o=>n.pedido.nombre=o),required:""},null,512),[[r.Jo,n.pedido.nombre]]),wl,(0,i.bo)((0,i.Lk)("select",{class:"form-control form-select",id:"medioPago","onUpdate:modelValue":a[9]||(a[9]=o=>n.pedido.medio=o),required:""},Sl,512),[[r.u1,n.pedido.medio]]),Ml,(0,i.bo)((0,i.Lk)("input",{type:"text",id:"direccion",class:"form-control",placeholder:"(opcional)","onUpdate:modelValue":a[10]||(a[10]=o=>n.pedido.direccion=o)},null,512),[[r.Jo,n.pedido.direccion]]),Il,(0,i.bo)((0,i.Lk)("input",{type:"text",id:"detalles",class:"form-control",placeholder:"(opcional)","onUpdate:modelValue":a[11]||(a[11]=o=>n.pedido.detalle=o)},null,512),[[r.Jo,n.pedido.detalle]])]),(0,i.Lk)("div",_l,[(0,i.Lk)("button",{type:"submit",class:"btn btn-menu",disabled:!n.carrito.length>0},"Realizar pedido",8,Al)])],32)])])])])}var Nl={components:{NavbarComponent:Si},data(){return{publicacionAgrandada:null,usuarioLogueado:!1,isHidden:!0,categoriaSeleccionada:null,mostrarModal:!0,nombreUsuario:"",nombreNegocio:"",productos:[],busqueda:"",publicaciones:[],negocio:"",cargando:!0,carrito:[],total:0,indiceAgrandada:null,pedido:{nombre:"",medio:"Transferencia",direccion:"",detalle:""}}},async mounted(){window.addEventListener("scroll",this.handleScroll),this.nombreUsuario=this.$route.params.nombreNegocio,localStorage.getItem("usuario")==this.nombreUsuario?this.usuarioLogueado=!0:this.usuarioLogueado=!1,await this.obtenerInformacionNegocio(),await this.fetchPublicaciones(),await this.actualizarOG()},beforeUnmount(){window.removeEventListener("scroll",this.handleScroll)},computed:{categoriasOrdenadas(){return[...new Set(this.productosFiltrados.map((o=>o.producto_categoria)))].sort()},productosFiltrados(){const o=o=>o.normalize("NFD").replace(/[\u0300-\u036f]/g,"");return this.productos.filter((a=>{const e=a.producto_nombre||"",t=a.producto_descripcion||"",r=a.producto_categoria||"",i=a.producto_precio||"",n=o(this.busqueda.toLowerCase());return o(e.toLowerCase()).includes(n)||o(t.toLowerCase()).includes(n)||o(r.toLowerCase()).includes(n)||o(i.toString().toLowerCase()).includes(n)}))},categoriasConProductosFiltrados(){return[...new Set(this.productosFiltrados.map((o=>o.producto_categoria)))]}},methods:{async actualizarOG(){document.title=this.nombreNegocio,document.querySelector('meta[name="title"]').setAttribute("content",this.nombreNegocio),document.querySelector('meta[property="og:title"]').setAttribute("content",this.nombreNegocio),document.querySelector('meta[name="twitter:title"]').setAttribute("content",this.nombreNegocio),document.querySelector('meta[itemprop="title"]').setAttribute("content",this.nombreNegocio),document.querySelector('meta[name="description"]').setAttribute("content",this.negocio.descripcion),document.querySelector('meta[name="DC.description"]').setAttribute("content",this.negocio.descripcion),document.querySelector('meta[property="og:description"]').setAttribute("content",this.negocio.descripcion),document.querySelector('meta[itemprop="description"]').setAttribute("content",this.negocio.descripcion),document.querySelector('meta[property="og:image"]').setAttribute("content",this.negocio.imagen),document.querySelector('meta[name="twitter:image"]').setAttribute("content",this.negocio.imagen),document.querySelector('meta[itemprop="image"]').setAttribute("content",this.negocio.imagen),document.querySelector('meta[property="og:url"]').setAttribute("content",window.location.href)},handleScroll(){let o=window.pageYOffset||document.documentElement.scrollTop;this.isHidden=0===o},toggleCategoria(o){this.categoriaSeleccionada===o?this.categoriaSeleccionada=null:this.categoriaSeleccionada=o},async obtenerCarrito(){if(null!==sessionStorage.getItem("carrito")){this.carrito=JSON.parse(sessionStorage.getItem("carrito")),this.total=parseFloat(sessionStorage.getItem("total"));for(const o of this.productos){const a=this.carrito.findIndex((a=>a.producto_id===o.producto_id));-1!==a&&(o.cantidadSeleccionada=this.carrito[a].cantidadSeleccionada)}}null!==localStorage.getItem("pedido")&&(this.pedido=JSON.parse(localStorage.getItem("pedido")))},enviarMensaje(){const o=navigator.userAgent||navigator.vendor||window.opera,a=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(o);let e=a?"whatsapp://send":"https://web.whatsapp.com/send";const t=`Hola ${this.negocio.nombre}!`,r=`${e}?phone=${this.negocio.telefono}&text=${encodeURIComponent(t)}`;try{window.open(r),location.reload(1)}catch(i){ho().fire({icon:"error",text:"Por favor habilita las ventanas emergentes para ir a WhatsApp."+i.response.data.message})}},realizarPedido(){localStorage.setItem("pedido",JSON.stringify(this.pedido));const o=`¡Hola *${this.negocio.nombre}*! \nQuiero realizar un pedido:\n\n`,a=this.carrito.reduce(((o,a)=>{const e=a.producto_categoria;return o[e]||(o[e]=[]),o[e].push(a),o}),{});let e="";for(const u in a)e+=`*${u}:*\n`,a[u].forEach((o=>{e+=`- *${o.producto_nombre}:* $${o.producto_precio} (${o.cantidadSeleccionada})\n`})),e+="\n";const t=`*Total: $${this.total}*\n\n`;let r=`*Nombre:* ${this.pedido.nombre}\n*Medio de pago:* ${this.pedido.medio}\n`;this.pedido.direccion&&(r+=`*Dirección:* ${this.pedido.direccion}\n`),this.pedido.detalle&&(r+=`*Detalle:* ${this.pedido.detalle}\n`),r+="\n¡Muchas gracias!";const i=o+e+t+r;console.log(i);const n=navigator.userAgent||navigator.vendor||window.opera,c=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(n);let s=c?"whatsapp://send":"https://web.whatsapp.com/send";const l=`${s}?phone=${this.negocio.telefono}&text=${encodeURIComponent(i)}`;try{window.open(l),location.reload(1)}catch(d){ho().fire({icon:"error",text:"Por favor habilita las ventanas emergentes para ir a WhatsApp."+d.response.data.message})}},agregarAlCarrito(o){const a=this.carrito.findIndex((a=>a.producto_id===o.producto_id));-1!==a?(o.cantidadSeleccionada++,this.carrito[a].cantidadSeleccionada=o.cantidadSeleccionada,this.total+=Number(o.producto_precio)):(o.cantidadSeleccionada=1,this.carrito.push(o),this.total+=Number(o.producto_precio)),sessionStorage.setItem("carrito",JSON.stringify(this.carrito)),sessionStorage.setItem("total",JSON.stringify(this.total))},quitarDelCarrito(o){const a=this.carrito.findIndex((a=>a.producto_id===o.producto_id));-1!==a&&(o.cantidadSeleccionada--,this.carrito[a].cantidadSeleccionada=o.cantidadSeleccionada,this.total-=Number(o.producto_precio),0===this.carrito[a].cantidadSeleccionada&&this.carrito.splice(a,1)),sessionStorage.setItem("carrito",JSON.stringify(this.carrito)),sessionStorage.setItem("total",JSON.stringify(this.total))},limpiarCarrito(){sessionStorage.clear(),this.carrito=[],this.total=0,this.productos.forEach((o=>{o.cantidadSeleccionada=0}))},async obtenerInformacionNegocio(){try{const o=await t.A.get(`/negocio?usuario=${this.nombreUsuario}`);this.negocio=o.data,this.nombreNegocio=o.data.nombre,await this.fetchProductos()}catch(o){console.error("Error al cargar los productos:",o)}finally{this.cargando=!1}},scrollToCategoria(o){const a=document.getElementById(o);if(a){const o=document.querySelector(".navbar").offsetHeight,e=a.getBoundingClientRect().top;window.scrollTo({top:window.scrollY+e-o,behavior:"smooth"})}this.toggleCategoria(o)},scrollToInicio(){window.scrollTo({top:0,behavior:"smooth"})},collapseNavbar(){const o=document.querySelector(".navbar-toggler"),a=document.querySelector(".navbar-collapse");o&&a.classList.contains("show")&&o.click()},async fetchProductos(){try{const o=await t.A.get(`/productos?usuario=${this.nombreUsuario}`),a=o.data.filter((o=>o.producto_disponibilidad)),e=a.sort(((o,a)=>{const e=o.producto_nombre.toUpperCase(),t=a.producto_nombre.toUpperCase();return e<t?-1:e>t?1:0}));e.forEach((o=>{o.cantidadSeleccionada=0})),this.productos=e,this.obtenerCarrito()}catch(o){console.error("Error al cargar los productos:",o)}},async fetchPublicaciones(){try{const o=await t.A.get(`/publicaciones?usuario=${this.nombreUsuario}`);this.publicaciones=o.data.sort(((o,a)=>a.id-o.id))}catch(o){console.error(o)}},filteredProductos(o){return this.productosFiltrados.filter((a=>a.producto_categoria===o&&1===a.producto_disponibilidad))},limpiarBusqueda(){this.busqueda=""},agrandarPublicacion(o){this.indiceAgrandada=o,this.publicacionAgrandada=o},cerrarAgrandarPublicacion(){this.indiceAgrandada=null,this.publicacionAgrandada=null}}};const ql=(0,m.A)(Nl,[["render",Tl],["__scopeId","data-v-3b4385dc"]]);var Xl=ql;const Fl=o=>((0,i.Qi)("data-v-4b4c3bb1"),o=o(),(0,i.jt)(),o),Ul={key:0,class:"pantalla-carga text-center"},Rl=Fl((()=>(0,i.Lk)("div",{class:"logo-carga"},[(0,i.Lk)("img",{class:"logo-img",src:"/favicon.ico",width:"50",alt:""}),(0,i.Lk)("div",{class:"texto-carga"},"Cargando información")],-1))),Vl=[Rl],Dl={class:"container pt-4 mb-2 text-center"},zl={key:0},Ql=Fl((()=>(0,i.Lk)("h1",{class:"text-center"},"Perfil",-1))),Wl={class:"p-2 text-center"},$l={key:0,class:"textoTarjeta"},jl=Fl((()=>(0,i.Lk)("h4",{class:"titulo-div-forms mb-2 mt-2"},"Esta es una cuenta gratis.",-1))),Bl={key:1,class:"textoTarjeta"},Ol=Fl((()=>(0,i.Lk)("h4",{class:"titulo-div-forms mb-2 mt-2"},"Esta es una cuenta Premium.",-1))),Jl={class:"titulo-div-forms"},Gl={class:"col-md-6 m-auto"},Hl=Fl((()=>(0,i.Lk)("option",{value:"0"},"Menú (solo se muestran tus productos)",-1))),Kl=Fl((()=>(0,i.Lk)("option",{value:"1"},"Carrito (pedidos por WhatsApp)",-1))),Yl=[Hl,Kl],Zl=Fl((()=>(0,i.Lk)("hr",{class:"m-2"},null,-1))),od={class:"textoTarjeta"},ad={class:"table table-light table-striped"},ed=Fl((()=>(0,i.Lk)("thead",null,[(0,i.Lk)("th"),(0,i.Lk)("th")],-1))),td=Fl((()=>(0,i.Lk)("td",null,[(0,i.Lk)("strong",null,"Logo:")],-1))),rd={key:0},id=["src"],nd={key:1},cd=Fl((()=>(0,i.Lk)("td",null,[(0,i.Lk)("strong",null,"Portada:")],-1))),sd={key:0},ld=["src"],dd={key:1},ud=Fl((()=>(0,i.Lk)("td",null,[(0,i.Lk)("strong",null,"Nombre:")],-1))),pd=Fl((()=>(0,i.Lk)("td",null,[(0,i.Lk)("strong",null,"Correo:")],-1))),md=Fl((()=>(0,i.Lk)("td",null,[(0,i.Lk)("strong",null,"Teléfono:")],-1))),gd=Fl((()=>(0,i.Lk)("td",null,[(0,i.Lk)("strong",null,"Dirección:")],-1))),bd=Fl((()=>(0,i.Lk)("td",null,[(0,i.Lk)("strong",null,"Descripción:")],-1))),kd=Fl((()=>(0,i.Lk)("td",null,[(0,i.Lk)("strong",null,"Rubro:")],-1))),hd=Fl((()=>(0,i.Lk)("td",null,[(0,i.Lk)("strong",null,"Instagram:")],-1))),vd={key:0},fd={key:1},Ld=Fl((()=>(0,i.Lk)("td",null,[(0,i.Lk)("strong",null,"Facebook:")],-1))),Cd={key:0},yd={key:1},xd=Fl((()=>(0,i.Lk)("div",{class:"flex"},[(0,i.Lk)("button",{class:"btn btn-menu-danger","data-bs-toggle":"modal","data-bs-target":"#cerrarSesionModal2"}," Cerrar Sesión "),(0,i.Lk)("button",{class:"btn btn-menu",title:"Modificar","data-bs-toggle":"modal","data-bs-target":"#modificarProducto"},"Modificar Datos")],-1))),wd={class:"modal fade",id:"cerrarSesionModal2",tabindex:"-1","aria-labelledby":"cerrarSesionModal2Label","aria-hidden":"true"},Pd={class:"modal-dialog"},Ed={class:"modal-content"},Sd=Fl((()=>(0,i.Lk)("div",{class:"modal-header text-center"},[(0,i.Lk)("h1",{class:"modal-title fs-5",id:"cerrarSesionModal2Label"},"¿Cerrar sesión?"),(0,i.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1))),Md={class:"modal-footer text-center"},Id=Fl((()=>(0,i.Lk)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"No",-1))),_d=Fl((()=>(0,i.Lk)("br",null,null,-1))),Ad={class:"modal fade",id:"modificarProducto",tabindex:"-1","aria-labelledby":"modificarDatosLabel","aria-hidden":"true",ref:"modalModificar"},Td={class:"modal-dialog modal-dialog-centered"},Nd={class:"modal-content"},qd=Fl((()=>(0,i.Lk)("div",{class:"modal-header"},[(0,i.Lk)("h1",{class:"modal-title fs-5",id:"modificarDatosLabel"},"Modificar Datos"),(0,i.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1))),Xd={class:"modal-body"},Fd={class:"row g-3 div-forms text-start"},Ud=Fl((()=>(0,i.Lk)("h4",{class:"titulo-div-forms mb-2"},"Información del Negocio",-1))),Rd=Fl((()=>(0,i.Lk)("label",{class:"form-label",for:"nombre"},"Nombre",-1))),Vd=Fl((()=>(0,i.Lk)("label",{class:"form-label",for:"correo"},"Correo",-1))),Dd=Fl((()=>(0,i.Lk)("label",{class:"form-label",for:"telefono"},"Teléfono",-1))),zd=Fl((()=>(0,i.Lk)("label",{class:"form-label",for:"direccion"},"Dirección",-1))),Qd=Fl((()=>(0,i.Lk)("label",{class:"form-label",for:"descripcion"},"Descripción",-1))),Wd=Fl((()=>(0,i.Lk)("label",{class:"form-label",for:"rubro"},"Rubro",-1))),$d=(0,i.Fv)('<option value="Elegí tu rubro" selected disabled data-v-4b4c3bb1>Elegí tu rubro</option><option value="Artesanías" data-v-4b4c3bb1>Artesanías</option><option value="Bar/Restaurante" data-v-4b4c3bb1>Bar/Restaurante</option><option value="Carnicería" data-v-4b4c3bb1>Carnicería</option><option value="Consultorio" data-v-4b4c3bb1>Consultorio</option><option value="Estética" data-v-4b4c3bb1>Estética</option><option value="Farmacia" data-v-4b4c3bb1>Farmacia</option><option value="Ferretería" data-v-4b4c3bb1>Ferretería</option><option value="Fiambrería" data-v-4b4c3bb1>Fiambrería</option><option value="Florería" data-v-4b4c3bb1>Florería</option><option value="Heladería" data-v-4b4c3bb1>Heladería</option><option value="Indumentaria" data-v-4b4c3bb1>Indumentaria</option><option value="Inmobiliaria" data-v-4b4c3bb1>Inmobiliaria</option><option value="Juguetería" data-v-4b4c3bb1>Juguetería</option><option value="Librería" data-v-4b4c3bb1>Librería</option><option value="Limpieza" data-v-4b4c3bb1>Limpieza</option><option value="Panadería" data-v-4b4c3bb1>Panadería</option><option value="Peluquería" data-v-4b4c3bb1>Peluquería</option><option value="Polirubro" data-v-4b4c3bb1>Polirubro</option><option value="Pollería" data-v-4b4c3bb1>Pollería</option><option value="Repostería" data-v-4b4c3bb1>Repostería</option><option value="Rotisería" data-v-4b4c3bb1>Rotisería</option><option value="Reparación/mantenimiento" data-v-4b4c3bb1>Reparación/mantenimiento </option><option value="Servicios" data-v-4b4c3bb1>Servicios</option><option value="Supermercado" data-v-4b4c3bb1>Supermercado</option><option value="Tecnología" data-v-4b4c3bb1>Tecnología</option><option value="Verdulería" data-v-4b4c3bb1>Verdulería</option><option value="Veterinaria/Forrajería" data-v-4b4c3bb1>Veterinaria/Forrajería</option>',28),jd=[$d],Bd=Fl((()=>(0,i.Lk)("label",{class:"form-label",for:"instagram"},"Instagram",-1))),Od=Fl((()=>(0,i.Lk)("label",{class:"form-label",for:"facebook"},"Facebook",-1))),Jd=Fl((()=>(0,i.Lk)("label",{class:"form-label mr-2",for:"imagen"},"Logo (JPG/PNG)",-1))),Gd=Fl((()=>(0,i.Lk)("label",{class:"form-label mr-2",for:"portada"},"Portada (JPG/PNG)",-1))),Hd=Fl((()=>(0,i.Lk)("div",{class:"flex mt-3"},[(0,i.Lk)("button",{type:"button",class:"btn","data-bs-dismiss":"modal"},"Cerrar"),(0,i.Lk)("button",{class:"btn btn-menu",type:"submit","data-bs-dismiss":"modal"},"Modificar")],-1))),Kd={class:"modalCategoriaContainer text-center"},Yd={class:"modalCategoria"},Zd={class:"modal-dialog modal-dialog-centered"},ou={class:"modal-content"},au={class:"modal-header pl-2"},eu=Fl((()=>(0,i.Lk)("h1",{class:"modal-title fs-5",id:"agregarCategoriaLabel"},"Recortar Imagen",-1))),tu={class:"modal-body mt-2"},ru={class:"pantalla-cargas text-center"},iu=Fl((()=>(0,i.Lk)("div",{class:"logo-carga"},[(0,i.Lk)("img",{class:"logo-img",src:"/favicon.ico",width:"50",alt:""}),(0,i.Lk)("div",{class:"texto-carga"}," Cargando imagen ")],-1))),nu=[iu],cu={ref:"cropperImg",alt:"Croppear"},su={class:"modal-footer mt-2"},lu={class:"modalCategoriaContainer text-center"},du={class:"modalCategoria"},uu={class:"modal-dialog modal-dialog-centered"},pu={class:"modal-content"},mu={class:"modal-header pl-2"},gu=Fl((()=>(0,i.Lk)("h1",{class:"modal-title fs-5",id:"agregarCategoriaLabel"},"Recortar Imagen",-1))),bu={class:"modal-body mt-2"},ku={class:"pantalla-cargas text-center"},hu=Fl((()=>(0,i.Lk)("div",{class:"logo-carga"},[(0,i.Lk)("img",{class:"logo-img",src:"/favicon.ico",width:"50",alt:""}),(0,i.Lk)("div",{class:"texto-carga"}," Cargando imagen ")],-1))),vu=[hu],fu={ref:"cropperPortada",alt:"Croppear"},Lu={class:"modal-footer mt-2"};function Cu(o,a,e,t,n,c){const l=(0,i.g2)("NavbarComponent");return(0,i.uX)(),(0,i.CE)("div",null,[(0,i.bF)(l),n.obteniendoInfo?((0,i.uX)(),(0,i.CE)("div",Ul,Vl)):(0,i.Q3)("",!0),(0,i.Lk)("div",Dl,[n.negocio?((0,i.uX)(),(0,i.CE)("div",zl,[Ql,(0,i.Lk)("div",Wl,[n.esPremium?((0,i.uX)(),(0,i.CE)("div",$l,[jl,(0,i.Lk)("button",{onClick:a[0]||(a[0]=(...o)=>c.mejorarPlan&&c.mejorarPlan(...o)),class:"btn btn-agregar"},"Mejorar Plan")])):((0,i.uX)(),(0,i.CE)("div",Bl,[Ol,(0,i.Lk)("h4",Jl,"Vence: "+(0,s.v_)(n.fechaVence),1),(0,i.Lk)("div",Gl,[(0,i.eW)(" Tipo de Puestito: "),(0,i.bo)((0,i.Lk)("select",{class:"form-select selectTipo text-center",name:"tipo",id:"","onUpdate:modelValue":a[1]||(a[1]=o=>n.tipoPuestito=o),onChange:a[2]||(a[2]=(...o)=>c.cambiarTipoPuestito&&c.cambiarTipoPuestito(...o))},Yl,544),[[r.u1,n.tipoPuestito]])])])),Zl,(0,i.Lk)("div",od,[(0,i.Lk)("table",ad,[ed,(0,i.Lk)("tbody",null,[(0,i.Lk)("tr",null,[td,n.negocio.imagen?((0,i.uX)(),(0,i.CE)("td",rd,[(0,i.Lk)("img",{class:"imagen round",src:n.negocio.imagen,alt:" "},null,8,id)])):((0,i.uX)(),(0,i.CE)("td",nd,"Sin logo."))]),(0,i.Lk)("tr",null,[cd,n.negocio.portada?((0,i.uX)(),(0,i.CE)("td",sd,[(0,i.Lk)("img",{class:"imagen",src:n.negocio.portada,alt:" "},null,8,ld)])):((0,i.uX)(),(0,i.CE)("td",dd,"Sin portada."))]),(0,i.Lk)("tr",null,[ud,(0,i.Lk)("td",null,(0,s.v_)(n.negocio.nombre),1)]),(0,i.Lk)("tr",null,[pd,(0,i.Lk)("td",null,(0,s.v_)(n.negocio.correo),1)]),(0,i.Lk)("tr",null,[md,(0,i.Lk)("td",null,(0,s.v_)(n.negocio.telefono),1)]),(0,i.Lk)("tr",null,[gd,(0,i.Lk)("td",null,(0,s.v_)(n.negocio.direccion),1)]),(0,i.Lk)("tr",null,[bd,(0,i.Lk)("td",null,(0,s.v_)(n.negocio.descripcion),1)]),(0,i.Lk)("tr",null,[kd,(0,i.Lk)("td",null,(0,s.v_)(n.negocio.rubro),1)]),(0,i.Lk)("tr",null,[hd,n.negocio.instagram?((0,i.uX)(),(0,i.CE)("td",vd,(0,s.v_)(n.negocio.instagram),1)):((0,i.uX)(),(0,i.CE)("td",fd,"Sin instagram."))]),(0,i.Lk)("tr",null,[Ld,n.negocio.facebook?((0,i.uX)(),(0,i.CE)("td",Cd,(0,s.v_)(n.negocio.facebook),1)):((0,i.uX)(),(0,i.CE)("td",yd,"Sin facebook."))])])]),xd,(0,i.Lk)("div",wd,[(0,i.Lk)("div",Pd,[(0,i.Lk)("div",Ed,[Sd,(0,i.Lk)("div",Md,[Id,(0,i.Lk)("button",{type:"button",class:"btn btn-menu-danger","data-bs-dismiss":"modal",onClick:a[3]||(a[3]=(...o)=>c.cerrarSesion&&c.cerrarSesion(...o))},"Sí, cerrar sesión")])])])])]),_d]),(0,i.Lk)("div",Ad,[(0,i.Lk)("div",Td,[(0,i.Lk)("div",Nd,[qd,(0,i.Lk)("div",Xd,[(0,i.Lk)("form",{onSubmit:a[14]||(a[14]=(0,r.D$)(((...o)=>c.modificarPerfil&&c.modificarPerfil(...o)),["prevent"]))},[(0,i.Lk)("div",Fd,[Ud,(0,i.Lk)("div",null,[Rd,(0,i.bo)((0,i.Lk)("input",{class:"form-control",type:"text",id:"nombre",name:"nombre","onUpdate:modelValue":a[4]||(a[4]=o=>n.negocioModificar.nombre=o),placeholder:"Nombre del Negocio",required:""},null,512),[[r.Jo,n.negocioModificar.nombre]])]),(0,i.Lk)("div",null,[Vd,(0,i.bo)((0,i.Lk)("input",{class:"form-control",type:"email",id:"correo","onUpdate:modelValue":a[5]||(a[5]=o=>n.negocioModificar.correo=o),placeholder:"Correo"},null,512),[[r.Jo,n.negocioModificar.correo]])]),(0,i.Lk)("div",null,[Dd,(0,i.bo)((0,i.Lk)("input",{class:"form-control",type:"number",id:"telefono","onUpdate:modelValue":a[6]||(a[6]=o=>n.negocioModificar.telefono=o),placeholder:"Teléfono"},null,512),[[r.Jo,n.negocioModificar.telefono]])]),(0,i.Lk)("div",null,[zd,(0,i.bo)((0,i.Lk)("input",{class:"form-control",type:"text",id:"direccion","onUpdate:modelValue":a[7]||(a[7]=o=>n.negocioModificar.direccion=o),placeholder:"Dirección"},null,512),[[r.Jo,n.negocioModificar.direccion]])]),(0,i.Lk)("div",null,[Qd,(0,i.bo)((0,i.Lk)("input",{class:"form-control",type:"text",id:"descripcion","onUpdate:modelValue":a[8]||(a[8]=o=>n.negocioModificar.descripcion=o),placeholder:"Descripción",maxlength:"40"},null,512),[[r.Jo,n.negocioModificar.descripcion]])]),(0,i.Lk)("div",null,[Wd,(0,i.bo)((0,i.Lk)("select",{class:"form-select",name:"rubro",id:"rubro","onUpdate:modelValue":a[9]||(a[9]=o=>n.negocioModificar.rubro=o)},jd,512),[[r.u1,n.negocioModificar.rubro]])]),(0,i.Lk)("div",null,[Bd,(0,i.bo)((0,i.Lk)("input",{class:"form-control",type:"text",id:"instagram","onUpdate:modelValue":a[10]||(a[10]=o=>n.negocioModificar.instagram=o),placeholder:"Instagram"},null,512),[[r.Jo,n.negocioModificar.instagram]])]),(0,i.Lk)("div",null,[Od,(0,i.bo)((0,i.Lk)("input",{class:"form-control",type:"text",id:"facebook","onUpdate:modelValue":a[11]||(a[11]=o=>n.negocioModificar.facebook=o),placeholder:"Facebook"},null,512),[[r.Jo,n.negocioModificar.facebook]])]),(0,i.Lk)("div",null,[Jd,(0,i.Lk)("input",{class:"form-control",type:"file",name:"imagen",id:"imagen",accept:"image/jpeg, image/png",onChange:a[12]||(a[12]=(...o)=>c.imagenSeleccionada&&c.imagenSeleccionada(...o))},null,32)]),(0,i.Lk)("div",null,[Gd,(0,i.Lk)("input",{class:"form-control",type:"file",name:"portada",id:"portada",accept:"image/jpeg, image/png",onChange:a[13]||(a[13]=(...o)=>c.portadaSeleccionada&&c.portadaSeleccionada(...o))},null,32)])]),Hd],32)])])])],512),(0,i.bo)((0,i.Lk)("div",Kd,[(0,i.Lk)("div",Yd,[(0,i.Lk)("div",Zd,[(0,i.Lk)("div",ou,[(0,i.Lk)("div",au,[eu,(0,i.Lk)("button",{type:"button",class:"btn-close",onClick:a[15]||(a[15]=(...o)=>c.cerrarCrop&&c.cerrarCrop(...o)),"aria-label":"Close"})]),(0,i.Lk)("div",tu,[(0,i.bo)((0,i.Lk)("div",ru,nu,512),[[r.aG,n.cargandoCropper]]),(0,i.Lk)("img",cu,null,512)]),(0,i.Lk)("div",su,[(0,i.Lk)("button",{type:"button",class:"btn",onClick:a[16]||(a[16]=(...o)=>c.cerrarCrop&&c.cerrarCrop(...o))},"Cerrar"),(0,i.Lk)("button",{class:"btn btn-menu",onClick:a[17]||(a[17]=(...o)=>c.guardarImagenRecortada&&c.guardarImagenRecortada(...o))},"Recortar")])])])])],512),[[r.aG,n.modalCropImage]]),(0,i.bo)((0,i.Lk)("div",lu,[(0,i.Lk)("div",du,[(0,i.Lk)("div",uu,[(0,i.Lk)("div",pu,[(0,i.Lk)("div",mu,[gu,(0,i.Lk)("button",{type:"button",class:"btn-close",onClick:a[18]||(a[18]=(...o)=>c.cerrarCropPortada&&c.cerrarCropPortada(...o)),"aria-label":"Close"})]),(0,i.Lk)("div",bu,[(0,i.bo)((0,i.Lk)("div",ku,vu,512),[[r.aG,n.cargandoCropperPortada]]),(0,i.Lk)("img",fu,null,512)]),(0,i.Lk)("div",Lu,[(0,i.Lk)("button",{type:"button",class:"btn",onClick:a[19]||(a[19]=(...o)=>c.cerrarCropPortada&&c.cerrarCropPortada(...o))},"Cerrar"),(0,i.Lk)("button",{class:"btn btn-menu",onClick:a[20]||(a[20]=(...o)=>c.guardarPortadaRecortada&&c.guardarPortadaRecortada(...o))},"Recortar")])])])])],512),[[r.aG,n.modalCropPortada]])])):(0,i.Q3)("",!0)])])}var yu={components:{NavbarComponent:Si},data(){return{obteniendoInfo:!1,cargandoCropper:!0,cargandoCropperPortada:!0,modalCropImage:!1,modalCropPortada:!1,cropper:null,cropperPortada:null,imageToCrop:"",fechaVence:"","añoVence":"",negocio:"",negocioModificar:"",tipoPuestito:"",esPremium:""}},mounted(){},created(){this.obtenerInformacionNegocio()},methods:{cerrarSesion(){localStorage.clear(),$g.push("/")},mejorarPlan(){$g.push("/u/planes")},modificarPerfil(){this.obteniendoInfo=!0,t.A.put("/modificarPerfil",{negocio:this.negocioModificar}).then((()=>{localStorage.setItem("nombre",this.negocioModificar.nombre);const o=ho().mixin({toast:!0,position:"bottom-end",showConfirmButton:!1,timer:1e3,timerProgressBar:!0,didOpen:o=>{o.addEventListener("mouseenter",ho().stopTimer),o.addEventListener("mouseleave",ho().resumeTimer)}});o.fire({icon:"success",title:"Datos modificados."}),setTimeout((function(){location.reload()}),1e3)})).catch((o=>{console.error("Error al actualizar la información en la base de datos:",o),this.obteniendoInfo=!1})).finally((()=>{this.obteniendoInfo=!1}))},async obtenerInformacionNegocio(){try{this.obteniendoInfo=!0;const o=await t.A.get(`/miNegocio?usuario=${localStorage.getItem("usuario")}`);this.negocio=o.data,this.tipoPuestito=this.negocio.tipo,this.negocioModificar=o.data;const a=new Date(o.data.fechaVence);this.añoVence=a.getFullYear();const e=new Date;this.esPremium=e>=a,this.fechaVence=a.getDate()+"/"+(Number(a.getMonth())+1)+"/"+a.getFullYear()}catch(o){console.error("Error al cargar los productos:",o)}finally{this.obteniendoInfo=!1}},async cambiarTipoPuestito(){try{await t.A.put("/cambiarTipoPuestito",{tipo:this.tipoPuestito,usuario:this.negocio.usuario})}catch(o){console.error("Error al cambiar el tipo: ",o)}},portadaSeleccionada(o){try{const a=o.target.files[0];if(a){const o=new FileReader;o.onload=async o=>{this.imageToCrop=o.target.result,this.modalCropPortada=!0,window.scrollTo({top:0,behavior:"smooth"});let a=this.$refs.cropperPortada;a.src=this.imageToCrop,this.$nextTick((()=>{const o=document.querySelector("cropper-canvas");o&&o.parentNode.removeChild(o),this.cropperPortada=new tt.Ay(a,{template:"<cropper-canvas background style='height:50vh;'>\n                                    <cropper-image  initial-center-size='contain' alt='Crop' scalable=true translatable></cropper-image>\n                                        <cropper-shade hidden></cropper-shade>\n                                        <cropper-handle  action='move' plain></cropper-handle>\n                                        <cropper-selection initial-coverage='0.5' aspect-ratio='0.75'  movable resizable>\n                                            <cropper-grid role='grid' covered></cropper-grid>\n                                            <cropper-crosshair centered></cropper-crosshair>\n                                            <cropper-handle action='move'\n                                                theme-color='rgba(255, 255, 255, 0.35)'></cropper-handle>\n                                            <cropper-handle action='ne-resize'></cropper-handle>\n                                            <cropper-handle action='nw-resize'></cropper-handle>\n                                            <cropper-handle action='se-resize'></cropper-handle>\n                                            <cropper-handle action='sw-resize'></cropper-handle>\n                                        </cropper-selection>\n                                    </cropper-canvas >"})}))},o.readAsDataURL(a)}}catch(a){console.log(a)}finally{this.cargandoCropperPortada=!1}},async guardarPortadaRecortada(){try{const o=await this.cropperPortada.getCropperSelection().$toCanvas();this.negocioModificar.portada=o.toDataURL()}catch(o){console.error("Error al guardar la imagen recortada:",o)}finally{this.modalCropPortada=!1}},imagenSeleccionada(o){try{const a=o.target.files[0];if(a){const o=new FileReader;o.onload=async o=>{this.imageToCrop=o.target.result,this.modalCropImage=!0,window.scrollTo({top:0,behavior:"smooth"});let a=this.$refs.cropperImg;a.src=this.imageToCrop,this.$nextTick((()=>{const o=document.querySelector("cropper-canvas");o&&o.parentNode.removeChild(o),this.cropper=new tt.Ay(a,{template:"<cropper-canvas background style='height:50vh;'>\n                                    <cropper-image  initial-center-size='contain' alt='Crop' scalable=true translatable></cropper-image>\n                                        <cropper-shade hidden></cropper-shade>\n                                        <cropper-handle  action='move' plain></cropper-handle>\n                                        <cropper-selection initial-coverage='0.5' aspect-ratio='1'  movable resizable>\n                                            <cropper-grid role='grid' covered></cropper-grid>\n                                            <cropper-crosshair centered></cropper-crosshair>\n                                            <cropper-handle action='move'\n                                                theme-color='rgba(255, 255, 255, 0.35)'></cropper-handle>\n                                            <cropper-handle action='ne-resize'></cropper-handle>\n                                            <cropper-handle action='nw-resize'></cropper-handle>\n                                            <cropper-handle action='se-resize'></cropper-handle>\n                                            <cropper-handle action='sw-resize'></cropper-handle>\n                                        </cropper-selection>\n                                    </cropper-canvas >"})}))},o.readAsDataURL(a)}}catch(a){console.log(a)}finally{this.cargandoCropper=!1}},async guardarImagenRecortada(){try{const o=await this.cropper.getCropperSelection().$toCanvas();this.negocioModificar.imagen=o.toDataURL()}catch(o){console.error("Error al guardar la imagen recortada:",o)}finally{this.modalCropImage=!1}},cerrarCrop(){this.modalCropImage=!1},cerrarCropPortada(){this.modalCropPortada=!1}}};const xu=(0,m.A)(yu,[["render",Cu],["__scopeId","data-v-4b4c3bb1"]]);var wu=xu;const Pu=o=>((0,i.Qi)("data-v-4c3bd0d8"),o=o(),(0,i.jt)(),o),Eu={class:"contenedor"},Su={class:"mt-4 mb-4"},Mu=Pu((()=>(0,i.Lk)("h1",{class:"text-center"},"¡Potenciá tu negocio!",-1))),Iu=Pu((()=>(0,i.Lk)("hr",null,null,-1))),_u={key:0},Au={class:"row justify-content-center text-center mb-4"},Tu={class:"col-md-6"},Nu=Pu((()=>(0,i.Lk)("div",{class:"titulo-plan"},[(0,i.Lk)("h3",null,"Menú Online")],-1))),qu={class:"border mt-2 p-2 text-center"},Xu=Pu((()=>(0,i.Lk)("div",{class:"titulo-plan"}," Gratis ",-1))),Fu=Pu((()=>(0,i.Lk)("ul",{class:"text-start"},[(0,i.Lk)("li",null,"✅ Página + Menú online."),(0,i.Lk)("li",null,"✅ Visualización en nuestra plataforma."),(0,i.Lk)("li",null,"✅ Código QR para el menú."),(0,i.Lk)("li",null,"⚠️ Carrito y pedidos por WhatsApp.")],-1))),Uu={class:"gris mt-2"},Ru=Pu((()=>(0,i.Lk)("br",null,null,-1))),Vu=Pu((()=>(0,i.Lk)("hr",null,null,-1))),Du={class:"row justify-content-center text-center"},zu=Pu((()=>(0,i.Lk)("div",{class:"col-md-6"},[(0,i.Lk)("div",{class:"titulo-plan"},[(0,i.Lk)("h3",null,"Carrito Online")]),(0,i.Lk)("div",{class:"mt-2 p-2 text-center"},[(0,i.Lk)("ul",{class:"text-start"},[(0,i.Lk)("li",null,"✅ Página + Menú online."),(0,i.Lk)("li",null,"✅ Visualización en nuestra plataforma."),(0,i.Lk)("li",null,"✅ Código QR para el menú."),(0,i.Lk)("li",null,"✅ Carrito y pedidos por WhatsApp.")])])],-1))),Qu={class:"col-md-12"},Wu={class:"mt-2 text-center"},$u={class:"border p-2 m-2 col-md-3"},ju=Pu((()=>(0,i.Lk)("div",{class:"titulo-plan"}," 1 Mes ",-1))),Bu=Pu((()=>(0,i.Lk)("div",{class:"precio-plan"}," $2500 ",-1))),Ou=Pu((()=>(0,i.Lk)("img",{src:"/recursos/mercadopago.png",width:"50",alt:""},null,-1))),Ju=Pu((()=>(0,i.Lk)("br",null,null,-1))),Gu={class:"border p-2 m-2 col-md-3"},Hu=Pu((()=>(0,i.Lk)("div",{class:"titulo-plan"}," 6 Meses ",-1))),Ku=Pu((()=>(0,i.Lk)("div",{class:"precio-plan"}," $12500 ",-1))),Yu=Pu((()=>(0,i.Lk)("img",{src:"/recursos/mercadopago.png",width:"50",alt:""},null,-1))),Zu=Pu((()=>(0,i.Lk)("br",null,null,-1))),op={class:"border p-2 m-2 col-md-3"},ap=Pu((()=>(0,i.Lk)("div",{class:"titulo-plan"}," 12 Meses ",-1))),ep=Pu((()=>(0,i.Lk)("div",{class:"precio-plan"}," $20000 ",-1))),tp=Pu((()=>(0,i.Lk)("img",{src:"/recursos/mercadopago.png",width:"50",alt:""},null,-1))),rp=Pu((()=>(0,i.Lk)("br",null,null,-1)));function ip(o,a,e,t,r,n){const c=(0,i.g2)("NavbarPublicoComponent");return(0,i.uX)(),(0,i.CE)("div",null,[(0,i.bF)(c),(0,i.Lk)("div",Eu,[(0,i.Lk)("div",Su,[Mu,Iu,r.usuario?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",_u,[(0,i.Lk)("div",Au,[(0,i.Lk)("div",Tu,[Nu,(0,i.Lk)("div",qu,[Xu,Fu,(0,i.Lk)("div",Uu,[(0,i.eW)("⚠️ = 1 mes gratis "),Ru,(0,i.Lk)("button",{class:"btn btn-menu mt-2",onClick:a[0]||(a[0]=o=>n.elegirPlan(""))},"REGISTRAR")])])])]),Vu])),(0,i.Lk)("div",Du,[zu,(0,i.Lk)("div",Qu,[(0,i.Lk)("div",Wu,[(0,i.Lk)("div",$u,[ju,Bu,(0,i.Lk)("button",{class:"btn btn-menu",onClick:a[1]||(a[1]=o=>n.elegirPlan(1))},[Ou,(0,i.eW)("CONTRATAR"),Ju,(0,i.eW)("(MercadoPago)")])]),(0,i.Lk)("div",Gu,[Hu,Ku,(0,i.Lk)("button",{class:"btn btn-menu",onClick:a[2]||(a[2]=o=>n.elegirPlan(6))},[Yu,(0,i.eW)("CONTRATAR"),Zu,(0,i.eW)("(MercadoPago)")])]),(0,i.Lk)("div",op,[ap,ep,(0,i.Lk)("button",{class:"btn btn-menu",onClick:a[3]||(a[3]=o=>n.elegirPlan(12))},[tp,(0,i.eW)("CONTRATAR"),rp,(0,i.eW)("(MercadoPago)")])])])])])])])])}var np={data(){return{usuario:""}},components:{NavbarPublicoComponent:et},mounted(){this.usuario=localStorage.getItem("usuario")},methods:{elegirPlan(o){o?(localStorage.setItem("plan",o),$g.push("/u/registrar")):(console.log("plan nulo"),localStorage.clear(),$g.push("/u/registrar"))}}};const cp=(0,m.A)(np,[["render",ip],["__scopeId","data-v-4c3bd0d8"]]);var sp=cp;const lp=o=>((0,i.Qi)("data-v-338346ac"),o=o(),(0,i.jt)(),o),dp={key:0,class:"pantalla-carga text-center"},up=lp((()=>(0,i.Lk)("div",{class:"logo-carga"},[(0,i.Lk)("img",{class:"logo-img",src:"/favicon.ico",width:"50",alt:""}),(0,i.Lk)("div",{class:"texto-carga"},"Cargando...")],-1))),pp=[up],mp={key:1},gp={class:"contenedor text-center"},bp={class:"caja"},kp=lp((()=>(0,i.Lk)("img",{src:"/recursos/approve.png",width:"100"},null,-1))),hp=lp((()=>(0,i.Lk)("h1",null,"Pago Aprobado.",-1))),vp=lp((()=>(0,i.Lk)("p",null," Ya puedes cerrar esta ventana. ",-1))),fp={key:2},Lp={class:"contenedor text-center"},Cp={class:"caja"},yp=lp((()=>(0,i.Lk)("img",{src:"/recursos/decline.png",width:"100"},null,-1))),xp=lp((()=>(0,i.Lk)("h1",null,"No se pudo realizar el pago.",-1))),wp={key:3},Pp={class:"contenedor text-center"},Ep={class:"caja"},Sp=lp((()=>(0,i.Lk)("img",{src:"/recursos/pending.png",width:"100"},null,-1))),Mp=lp((()=>(0,i.Lk)("h1",null,"Pago Pendiente.",-1)));function Ip(o,a,e,t,r,n){const c=(0,i.g2)("NavbarPublicoComponent"),s=(0,i.g2)("router-link");return(0,i.uX)(),(0,i.CE)("div",null,[(0,i.bF)(c),r.cargando?((0,i.uX)(),(0,i.CE)("div",dp,pp)):(0,i.Q3)("",!0),"approved"==r.estado?((0,i.uX)(),(0,i.CE)("div",mp,[(0,i.Lk)("div",gp,[(0,i.Lk)("div",bp,[kp,hp,vp,(0,i.Lk)("button",{class:"btn btn-menu mt-2",onClick:a[0]||(a[0]=(...o)=>n.cerrarVentana&&n.cerrarVentana(...o))},"Cerrar")])])])):(0,i.Q3)("",!0),"failure"==r.estado||"null"==r.estado?((0,i.uX)(),(0,i.CE)("div",fp,[(0,i.Lk)("div",Lp,[(0,i.Lk)("div",Cp,[yp,xp,(0,i.bF)(s,{class:"btn btn-menu mt-3",to:"/u/login"},{default:(0,i.k6)((()=>[(0,i.eW)("Volver")])),_:1})])])])):(0,i.Q3)("",!0),"pending"==r.estado?((0,i.uX)(),(0,i.CE)("div",wp,[(0,i.Lk)("div",Pp,[(0,i.Lk)("div",Ep,[Sp,Mp,(0,i.bF)(s,{class:"btn btn-menu mt-3",to:"/u/login"},{default:(0,i.k6)((()=>[(0,i.eW)("Volver")])),_:1})])])])):(0,i.Q3)("",!0)])}var _p={components:{NavbarPublicoComponent:et},data(){return{estado:"",ref:"",cargando:!0}},mounted(){this.guardarPago()},methods:{cerrarVentana(){window.close()},async guardarPago(){const o=this.$route.query;try{const a=await t.A.post("/facturar/webhook",o);this.estado=a.data}catch(a){console.log(a)}finally{this.cargando=!1}}}};const Ap=(0,m.A)(_p,[["render",Ip],["__scopeId","data-v-338346ac"]]);var Tp=Ap;const Np={class:"container mt-2 col-md-6"},qp={class:"border p-2"},Xp=(0,i.Lk)("h3",null,"Calcular el % entre 2 números:",-1),Fp=(0,i.Lk)("hr",null,null,-1),Up=(0,i.Lk)("h5",null,"Número Mayor",-1),Rp=(0,i.Lk)("h5",null,"Número Menor",-1),Vp={key:0,class:"text-center mt-2"},Dp={class:"border p-2 mt-2"},zp=(0,i.Lk)("h3",null,"Convertir archivo en audio:",-1),Qp=(0,i.Lk)("hr",null,null,-1),Wp={key:0},$p=(0,i.Lk)("div",{class:"text-center"},"Listo",-1),jp=[$p],Bp={key:1},Op=(0,i.Lk)("div",{class:"text-center"},"Procesando...",-1),Jp=[Op],Gp=["disabled"],Hp={key:2},Kp={class:"border p-2 mt-2"},Yp=(0,i.Lk)("h3",null,"Convertir audio en texto:",-1),Zp=(0,i.Lk)("hr",null,null,-1),om={key:0},am=(0,i.Lk)("div",{class:"text-center"},"Procesando...",-1),em=[am],tm={key:1},rm={class:"text-center mt-2"},im=["disabled"];function nm(o,a,e,t,n,c){return(0,i.uX)(),(0,i.CE)("div",Np,[(0,i.Lk)("div",qp,[Xp,Fp,Up,(0,i.bo)((0,i.Lk)("input",{class:"form-control",type:"number","onUpdate:modelValue":a[0]||(a[0]=o=>n.primerValor=o)},null,512),[[r.Jo,n.primerValor]]),Rp,(0,i.bo)((0,i.Lk)("input",{class:"form-control",type:"number","onUpdate:modelValue":a[1]||(a[1]=o=>n.segundoValor=o)},null,512),[[r.Jo,n.segundoValor]]),(0,i.Lk)("div",null,[(0,i.Lk)("button",{class:"btn btn-primary mt-2",onClick:a[2]||(a[2]=(...o)=>c.calcular&&c.calcular(...o))},"Calcular")]),(0,i.Lk)("div",null,[n.resultado?((0,i.uX)(),(0,i.CE)("h4",Vp," El porcentaje que existe entre los números es el "+(0,s.v_)(n.resultado)+"% ",1)):(0,i.Q3)("",!0)])]),(0,i.Lk)("div",Dp,[zp,Qp,(0,i.Lk)("input",{class:"form-control",type:"file",onChange:a[3]||(a[3]=(...o)=>c.handleFileUpload&&c.handleFileUpload(...o)),accept:"image/*,.pdf"},null,32),n.ocrResult?((0,i.uX)(),(0,i.CE)("div",Wp,jp)):(0,i.Q3)("",!0),n.loading?((0,i.uX)(),(0,i.CE)("div",Bp,Jp)):(0,i.Q3)("",!0),(0,i.Lk)("div",null,[(0,i.Lk)("button",{class:"btn btn-primary mt-2",disabled:!n.ocrResult,onClick:a[4]||(a[4]=(...o)=>c.convertirATextoAVoz&&c.convertirATextoAVoz(...o))},"Descargar Audio",8,Gp)]),n.descargando?((0,i.uX)(),(0,i.CE)("div",Hp,"Descargando...")):(0,i.Q3)("",!0)]),(0,i.Lk)("div",Kp,[Yp,Zp,(0,i.Lk)("input",{class:"form-control",type:"file",onChange:a[5]||(a[5]=(...o)=>c.manejarSubidaAudio&&c.manejarSubidaAudio(...o))},null,32),n.loading2?((0,i.uX)(),(0,i.CE)("div",om,em)):(0,i.Q3)("",!0),n.transcripcion?((0,i.uX)(),(0,i.CE)("div",tm,[(0,i.Lk)("p",rm,(0,s.v_)(n.transcripcion),1)])):(0,i.Q3)("",!0),(0,i.Lk)("div",null,[(0,i.Lk)("button",{class:"btn btn-primary mt-2",onClick:a[6]||(a[6]=(...o)=>c.descargarTexto&&c.descargarTexto(...o)),disabled:!n.transcripcion},"Descargar Texto",8,im)])])])}e(4979),e(4603),e(7566),e(8721);var cm=e(3216),sm=e.n(cm),lm=e(2553);lm.EA.workerSrc="/pdf.worker.js";var dm={data(){return{primerValor:"",segundoValor:"",resultado:"",ocrResult:null,loading:!1,googleApiKey:"AIzaSyDXluz9Jo4X2O_KMvVXoPz8GrBJnHZ1dcE",audioUrl:null,descargando:!1,loading2:!1,transcripcion:""}},methods:{async manejarSubidaAudio(o){const a=o.target.files[0];if(a){this.loading2=!0;const o=new FormData;o.append("audio",a);try{const a=await t.A.post("/transcribe",o,{headers:{"Content-Type":"multipart/form-data"}});this.transcripcion=a.data.transcription}catch(e){console.error("Error en la transcripción:",e)}finally{this.loading2=!1}}},descargarTexto(){const o=document.createElement("a"),a=new Blob([this.transcripcion],{type:"text/plain"});o.href=URL.createObjectURL(a),o.download="transcripcion.txt",document.body.appendChild(o),o.click()},calcular(){this.resultado=100*(this.primerValor-this.segundoValor)/this.segundoValor},handleFileUpload(o){const a=o.target.files[0];a&&(this.loading=!0,"application/pdf"===a.type?this.processPDF(a):this.processImage(a))},processImage(o){const a=new FileReader;a.onload=()=>{sm().recognize(a.result,"spa",{}).then((({data:{text:o}})=>{this.ocrResult=o,this.loading=!1})).catch((o=>{console.error(o),this.loading=!1}))},a.readAsDataURL(o)},async processPDF(o){const a=new FileReader;a.onload=async()=>{const o=new Uint8Array(a.result),e=await lm.YE({data:o}).promise;let t="";for(let a=1;a<=e.numPages;a++){const o=await e.getPage(a),r=o.getViewport({scale:1}),i=document.createElement("canvas"),n=i.getContext("2d");i.height=r.height,i.width=r.width,await o.render({canvasContext:n,viewport:r}).promise;const c=i.toDataURL(),{data:{text:s}}=await sm().recognize(c,"spa");t+=s+"\n"}this.ocrResult=t,this.loading=!1},a.readAsArrayBuffer(o)},async convertirATextoAVoz(){try{this.descargando=!0;const o=`https://texttospeech.googleapis.com/v1/text:synthesize?key=${this.googleApiKey}`,a=await fetch(o,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({input:{text:this.ocrResult},voice:{languageCode:"es-ES",name:"es-ES-Standard-B",ssmlGender:"FEMALE"},audioConfig:{audioEncoding:"MP3"}})});if(!a.ok)throw new Error(`Error al generar el audio: ${a.status} ${a.statusText}`);const{audioContent:e}=await a.json(),t=this.base64ToBlob(e,"audio/mp3"),r=URL.createObjectURL(t),i=document.createElement("a");i.style.display="none",i.href=r,i.download="audio.mp3",document.body.appendChild(i),i.click(),URL.revokeObjectURL(r)}catch(o){console.error("Error al convertir texto a voz:",o)}finally{this.descargando=!1}},base64ToBlob(o,a){const e=atob(o),t=[];for(let r=0;r<e.length;r+=512){const o=e.slice(r,r+512),a=new Array(o.length);for(let e=0;e<o.length;e++)a[e]=o.charCodeAt(e);const i=new Uint8Array(a);t.push(i)}return new Blob(t,{type:a})}}};const um=(0,m.A)(dm,[["render",nm]]);var pm=um;const mm=o=>((0,i.Qi)("data-v-729d4d61"),o=o(),(0,i.jt)(),o),gm={class:"div-forms pt-4 text-center"},bm=mm((()=>(0,i.Lk)("h2",{class:"titulo-div-forms mb-2"},"Tu código QR",-1))),km={class:"col-md-6"},hm=mm((()=>(0,i.Lk)("label",{class:"form-label",for:"qrText"},"Texto de arriba:",-1))),vm={class:"flex"},fm={class:"col-md-6"},Lm=mm((()=>(0,i.Lk)("label",{class:"form-label mt-2",for:"qrTitle"},"Texto de abajo:",-1))),Cm={class:"flex"},ym={class:"col-md-6"},xm={class:"justify-content-center"},wm=mm((()=>(0,i.Lk)("label",{class:"form-label mt-2",for:"qrPortada"},"Utilizar portada como fondo",-1))),Pm=mm((()=>(0,i.Lk)("br",null,null,-1))),Em={key:0,class:"col-md-"},Sm=mm((()=>(0,i.Lk)("label",{for:"qrFondoColor",class:"form-label mt-2"},"Color de fondo",-1))),Mm=mm((()=>(0,i.Lk)("br",null,null,-1))),Im={ref:"contenido",class:"mt-4 position-relative"},_m=["src"],Am={class:"p-4 frente"},Tm=["href"],Nm=mm((()=>(0,i.Lk)("br",null,null,-1))),qm={class:"col-md-6"};function Xm(o,a,e,t,n,c){const l=(0,i.g2)("NavbarComponent"),d=(0,i.g2)("router-link");return(0,i.uX)(),(0,i.CE)("div",null,[(0,i.bF)(l),(0,i.Lk)("div",gm,[bm,(0,i.Lk)("div",km,[hm,(0,i.Lk)("div",vm,[(0,i.bo)((0,i.Lk)("input",{class:"form-control",name:"qrText",type:"text","onUpdate:modelValue":a[0]||(a[0]=o=>n.qrText=o)},null,512),[[r.Jo,n.qrText]]),(0,i.bo)((0,i.Lk)("input",{class:"form-control-color",type:"color",name:"qrTextColor","onUpdate:modelValue":a[1]||(a[1]=o=>n.qrTextColor=o)},null,512),[[r.Jo,n.qrTextColor]])])]),(0,i.Lk)("div",fm,[Lm,(0,i.Lk)("div",Cm,[(0,i.bo)((0,i.Lk)("input",{class:"form-control",name:"qrTitle",type:"text","onUpdate:modelValue":a[2]||(a[2]=o=>n.qrTitle=o)},null,512),[[r.Jo,n.qrTitle]]),(0,i.bo)((0,i.Lk)("input",{class:"form-control-color",type:"color",name:"qrTitleColor","onUpdate:modelValue":a[3]||(a[3]=o=>n.qrTitleColor=o)},null,512),[[r.Jo,n.qrTitleColor]])])]),(0,i.Lk)("div",ym,[(0,i.Lk)("div",xm,[wm,(0,i.bo)((0,i.Lk)("input",{class:"form-control-check",type:"checkbox",name:"qrPortada",id:"","onUpdate:modelValue":a[4]||(a[4]=o=>n.mostrarPortada=o)},null,512),[[r.lH,n.mostrarPortada]]),(0,i.eW)(),Pm,n.mostrarPortada?((0,i.uX)(),(0,i.Wv)(d,{key:0,to:"/u/modificar"},{default:(0,i.k6)((()=>[(0,i.eW)("Cambiar portada")])),_:1})):(0,i.Q3)("",!0)])]),n.mostrarPortada?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",Em,[Sm,(0,i.eW)(),Mm,(0,i.bo)((0,i.Lk)("input",{class:"form-control-color",type:"color",name:"qrFondoColor","onUpdate:modelValue":a[5]||(a[5]=o=>n.qrFondoColor=o)},null,512),[[r.Jo,n.qrFondoColor]])])),(0,i.Lk)("div",Im,[n.mostrarPortada?((0,i.uX)(),(0,i.CE)("img",{key:0,class:"portada",src:n.negocio.portada,alt:""},null,8,_m)):((0,i.uX)(),(0,i.CE)("div",{key:1,class:"fondoColor",style:(0,s.Tr)({backgroundColor:n.qrFondoColor})},null,4)),(0,i.Lk)("div",Am,[(0,i.Lk)("h5",{class:"mt-2 qr-text-consulta",style:(0,s.Tr)({color:n.qrTextColor})},[(0,i.eW)((0,s.v_)(n.qrText),1),(0,i.Lk)("p",{class:"qr-text",style:(0,s.Tr)({color:n.qrTitleColor})},(0,s.v_)(n.qrTitle),5)],4),(0,i.Lk)("a",{style:{color:"black","text-decoration":"none"},ref:"qrcode",href:"https://puestito.online/"+n.nombreUsuario,target:"_blank"},null,8,Tm),Nm])],512),(0,i.Lk)("div",qm,[(0,i.Lk)("button",{onClick:a[6]||(a[6]=(...o)=>c.descargarQR&&c.descargarQR(...o)),class:"btn btn-menu margenbtn"},"Descargar QR")])])])}var Fm=e(852),Um=e.n(Fm),Rm=e(788),Vm=e(2125),Dm=e.n(Vm),zm={data(){return{nombreUsuario:"",nombreNegocio:"",negocio:"",qrText:"",qrTitle:"",qrTextColor:"",qrTitleColor:"",qrFondoColor:"#FFFFFF",mostrarPortada:!0}},components:{NavbarComponent:Si,"router-link":f.Wk},mounted(){this.leerUsuario(),this.leerTextoQR(),"admin"!=this.nombreUsuario&&this.generarQR()},created(){this.obtenerInformacionNegocio()},methods:{leerTextoQR(){this.qrText=localStorage.getItem("qrText")||"CONSULTÁ EL",this.qrTitle=localStorage.getItem("qrTitle")||"MENÚ",this.qrTextColor=localStorage.getItem("qrTextColor")||"#000000",this.qrTitleColor=localStorage.getItem("qrTitleColor")||"#000000"},async obtenerInformacionNegocio(){try{this.obteniendoInfo=!0;const o=await t.A.get(`/miNegocio?usuario=${localStorage.getItem("usuario")}`);this.negocio=o.data}catch(o){console.error("Error al cargar los productos:",o)}finally{this.obteniendoInfo=!1}},generarQR(){const o=localStorage.getItem("nombre");if(o){const a=Um()(0,"L"),e=9;a.size=e;const t="https://puestito.online/"+o;a.addData(t),a.make(),this.renderQRCode(a.createImgTag(e,0))}},renderQRCode(o){const a=this.$refs.qrcode;a.innerHTML=o,a.innerHTML+='<div class="mt-2" style="color:white;background: black;border-radius: 10px;">puestito.online/'+this.nombreUsuario+"</div>"},leerUsuario(){this.nombreUsuario=localStorage.getItem("usuario"),this.nombreNegocio=localStorage.getItem("nombre")},esAdmin(){return"admin"==localStorage.getItem("usuario")},descargarQR(){const o=this.$refs.contenido;localStorage.setItem("qrText",this.qrText),localStorage.setItem("qrTitle",this.qrTitle),localStorage.setItem("qrTitleColor",this.qrTitleColor),localStorage.setItem("qrTextColor",this.qrTextColor),Dm()(o,{backgroundColor:null}).then((o=>{o.toBlob((o=>{(0,Rm.saveAs)(o,"contenido-"+this.nombreUsuario+".png")}))}))}}};const Qm=(0,m.A)(zm,[["render",Xm],["__scopeId","data-v-729d4d61"]]);var Wm=Qm;const $m=o=>((0,i.Qi)("data-v-4dcbf92f"),o=o(),(0,i.jt)(),o),jm={class:"pantalla-carga text-center"},Bm=$m((()=>(0,i.Lk)("div",{class:"logo-carga"},[(0,i.Lk)("img",{class:"logo-img",src:"/favicon.ico",width:"50",alt:""}),(0,i.Lk)("div",{class:"texto-carga"}," Subiendo Publicación ")],-1))),Om=[Bm],Jm={class:"container pt-4 text-center"},Gm=$m((()=>(0,i.Lk)("h1",null,"Subir Publicación",-1))),Hm=$m((()=>(0,i.Lk)("img",{src:"/recursos/back.png",width:"40",alt:""},null,-1))),Km={class:"col-md-6 m-auto text-start"},Ym=$m((()=>(0,i.Lk)("label",{class:"form-label",for:"subirImagen"},"Cargar",-1))),Zm=$m((()=>(0,i.Lk)("label",{for:"textoPublicacion"},"Escribe un texto (opcional)",-1))),og={key:0,class:"col-md-6 m-auto mt-2 mb-2"},ag={class:"preview-publicacion",id:"canvasPublicacion"},eg={class:"contenedor-imagen"},tg=["src"],rg={key:0,class:"texto-publicacion"},ig={class:"text-center"},ng={key:0,type:"submit",class:"btn btn-menu"},cg={class:"pantalla-cargas text-center"},sg=$m((()=>(0,i.Lk)("div",{class:"logo-carga"},[(0,i.Lk)("img",{class:"logo-img",src:"/favicon.ico",width:"50",alt:""}),(0,i.Lk)("div",{class:"texto-carga"},"Cargando imagen")],-1))),lg=[sg],dg=$m((()=>(0,i.Lk)("div",{class:"publicaciones"},null,-1)));function ug(o,a,e,t,n,c){const l=(0,i.g2)("NavbarComponent"),d=(0,i.g2)("router-link");return(0,i.uX)(),(0,i.CE)("div",null,[(0,i.bF)(l),(0,i.bo)((0,i.Lk)("div",jm,Om,512),[[r.aG,n.subiendoPublicacion]]),(0,i.Lk)("div",Jm,[Gm,(0,i.bF)(d,{class:"m-auto",to:"/u/publicaciones"},{default:(0,i.k6)((()=>[Hm])),_:1}),(0,i.Lk)("div",Km,[(0,i.Lk)("form",{onSubmit:a[2]||(a[2]=(0,r.D$)(((...o)=>c.subir&&c.subir(...o)),["prevent"]))},[Ym,(0,i.Lk)("input",{class:"form-control mb-3",type:"file",name:"imagen",id:"imagen",accept:"image/jpeg, image/png",onChange:a[0]||(a[0]=o=>c.imagenSeleccionada(o))},null,32),Zm,(0,i.bo)((0,i.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":a[1]||(a[1]=o=>n.textoPublicacion=o),maxlength:"50"},null,512),[[r.Jo,n.textoPublicacion]]),n.imgCargada?((0,i.uX)(),(0,i.CE)("div",og,[(0,i.Lk)("div",ag,[(0,i.Lk)("div",eg,[(0,i.Lk)("img",{class:"img-publicacion",src:n.imgCargada,alt:"Imagen cargada"},null,8,tg),n.textoPublicacion?((0,i.uX)(),(0,i.CE)("p",rg,(0,s.v_)(n.textoPublicacion),1)):(0,i.Q3)("",!0)])])])):(0,i.Q3)("",!0),(0,i.Lk)("div",ig,[n.imgCargada?((0,i.uX)(),(0,i.CE)("button",ng,"Subir")):(0,i.Q3)("",!0)])],32)]),(0,i.bo)((0,i.Lk)("div",cg,lg,512),[[r.aG,n.cargandoImagen]]),dg])])}var pg={components:{NavbarComponent:Si},data(){return{nombreUsuario:"",cargandoImagen:!1,imgCargada:"",publicacion:"",textoPublicacion:"",widthImg:0,subiendoPublicacion:!1}},mounted(){this.nombreUsuario=localStorage.getItem("usuario")},methods:{setImageWidth(o){this.widthImg=o.target.width},async subir(){try{this.subiendoPublicacion=!0;const o=document.getElementById("canvasPublicacion"),a=await Dm()(o),e=a.toDataURL("image/png");await t.A.post("/nuevaPublicacion",{usuario:this.nombreUsuario,publicacion:e}).then((()=>{const o=ho().mixin({toast:!0,position:"bottom-end",showConfirmButton:!1,timer:1e3,timerProgressBar:!0,didOpen:o=>{o.addEventListener("mouseenter",ho().stopTimer),o.addEventListener("mouseleave",ho().resumeTimer)}});o.fire({icon:"success",title:"Publicación exitosa."}),setTimeout((function(){$g.push("/u/publicaciones")}),1e3)})).catch((o=>{ho().fire({icon:"error",text:"No se pudo publicar."+o})}))}catch(o){console.error("Error al subir la publicación:",o)}finally{this.subiendoPublicacion=!0}},imagenSeleccionada(o){try{this.cargandoImagen=!0;const a=o.target.files[0];if(a){const o=new FileReader;o.onload=async o=>{this.imgCargada=o.target.result,this.$nextTick((()=>{const o=document.querySelector(".img-publicacion");o&&(this.widthImg=o.offsetWidth)}))},o.readAsDataURL(a)}}catch(a){console.log(a)}finally{this.cargandoImagen=!1}}}};const mg=(0,m.A)(pg,[["render",ug],["__scopeId","data-v-4dcbf92f"]]);var gg=mg;const bg=o=>((0,i.Qi)("data-v-574b45d6"),o=o(),(0,i.jt)(),o),kg={class:"container pt-4 text-center"},hg={class:"pantalla-carga text-center"},vg=bg((()=>(0,i.Lk)("div",{class:"logo-carga"},[(0,i.Lk)("img",{class:"logo-img",src:"/favicon.ico",width:"50",alt:""}),(0,i.Lk)("div",{class:"texto-carga"}," Cargando Publicaciones ")],-1))),fg=[vg],Lg={class:"pantalla-carga text-center"},Cg=bg((()=>(0,i.Lk)("div",{class:"logo-carga"},[(0,i.Lk)("img",{class:"logo-img",src:"/favicon.ico",width:"50",alt:""}),(0,i.Lk)("div",{class:"texto-carga"}," Borrando Publicacion ")],-1))),yg=[Cg],xg=bg((()=>(0,i.Lk)("h1",null,"Publicaciones",-1))),wg={key:0},Pg=bg((()=>(0,i.Lk)("img",{src:"/recursos/plus.png",width:"40",alt:""},null,-1))),Eg=bg((()=>(0,i.Lk)("hr",null,null,-1))),Sg={class:"div-publicaciones"},Mg={class:"item-publicacion"},Ig={class:"btn-borrar"},_g=["onClick"],Ag=["src"],Tg={class:"modal fade",id:"borrarPublicacion",tabindex:"-1","aria-labelledby":"borrarPublicacionLabel","aria-hidden":"true"},Ng={class:"modal-dialog"},qg={class:"modal-content"},Xg=bg((()=>(0,i.Lk)("div",{class:"modal-header text-center"},[(0,i.Lk)("h1",{class:"modal-title fs-5",id:"borrarPublicacionLabel"},"¿Borrar?"),(0,i.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1))),Fg={class:"modal-footer text-center"},Ug=bg((()=>(0,i.Lk)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"No",-1)));function Rg(o,a,e,t,n,c){const s=(0,i.g2)("NavbarComponent"),l=(0,i.g2)("router-link");return(0,i.uX)(),(0,i.CE)("div",null,[(0,i.bF)(s),(0,i.Lk)("div",kg,[(0,i.bo)((0,i.Lk)("div",hg,fg,512),[[r.aG,n.cargandoPublicaciones]]),(0,i.bo)((0,i.Lk)("div",Lg,yg,512),[[r.aG,n.borrandoPublicacion]]),xg,0==n.publicaciones.length?((0,i.uX)(),(0,i.CE)("p",wg,"No hay publicaciones aún.")):(0,i.Q3)("",!0),(0,i.bF)(l,{class:"m-auto",to:"/u/nuevapublicacion"},{default:(0,i.k6)((()=>[Pg])),_:1}),Eg,(0,i.Lk)("div",Sg,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(n.publicaciones,((o,a)=>((0,i.uX)(),(0,i.CE)("div",{key:a},[(0,i.Lk)("div",Mg,[(0,i.Lk)("div",Ig,[(0,i.Lk)("button",{onClick:a=>c.publicacionPorBorrarMethod(o.publicacion),class:"btn-close","data-bs-toggle":"modal","data-bs-target":"#borrarPublicacion"},null,8,_g)]),(0,i.Lk)("img",{class:"publicacion",src:o.publicacion,alt:""},null,8,Ag)])])))),128))]),(0,i.Lk)("div",Tg,[(0,i.Lk)("div",Ng,[(0,i.Lk)("div",qg,[Xg,(0,i.Lk)("div",Fg,[Ug,(0,i.Lk)("button",{type:"button",class:"btn btn-menu-danger","data-bs-dismiss":"modal",onClick:a[0]||(a[0]=(...o)=>c.borrarPublicacion&&c.borrarPublicacion(...o))},"Sí, borrar")])])])])])])}var Vg={components:{NavbarComponent:Si},data(){return{nombreUsuario:"",publicaciones:[],cargandoPublicaciones:!0,publicacionPorBorrar:"",borrandoPublicacion:!1}},mounted(){this.nombreUsuario=localStorage.getItem("usuario"),this.fetchPublicaciones()},methods:{publicacionPorBorrarMethod(o){this.publicacionPorBorrar=o,console.log(this.publicacionPorBorrar)},async borrarPublicacion(){try{this.borrandoPublicacion=!0,await t.A.delete(`/borrarPublicacion?publicacion=${this.publicacionPorBorrar}`).then((()=>{const o=ho().mixin({toast:!0,position:"bottom-end",showConfirmButton:!1,timer:1e3,timerProgressBar:!0,didOpen:o=>{o.addEventListener("mouseenter",ho().stopTimer),o.addEventListener("mouseleave",ho().resumeTimer)}});o.fire({icon:"success",title:"Publicación borrada."}),setTimeout((function(){location.reload()}),1e3)})).catch((()=>{ho().fire({icon:"error",text:"No se pudo borrar."})}))}catch(o){console.error(o)}finally{this.borrandoPublicacion=!1}},setImageWidth(o){this.widthImg=o.target.width},async fetchPublicaciones(){try{const o=await t.A.get(`/publicaciones?usuario=${this.nombreUsuario}`);this.publicaciones=o.data.sort(((o,a)=>a.id-o.id))}catch(o){console.error(o)}finally{this.cargandoPublicaciones=!1}}}};const Dg=(0,m.A)(Vg,[["render",Rg],["__scopeId","data-v-574b45d6"]]);var zg=Dg;const Qg=[{path:"/",component:Pa,meta:{requiresAuth:!1}},{path:"/u/calcular",component:pm,meta:{requiresAuth:!1}},{path:"/u/publicaciones",component:zg,meta:{requiresAuth:!0}},{path:"/u/nuevapublicacion",component:gg,meta:{requiresAuth:!0}},{path:"/u/home",component:Lo,meta:{requiresAuth:!0}},{path:"/u/crearqr",component:Wm,meta:{requiresAuth:!0}},{path:"/u/login",component:Qa},{path:"/u/registrar",component:nt,meta:{requiresAuth:!1}},{path:"/u/planes",component:sp,meta:{requiresAuth:!1}},{path:"/u/registrar/return",component:Tp,meta:{requiresAuth:!1}},{path:"/u/negocios",component:ar,meta:{requiresAuth:!0}},{path:"/u/modificar",component:wu,meta:{requiresAuth:!0}},{path:"/u/nuevoProducto",component:Ai,meta:{requiresAuth:!0}},{path:"/u/productos",component:kc,meta:{requiresAuth:!0}},{path:"/:nombreNegocio",component:Xl,meta:{requiresAuth:!1}}],Wg=(0,f.aE)({history:(0,f.LA)(),routes:Qg,linkActiveClass:"active",linkExactActiveClass:"active"});Wg.beforeEach(((o,a,e)=>{const t=localStorage.getItem("token");o.matched.some((o=>o.meta.requiresAuth))?t?e():e("/u/login"):e()}));var $g=Wg,jg=e(4679);const Bg="prod";t.A.defaults.baseURL="dev"==Bg?"http://192.168.1.235:3500":"https://puestito.online:3500";const Og=(0,r.Ef)(v);Og.use($g),Og.use(jg.Ay,{load:{key:"AIzaSyC8vrGiWbmnS138WURJk2odQ9HU_BIEz9s"}}),Og.mount("#app")}},a={};function e(t){var r=a[t];if(void 0!==r)return r.exports;var i=a[t]={exports:{}};return o[t].call(i.exports,i,i.exports,e),i.exports}e.m=o,function(){var o=[];e.O=function(a,t,r,i){if(!t){var n=1/0;for(d=0;d<o.length;d++){t=o[d][0],r=o[d][1],i=o[d][2];for(var c=!0,s=0;s<t.length;s++)(!1&i||n>=i)&&Object.keys(e.O).every((function(o){return e.O[o](t[s])}))?t.splice(s--,1):(c=!1,i<n&&(n=i));if(c){o.splice(d--,1);var l=r();void 0!==l&&(a=l)}}return a}i=i||0;for(var d=o.length;d>0&&o[d-1][2]>i;d--)o[d]=o[d-1];o[d]=[t,r,i]}}(),function(){e.n=function(o){var a=o&&o.__esModule?function(){return o["default"]}:function(){return o};return e.d(a,{a:a}),a}}(),function(){e.d=function(o,a){for(var t in a)e.o(a,t)&&!e.o(o,t)&&Object.defineProperty(o,t,{enumerable:!0,get:a[t]})}}(),function(){e.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(o){if("object"===typeof window)return window}}()}(),function(){e.o=function(o,a){return Object.prototype.hasOwnProperty.call(o,a)}}(),function(){e.r=function(o){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})}}(),function(){var o={524:0};e.O.j=function(a){return 0===o[a]};var a=function(a,t){var r,i,n=t[0],c=t[1],s=t[2],l=0;if(n.some((function(a){return 0!==o[a]}))){for(r in c)e.o(c,r)&&(e.m[r]=c[r]);if(s)var d=s(e)}for(a&&a(t);l<n.length;l++)i=n[l],e.o(o,i)&&o[i]&&o[i][0](),o[i]=0;return e.O(d)},t=self["webpackChunkmenu"]=self["webpackChunkmenu"]||[];t.forEach(a.bind(null,0)),t.push=a.bind(null,t.push.bind(t))}();var t=e.O(void 0,[504],(function(){return e(9093)}));t=e.O(t)})();
//# sourceMappingURL=app.8c24ac1b.js.map